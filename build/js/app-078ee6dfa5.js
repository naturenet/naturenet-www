/**
 * NatureNet - 
 * @authors 
 * @version v0.0.1
 * @link 
 * @license 
 */
!function(){"use strict";angular.module("app",["app.core","app.widgets","app.layout","app.auth","app.home","app.explore","app.communities","app.projects","app.ideas"])}(),function(){"use strict";angular.module("app.auth",["app.core","app.widgets"])}(),function(){"use strict";angular.module("blocks.exception",["blocks.logger"])}(),function(){"use strict";angular.module("blocks.logger",[])}(),function(){"use strict";angular.module("blocks.router",["ui.router","blocks.logger"])}(),function(){"use strict";angular.module("app.communities",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.core",["ngAnimate","ngSanitize","blocks.exception","blocks.logger","blocks.router","ui.router","firebase","ngMap","ngplus"])}(),function(){"use strict";angular.module("app.explore",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.home",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.ideas",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.layout",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.projects",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.widgets",["app.core"])}(),function(){"use strict";function e(e,t,i,n,a){function r(){var t=[o(),u()];return e.all(t).then(function(){n.info("Authentication Ready")})}function o(){return a.onAuth().then(function(e){return e?(y.userUid=e.uid,t.$broadcast("auth:success",y.userUid),y.userUid):(t.$broadcast("signout"),void n.success("You are now logged out."))})}function s(e,t){var i={display_name:y.name,name:y.realname,email:y.email,affiliation:y.affiliation.$id,consent:y.consent};return a.createUser({email:e,password:t}).then(function(e){y.userUid=e.uid,i.uid=e.uid,c(y.email,y.password).then(function(){return d(i)})})}function c(e,i){return a.authWithPassword({email:e,password:i}).then(function(e){return y.userUid=e.uid,t.$broadcast("auth:success",y.userUid),v(),n.success("You are now logged in!"),y.userUid})}function l(){return a.unAuth()}function d(e){return a.addUser(e).then(function(e){return n.success("Welcome to NatureNet!"),e})}function u(){return a.getArray("sites").then(function(e){y.sites=i("orderBy")(e,"name")})}function m(){y.isRegister=!0,y.isSignin=!1}function p(){y.isRegister=!1,y.isSignin=!0}function v(){t.$broadcast("auth:hide"),_()}function g(e,t){b("login")&&c(e,t)}function h(e,t){b("join")&&s(e,t)}function f(){return 0===y.email.length?(n.error("No email address was entered."),!1):a.resetPassword(y.email).then(function(e){n.success("Please check the provided email address for instructions.")})}function b(e){return y.consent.upload!==!0&&"join"===e?(n.error("You must consent to participate."),!1):y.consent.share!==!0&&"join"===e?(n.error("You must consent to participate."),!1):0===y.email.length?(n.error("No email address was entered."),!1):0===y.password.length?(n.error("No password was entered."),!1):0===y.name.length&&"join"===e?(n.error("No username was entered."),!1):0===y.realname.length&&"join"===e?(n.error("No name was entered."),!1):0===y.affiliation.length&&"join"===e?(n.error("No affiliation was entered."),!1):!0}function _(){y.isRegister=!1,y.isSignin=!1,y.email="",y.password="",y.name="",y.realname="",y.affiliation="",y.consent={}}var y=this;y.userUid=void 0,y.newUserObject=void 0,y.email="",y.password="",y.name="",y.realname="",y.affiliation="",y.consent={},y.isRegister=!1,y.isSignin=!1,y.login=g,y.join=h,y.close=v,y.reset=f,r(),t.$on("register:show",m),t.$on("signin:show",p),t.$on("auth:hide",_),t.$on("signout",l)}angular.module("app.auth").controller("AuthController",e),e.$inject=["$q","$rootScope","$filter","logger","dataservice"]}(),function(){"use strict";function e(){this.config={appErrorPrefix:void 0},this.configure=function(e){this.config.appErrorPrefix=e},this.$get=function(){return{config:this.config}}}function t(e){e.decorator("$exceptionHandler",i)}function i(e,t,i){return function(n,a){var r=t.config.appErrorPrefix||"",o={exception:n,cause:a};n.message=r+n.message,e(n,a),i.error(n.message,o)}}angular.module("blocks.exception").provider("exceptionHandler",e).config(t),t.$inject=["$provide"],i.$inject=["$delegate","exceptionHandler","logger"]}(),function(){"use strict";function e(e,t){function i(i){return function(n){var a,r;return n.code&&n.message&&(a="\n"+n.message,r=i+a),n.message=r,t.error(r),e.reject(n)}}var n={catcher:i};return n}e.$inject=["$q","logger"],angular.module("blocks.exception").factory("exception",e)}(),function(){"use strict";function e(e,t){function i(i,n,a){t.error(i,a),e.error("Error: "+i,n)}function n(t,i,n){e.info("Info: "+t,i)}function a(i,n,a){t.success(i,a),e.info("Success: "+i,n)}function r(t,i,n){e.warn("Warning: "+t,i)}var o={showToasts:!0,error:i,info:n,success:a,warning:r,log:e.log};return o}angular.module("blocks.logger").factory("logger",e),e.$inject=["$log","toastr"]}(),function(){"use strict";function e(e,t,i){function n(e,n,r,o){function s(e,n){e.forEach(function(e){e.config.resolve=angular.extend(e.config.resolve||{},a.resolveAlways),t.state(e.state,e.config)}),n&&!p&&(p=!0,i.otherwise(n))}function c(){n.$on("$stateChangeError",function(t,i,n,a,r,s){if(!m){v.errors++,m=!0;var c=i&&(i.title||i.name||i.loadedTemplateUrl)||"unknown target",l="Error routing to "+c+". "+(s.data||"")+". <br/>"+(s.statusText||"")+": "+(s.status||"");o.warning(l,[i]),e.path("/")}})}function l(){c(),u()}function d(){return r.get()}function u(){n.$on("$stateChangeSuccess",function(e,t,i,r,o){v.changes++,m=!1;var s=(t.title||"")+" "+a.docTitle;n.title=s,n.$broadcast("map:hide")})}var m=!1,p=!1,v={errors:0,changes:0},g={configureStates:s,getStates:d,stateCounts:v};return l(),g}var a={docTitle:void 0,resolveAlways:{}};e.html5Mode(!0),this.configure=function(e){angular.extend(a,e)},this.$get=n,n.$inject=["$location","$rootScope","$state","logger"]}angular.module("blocks.router").provider("routerHelper",e),e.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e,t,i,n,a,r){function o(){a.showSplash();var t=[s(),c(),l()];return e.all(t).then(function(){a.hideSplash(),n.info("Activated Communities View")})}function s(){return r.getUsersRecent(1).then(function(e){return g(e[0].id),h.userId})}function c(){return r.getArray("users").then(function(e){return h.users=i("emptyToEnd")(i("orderBy")(e,"latest_contribution",!0),"latest_contribution"),h.users})}function l(){return r.getArray("groups").then(function(e){return h.groups=e,h.groups})}function d(e){return r.getObservationsArrayByUserId(e).then(function(e){return h.userObservations=e,h.numberOfObservations=0,h.userObservations})}function u(e){return r.getGroupsByUserId(e).then(function(e){return h.userGroups=e,h.userGroups})}function m(e){t.users[e]&&t.users[e].avatar?h.userAvatar=t.users[e].avatar:h.userAvatar="images/default-avatar.png"}function p(e){return t.users[e].affiliation?r.getSiteById(t.users[e].affiliation).then(function(e){return h.userSite=e.name,h.userSite}):(h.userSite="",h.userSite)}function v(){var e=r.getAuth();h.isSelf=e&&e.uid===h.userId}function g(t){var i=[d(t),u(t),p(t)];return e.all(i).then(function(){h.userId=t,h.observationsDisplayLimit=h.displayLimit,h.groupsDisplayLimit=h.displayLimit,m(t),v(),n.info("Updated Communities View based on new userId")})}var h=this;h.title="Communities",h.sidebarDisplayLimit=5,h.mainDisplayLimit=6,h.userId=void 0,h.userSite="",h.userAvatar="",h.isSelf=!1,h.users=[],h.groups=[],h.userObservations=[],h.userGroups=[],h.peopleDisplayLimit=h.sidebarDisplayLimit,h.groupsDisplayLimit=h.sidebarDisplayLimit,h.observationsDisplayLimit=h.mainDisplayLimit,h.groupsDisplayLimit=h.mainDisplayLimit,h.isPeopleListVisible=!0,h.isGroupsListVisible=!0,h.updateUserId=g,h.formatDate=a.formatDate,o()}angular.module("app.communities").controller("CommunitiesController",e),e.$inject=["$q","$rootScope","$filter","logger","utility","dataservice"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"communities",config:{url:"/communities",templateUrl:"app/communities/communities.html",controller:"CommunitiesController",controllerAs:"vm",title:"Communities",settings:{nav:2,content:"Communities"}}}]}angular.module("app.communities").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e){e.options.timeOut=4e3,e.options.positionClass="toast-bottom-right"}function t(e,t,i){e.debugEnabled&&e.debugEnabled(!0),i.configure(n.appErrorPrefix),t.configure({docTitle:" | "+n.appTitle})}var i=angular.module("app.core");i.config(e),e.$inject=["toastr"];var n={appErrorPrefix:"[NN Error] ",appTitle:"NatureNet",mapOptions:{zoom:5,minZoom:3,zoomControl:!0,scaleControl:!1,streetViewControl:!1,keyboardShortcuts:!1}};i.value("config",n),i.config(t),t.$inject=["$logProvider","routerHelperProvider","exceptionHandlerProvider"]}(),function(){"use strict";angular.module("app.core").constant("toastr",toastr).constant("moment",moment)}(),function(){"use strict";function e(e){var i="/404";e.configureStates(t(),i)}function t(){return[{state:"404",config:{url:"/404",templateUrl:"app/core/404.html",title:"404"}}]}e.$inject=["routerHelper"],angular.module("app.core").run(e)}(),function(){"use strict";function e(e,t,i,n,a,r,o,s){function c(e){function t(e){return e}function i(e){return o.catcher("Failed for dataservice.getArray")(e)}var n=new Firebase(B+e).orderByChild("updated_at").limitToLast(50),a=l(n);return a.$loaded().then(t)["catch"](i)}function l(e){return new r(e,function(e){return!(e.hasOwnProperty("status")&&"deleted"===e.status.toLowerCase())})}function d(e){return e.updated_at=Firebase.ServerValue.TIMESTAMP,e.hasOwnProperty("created_at")||(e.created_at=Firebase.ServerValue.TIMESTAMP),e}function u(){function t(e){i.resolve(e)}var i=e.defer(),a=new Firebase(B),r=n(a);return r.$onAuth(function(e){t(e)}),i.promise}function m(){var t=(e.defer(),new Firebase(B)),i=n(t);return i.$getAuth()}function p(e){function t(e){return e}function i(e){return o.catcher("Failed for dataservice.authWithPassword")(e)}var a=new Firebase(B),r=n(a);return r.$authWithPassword(e).then(t)["catch"](i)}function v(){var e=new Firebase(B),t=n(e);return t.$unauth()}function g(e){function t(e){return e}function i(e){return o.catcher("Failed for dataservice.createUser")(e)}var a=new Firebase(B),r=n(a);return r.$createUser(e).then(t)["catch"](i)}function h(e){function t(e){return e}function i(e){return o.catcher("Failed for dataservice.removeUser")(e)}var a=new Firebase(B),r=n(a);return r.$removeUser().then(t)["catch"](i)}function f(t){function i(e){a.resolve("success")}function n(e){a.reject(o.catcher("Failed for dataservice.addUser")(e))}var a=e.defer(),r=new Firebase(B),s=t.uid,c={};return c["users-private/"+s]=d({id:s,name:t.name,consent:t.consent}),c["users/"+s]=d({id:s,display_name:t.display_name,affiliation:t.affiliation}),r.update(c,function(e){e?n(e):i()}),a.promise}function b(e){function t(e){return e}function i(e){return o.catcher("Failed for dataservice.resetPassword")(e)}var a=new Firebase(B),r=n(a);return r.$resetPassword({email:e}).then(t)["catch"](i)}function _(){function e(e){return e}function i(e){return o.catcher("Failed for dataservice.getUsers")(e)}var n=new Firebase(B+"users"),a=t(n);return a.$loaded().then(e)["catch"](i)}function y(e){function t(e){return e}function i(e){return o.catcher("Failed for dataservice.getUsersRecent")(e)}var n=new Firebase(B+"users").orderByChild("created_at").limitToLast(e),a=l(n);return a.$loaded().then(t)["catch"](i)}function w(){function e(e){return e}function i(e){return o.catcher("Failed for dataservice.getCurrentUser")(e)}var n=m();if(null===n||!n.uid)return void console.log("User is not signed in.");var a=new Firebase(B+"users/"+n.uid),r=t(a);return r.$loaded().then(e)["catch"](i)}function $(){function e(e){return e}function i(e){return o.catcher("Failed for dataservice.getGroups")(e)}var n=new Firebase(B+"groups"),a=t(n);return a.$loaded().then(e)["catch"](i)}function k(e){function t(e){return e}function i(e){return o.catcher("Failed for dataservice.getGroupsByUserId")(e)}var n=new Firebase(B+"groups").orderByChild("members/"+e).equalTo(!0),a=l(n);return a.$loaded().then(t)["catch"](i)}function j(e){function i(e){return e}function n(e){return o.catcher("Failed for dataservice.getSiteById")(e)}var a=new Firebase(B+"sites").child(e),r=t(a);return r.$loaded().then(i)["catch"](n)}function D(e){function t(e){return e}function i(e){return o.catcher("Failed for dataservice.getObservationsArrayByUserId")(e)}var n=new Firebase(B+"observations").orderByChild("observer").equalTo(e),a=l(n);return a.$loaded().then(t)["catch"](i)}function L(t){var i=e.defer();return I(t).then(function(e){var t=0,n=e.length,a=void 0,r=[];for(t;n>t;t++)a=new Firebase(B+"observations").orderByChild("activity_location").equalTo(e[t]),a.on("value",function(e){for(var t in e.val())r.push(e.val()[t])});i.resolve(r)}),i.promise}function C(){function e(e){return e}function i(e){return o.catcher("Failed for dataservice.getProjects")(e)}var n=new Firebase(B+"activities"),a=t(n);return a.$loaded().then(e)["catch"](i)}function S(e){function t(e){return e}function i(e){return o.catcher("Failed for dataservice.getProjectsRecent")(e)}var n=new Firebase(B+"activities").orderByChild("updated_at").limitToLast(e),a=l(n);return a.$loaded().then(t)["catch"](i)}function I(t){function i(e){var t=[];for(var i in e.val())t.push(i);a.resolve(t)}function n(e){a.reject(o.catcher("Failed for dataservice.getProjectLocationIds")(e))}var a=e.defer(),r=new Firebase(B+"geo/activities").orderByChild("activity").equalTo(t);return r.on("value",i,n),a.promise}function A(t){var i=e.defer(),n=t.activity_location,a=new Firebase(B+"geo/activities").child(n);return a.once("value",function(e){if(e.exists()){var t=e.child("activity").val(),n=new Firebase(B+"activities").child(t);n.once("value",function(e){e.exists()?i.resolve(e.val()):i.reject()})}else i.reject()}),i.promise}function U(e,t,i,n){function a(e){return e}function r(e){return o.catcher("Failed for dataservice.addIdea")(e)}var s=new Firebase(B+"ideas"),c=s.push().key(),l=d({id:c,group:i,type:n,submitter:e,content:t,status:"doing"});return s.child(c).set(l).then(a)["catch"](r)}function x(e,i,n){var a=m();if(null===a||!a.uid)return void console.log("You must be signed in to do that!");var r=a.uid;t(new Firebase(B+e+"/"+i.$id+"/likes")).$loaded().then(function(e){e[r]===n?delete e[r]:e[r]=n,e.$save()})}function O(e,t,i){var n=m();if(null===n||!n.uid)return void console.log("You must be signed in to do that!");var a=new Firebase(B),r=a.child("comments").push().key(),o=d({id:r,parent:t.$id,context:e,comment:i,commenter:n.uid}),s={};s["comments/"+r]=o,s[e+"/"+t.$id+"/comments/"+r]=!0,a.update(s)}function P(e){function t(e){return e}function i(e){return o.catcher("Failed for dataservice.getCommentsRecent")(e)}var n=new Firebase(B+"comments").orderByChild("updated_at").limitToLast(e),a=l(n);return a.$loaded().then(t)["catch"](i)}function F(e){function t(e){return e}function i(e){return o.catcher("Failed for dataservice.getCommentsByUserId")(e)}var n=new Firebase(B+"comments").orderByChild("commenter").equalTo(e),a=l(n);return a.$loaded().then(t)["catch"](i)}function N(e){function t(e){return e}function i(e){return o.catcher("Failed for dataservice.getCommentsForRecord")(e)}var n=new Firebase(B+"comments").orderByChild("parent").equalTo(e.$id),a=l(n);return a.$loaded().then(t)["catch"](i)}var B="https://naturenet.firebaseio.com/",M={getArray:c,onAuth:u,getAuth:m,authWithPassword:p,unAuth:v,createUser:g,removeUser:h,addUser:f,resetPassword:b,getUsers:_,getUsersRecent:y,getActiveUser:w,getGroups:$,getGroupsByUserId:k,getSiteById:j,getObservationsArrayByUserId:D,getObservationsArrayByProjectId:L,getProjects:C,getProjectsRecent:S,getProjectForObservation:A,addIdea:U,likeContent:x,addComment:O,getCommentsRecent:P,getCommentsForRecord:N,getCommentsByUserId:F};return M}angular.module("app.core").factory("dataservice",e),e.$inject=["$q","$firebaseObject","$firebaseArray","$firebaseAuth","$filter","FilteredArray","exception","logger"]}(),function(){"use strict";function e(e,t){function i(e){var t=moment(e).format("MMM DD YYYY").toString();return t}function n(){e.showSplash=!0,o+=1}function a(){o-=1,1>o&&(e.showSplash=!1)}var r={formatDate:i,showSplash:n,hideSplash:a},o=0;return r}function t(){return function(e){return!(e[i].hasOwnProperty("status")&&"deleted"===e[i].status.toLowerCase())}}angular.module("app.core").factory("utility",e).factory("FilteredArray",["$firebaseArray",function(e){function t(t,i){return this.filterFn=i,e.call(this,t)}return t.prototype.$$added=function(t){var i=e.prototype.$$added.call(this,t);return!this.filterFn||this.filterFn(i)?i:void 0},e.$extend(t)}]).service("notDeleted",t).filter("emptyToEnd",function(){return function(e,t){if(angular.isArray(e)){var i=e.filter(function(e){return e[t]}),n=e.filter(function(e){return!e[t]});return i.concat(n)}}}).filter("img_thumb",[function(){return function(e){return String(e).replace("upload/","upload/t_web-thumbnail/")}}]).filter("img_preview",[function(){return function(e){return String(e).replace("upload/","upload/t_web-preview/")}}]).filter("img_sidebar",[function(){return function(e){return String(e).replace("upload/","upload/t_web-sidebar/")}}]).filter("img_large",[function(){return function(e){return String(e).replace("upload/","upload/t_web-large/")}}]).filter("img_fullscreen",[function(){return function(e){return String(e).replace("upload/","upload/t_web-fullscreen")}}]),e.$inject=["$rootScope","$timeout"]}(),function(){"use strict";function e(e,t,i,n,a,r,o,s,c){function l(){o.showSplash();var t=[d()];return c.getMap().then(function(i){a.info("Google Maps Ready"),y.map=i,m(),e.all(t).then(function(){o.hideSplash(),a.info("Activated Map View")})})}function d(){return s.getArray("observations").then(function(e){return y.observations=e,y.observations})}function u(){f(y.currentObservation),p(y.currentObservation),_(y.currentObservation)}function m(){r.mapOptions.center=new google.maps.LatLng(39.833333,-98.583333),r.mapOptions.mapTypeId=google.maps.MapTypeId.HYBRID,y.map.setOptions(r.mapOptions),i.$broadcast("map:init"),t.$on("map:toggle",v),t.$on("map:show",g),t.$on("map:hide",h)}function p(e){if(e){var t=new google.maps.LatLng({lat:e.l[0],lng:e.l[1]}),i=y.map.getZoom();y.map.panTo(t),18>i&&y.map.setZoom(18)}}function v(){i.$parent.hasMap=!i.$parent.hasMap}function g(e,t){t&&(y.currentObservation=t),i.$parent.hasMap=!0}function h(){i.$parent.hasMap=!1}function f(e){y.currentObservation=e,y.hasSidebar=!0,y.currentProject=void 0,e&&s.getProjectForObservation(e).then(function(e){y.currentProject=e})}function b(){y.hasSidebar=!1}function _(){return y.comments=void 0,y.currentObservation?s.getCommentsForRecord(y.currentObservation).then(function(e){return y.comments=e,y.comments}):void 0}var y=this;y.title="Explore",y.map=void 0,y.observations=void 0,y.currentObservation=void 0,y.currentProject=void 0,y.comments=void 0,i.$parent.hasMap=!1,y.hasSidebar=!1,y.isObservationsListVisible=!0,y.toggleMap=v,y.showSidebar=f,y.hideSidebar=b,y.formatDate=o.formatDate,l(),i.$watch("vm.currentObservation",u)}angular.module("app.explore").controller("ExploreController",e),e.$inject=["$q","$rootScope","$scope","$timeout","logger","config","utility","dataservice","NgMap"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"explore",config:{url:"/explore",templateUrl:"app/explore/explore.html",controller:"ExploreController",controllerAs:"vm",title:"Explore"}}]}angular.module("app.explore").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(){function e(e,t,i){function n(){r=e.map,google.maps.event.addListener(r,"bounds_changed",a)}function a(){function e(){return-85>o?i=c-(o+85):n>85&&(i=c-(n-85)),t=new google.maps.LatLng(i,l),void r.setCenter(t)}var t=void 0,i=void 0,n=r.getBounds().getNorthEast().lat(),a=r.getBounds().getNorthEast().lng(),o=r.getBounds().getSouthWest().lat(),s=r.getBounds().getSouthWest().lng(),c=r.getCenter().lat(),l=r.getCenter().lng(),d=-85>o&&n>85,u=o>-85&&85>n,m=d||u,p=a>0&&180>a&&l>0,v=0>s&&s>-180&&0>l,g=p||v;if(m&&g);else if(!m)return e()}var r=void 0;e.$on("map:init",n)}var t={link:e,restrict:"A"};return t}angular.module("app.explore").directive("nnMapContain",e),e.$inject=[]}(),function(){"use strict";function e(e,t,i,n,a){function r(){n.showSplash();var t=[o(),s()];return e.all(t).then(function(){n.hideSplash(),i.info("Activated Home View")})}function o(){return a.getArray("observations").then(function(e){return l.observations=e,l.observations})}function s(){return a.getArray("ideas").then(function(e){return l.ideas=e,l.ideas})}function c(e){t.$broadcast("map:show",e)}var l=this;l.title="Home",l.observations=[],l.ideas=[],l.observationsDisplayLimit=5,l.ideasDisplayLimit=5,l.showObservation=c,l.formatDate=n.formatDate,r()}angular.module("app.home").controller("HomeController",e),e.$inject=["$q","$rootScope","logger","utility","dataservice"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"home",config:{url:"/",templateUrl:"app/home/home.html",controller:"HomeController",controllerAs:"vm",title:"Home",settings:{content:"Home"}}}]}angular.module("app.home").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,i,n,a,r){function o(){a.showSplash();var t=[c()];return e.all(t).then(function(){a.hideSplash(),n.info("Activated Design Ideas View")})}function s(){return p.comments=void 0,p.selectedIdea?r.getCommentsForRecord(p.selectedIdea).then(function(e){return p.comments=e,p.comments}):void 0}function c(){return r.getArray("ideas").then(function(e){p.ideas=[],p.challenges=[];var t=0,i=e.length;for(t;i>t;t++)e[t].group&&"challenge"===e[t].group.toLowerCase()?p.challenges.push(e[t]):p.ideas.push(e[t]);return!0})}function l(e,t,i,a){return r.addIdea(e,t,i,a).then(function(e){c().then(function(){m(),n.success("Idea successfully submitted!")})})}function d(){return r.onAuth().then(function(e){return p.uid=e.uid,p.uid})}function u(){0!==p.content.length&&d().then(function(){l(p.uid,p.content,p.group,p.type)})}function m(){p.content=""}var p=this;p.title="Design Ideas",p.sidebarDisplayLimit=3,p.uid=void 0,p.content="",p.group="idea",p.ideaTypes=["New Features","Project Ideas","Community Ideas","Improvement Ideas"],p.type=p.ideaTypes[0],p.ideas=[],p.challenges=[],p.currentIdeaId=void 0,p.currentChallengeId=void 0,p.comments=void 0,p.ideasDisplayLimit=p.sidebarDisplayLimit,p.challengesDisplayLimit=p.sidebarDisplayLimit,p.isIdeasListVisible=!0,p.isChallengesListVisible=!0,p.addIdea=u,p.formatDate=a.formatDate,o(),i.$watch("vm.selectedIdea",s)}angular.module("app.ideas").controller("IdeasController",e),e.$inject=["$q","$rootScope","$scope","logger","utility","dataservice"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"ideas",config:{url:"/ideas",templateUrl:"app/ideas/ideas.html",controller:"IdeasController",controllerAs:"vm",title:"Design Ideas",settings:{nav:4,content:"Design Ideas"}}}]}angular.module("app.ideas").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,i,n,a){function r(){c()}function o(){return a.onAuth().then(function(e){return b.isAuthenticated=!0,b.userUid=e.uid,b.userUid})}function s(){b.isAuthenticated=!1,b.userUid=void 0}function c(){b.navRoutes=_.filter(function(e){return e.settings&&e.settings.nav}).sort(function(e,t){return e.settings.nav-t.settings.nav})}function l(e){return d(e)+" "+u(e)}function d(e){return"item-"+e.name}function u(e){if(!e.title||!t.current||!t.current.title)return"";var i=e.title;return t.current.title.substr(0,i.length)===i?"is-current":""}function m(t){"boolean"==typeof t&&t?(e.$broadcast("map:show"),b.isMapActive=t):"boolean"!=typeof t||t?"boolean"!=typeof t&&(e.$broadcast("map:toggle"),b.isMapActive=!b.isMapActive):(e.$broadcast("map:hide"),b.isMapActive=t)}function p(){e.$broadcast("register:show")}function v(){e.$broadcast("signin:show")}function g(){e.$broadcast("signout")}function h(){o()}function f(){b.isMapActive=!0}var b=this,_=i.getStates();b.userUid=void 0,b.isMapActive=!1,b.isAuthenticated=!1,b.getClasses=l,b.toggleMap=m,b.showRegister=p,b.showSignin=v,b.signOut=g,r(),e.$on("auth:success",h),e.$on("map:show",f),e.$on("signout",s)}angular.module("app.layout").controller("HeaderController",e),e.$inject=["$rootScope","$state","routerHelper","logger","dataservice"]}(),function(){"use strict";function e(e,t,i,n,a,r){function o(){i.info(n.appTitle+" loaded!",null),a.showSplash();var t=[s(),c(),l()];return e.all(t).then(function(){a.hideSplash()})}function s(){return r.getUsers().then(function(e){return t.users=e,t.users})}function c(){return r.getGroups().then(function(e){return t.groups=e,t.groups})}function l(){return r.getProjects().then(function(e){return t.projects=e,t.projects})}function d(){t.$broadcast("auth:hide")}function u(){p.isAuth=!0}function m(){p.isAuth=!1}var p=this;p.isAuth=!1,p.hideAuth=m,p.broadcastHideAuth=d,o(),t.$on("register:show",u),t.$on("signin:show",u),t.$on("auth:hide",m)}angular.module("app.layout").controller("ShellController",e),e.$inject=["$q","$rootScope","logger","config","utility","dataservice"]}(),function(){"use strict";function e(e,t,i,n,a){function r(){n.showSplash();var t=[o(),s()];return e.all(t).then(function(){var t=[c(d.projectId)];e.all(t).then(function(){n.hideSplash(),i.info("Activated Projects View")})})}function o(){return a.getProjectsRecent(1).then(function(e){return d.projectId=e[0].id,d.projectId})}function s(){return a.getArray("activities").then(function(e){return d.projects=t("orderBy")(e,"latest_contribution",!0),d.projects})}function c(e){return a.getObservationsArrayByProjectId(e).then(function(e){return d.projectObservations=e,d.projectObservations})}function l(t){var n=[c(t)];return e.all(n).then(function(){d.projectId=t,i.info("Updated Projects View based on new projectId")})}var d=this;d.title="Projects",d.displayLimit=6,d.projectId=void 0,d.projects=[],d.projectObservations=[],d.isProjectsListVisible=!0,d.updateProjectId=l,d.formatDate=n.formatDate,r()}angular.module("app.projects").controller("ProjectsController",e),e.$inject=["$q","$filter","logger","utility","dataservice"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"projects",config:{url:"/projects",templateUrl:"app/projects/projects.html",controller:"ProjectsController",controllerAs:"vm",title:"Projects",settings:{nav:3,content:"Projects"}}}]}angular.module("app.projects").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(){function e(e,t,i){}var t={scope:{avatarUrl:"@",title:"@",subtitle:"@"},link:e,templateUrl:"app/widgets/nn-badge.html",restrict:"EA"};return t}angular.module("app.widgets").directive("nnBadge",e)}(),function(){"use strict";function e(){function e(e,t,i){e.comment="",e.showDefault=!1,e.getUser()}function t(e,t){e.doComment=function(){t.addComment(e.context,e.data,e.comment),e.comment=""},e.getUser=function(){t.getActiveUser().then(function(t){return e.avatarUrl=t.avatar,e.avatarUrl&&""!==e.avatarUrl||(e.showDefault=!0),t})}}var i={scope:{data:"=",context:"@",avatarUrl:"@",comment:"@"},link:e,templateUrl:"app/widgets/nn-comment-form.html",restrict:"EA",controller:["$scope","dataservice",t]};return i}angular.module("app.widgets").directive("nnCommentForm",e)}(),function(){"use strict";function e(e){function t(t,i,n){t.formatDate=e.formatDate,"[no description]"===t.comment?t.text="":t.text=t.comment}var i={scope:{avatarUrl:"@",name:"@",date:"@",comment:"@"},link:t,templateUrl:"app/widgets/nn-comment.html",restrict:"EA"};return i}angular.module("app.widgets").directive("nnComment",e),e.$inject=["utility"]}(),function(){"use strict";function e(e,t){function i(e,t,i){function n(){e.options.some(function(t){return t===e.selectedOption})&&(e.isPlaceholder=void 0===e.selectedOption[e.property],e.display=e.selectedOption[e.property])}function a(t){return e.isPlaceholder?void 0:t[e.property]===e.selectedOption[e.property]?"is-current":""}function r(){e.listVisible=!e.listVisible}function o(t){e.isPlaceholder=!1,e.selectedOption=t,e.listVisible=!1,e.display=e.selectedOption[e.property]}e.listVisible=!1,e.isPlaceholder=!0,e.isCurrent=a,e.toggleOptions=r,e.selectOption=o,n()}var n={scope:{placeholder:"@",options:"=",selectedOption:"=",property:"@"},link:i,templateUrl:"app/widgets/nn-dropdown.html",restrict:"EA"};return n}angular.module("app.widgets").directive("nnDropdown",e),e.$inject=["$rootScope","logger"]}(),function(){"use strict";function e(){function e(e,t,i){e.showDefault=!1,e.imageUrl&&""!==e.imageUrl||(e.showDefault=!0)}var t={scope:{imageUrl:"@"},link:e,templateUrl:"app/widgets/nn-image.html",restrict:"EA"};return t}angular.module("app.widgets").directive("nnImage",e)}(),function(){"use strict";function e(e,t){function i(i,n,a){function r(t){e.$broadcast("map:show",t)}function o(){i.limit=parseInt(i.limit)+parseInt(c)}function s(){i.limit=parseInt(c)}i.$watch("observations",s);var c=i.limit.slice(0);i.formatDate=t.formatDate,i.showObservation=r,i.incrementLimit=o}var n={scope:{observations:"=",limit:"@"},link:i,templateUrl:"app/widgets/nn-observations-list.html",restrict:"EA"};return n}angular.module("app.widgets").directive("nnObservationsList",e),e.$inject=["$rootScope","utility"]}(),function(){"use strict";function e(){function e(e,t,i){function n(){e.likes=a("likes",!0),e.dislikes=a("likes",!1),e.comments=a("comments"),e.data.likes&&(e.liked=e.data.likes[e.uid]===!0,e.disliked=e.data.likes[e.uid]===!1)}function a(t,i){if(e.data[t]){var n=0,a=void 0;for(a in e.data[t])"undefined"!=typeof i&&e.data[t][a]!==i||n++;return n}return 0}e.$watchCollection("data.likes",n),e.$watchCollection("data.comments",n)}function t(e,t){var i=t.getAuth();e.uid=i?i.uid:null,e.doLike=function(){e.context&&t.likeContent(e.context,e.data,!0)},e.doDislike=function(){e.context&&t.likeContent(e.context,e.data,!1)}}var i={scope:{data:"=",showDislikes:"@",context:"@"},link:e,templateUrl:"app/widgets/nn-social-totals.html",restrict:"EA",controller:["$scope","dataservice",t]};return i}angular.module("app.widgets").directive("nnSocialTotals",e)}(),angular.module("app.core").run(["$templateCache",function(e){e.put("app/communities/communities.html",'<div class="sidebar sidebar--communities"><header class="sidebar__header sidebar__header--people"><div class="dropdown dropdown--people" ng-class="{ \'dropdown--show-list\': !!vm.isPeopleListVisible }"><div class=dropdown__display ng-click="vm.isPeopleListVisible = !vm.isPeopleListVisible"><span>People</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=dropdown__option ng-repeat="u in vm.users | orderBy: \'-updated_at\' | limitTo: vm.peopleDisplayLimit" ng-click=vm.updateUserId(u.id)><nn-badge class=badge title={{u.display_name}} subtitle avatar-url={{u.avatar}}></nn-badge></div><div class=sidebar__see-more ng-if="vm.users.length > vm.peopleDisplayLimit"><a href=# ng-click="vm.peopleDisplayLimit = vm.peopleDisplayLimit + vm.sidebarDisplayLimit">Show More</a></div></div></div></header><header class="sidebar__header sidebar__header--groups" ng-if=false><div class="dropdown dropdown--groups" ng-class="{ \'dropdown--show-list\': !!vm.isGroupsListVisible }"><div class=dropdown__display ng-click="vm.isGroupsListVisible = !vm.isGroupsListVisible"><span>Groups</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=dropdown__option ng-repeat="g in vm.groups | orderBy: \'-updated_at\' | limitTo: vm.groupsDisplayLimit"><nn-badge class=badge title={{g.name}} subtitle avatar-url={{g.avatar}}></nn-badge></div><div class=sidebar__see-more ng-if="vm.groups.length > vm.groupsDisplayLimit"><a href=# ng-click="vm.groupsDisplayLimit = vm.groupsDisplayLimit + vm.sidebarDisplayLimit">Show More</a></div></div></div></header></div><div class="main main--with-sidebar main--communities"><section class="main__section masthead" ng-if=vm.userId><header class=masthead__header><div class=masthead__avatar ng-style="{ \'background-image\' : \'url(\' + vm.userAvatar + \')\' }"></div><div class=masthead__title>{{$root.users[vm.userId].display_name}}</div></header><div class=masthead__text>{{vm.userSite}}</div><div class=masthead__text>{{$root.users[vm.userId].bio}}</div></section><section class="main__section recent-contributions"><div class=main__subtitle>Recent Contributions by {{$root.users[vm.userId].display_name}}</div><nn-observations-list observations=vm.userObservations limit={{vm.mainDisplayLimit}}></nn-observations-list></section><section class="main__section main__section--groups" ng-if=false><div class=main__subtitle>Groups</div><div class=main__groups><nn-badge class="badge badge--large" ng-if="vm.userGroups.length > 0" ng-repeat="g in vm.userGroups | orderBy: \'-updated_at\' | limitTo: vm.groupsDisplayLimit" title={{g.name}} avatar-url={{g.avatar}}></nn-badge><div ng-if="vm.userGroups.length === 0">No groups.</div></div><div class ng-if="vm.userGroups.length > vm.groupsDisplayLimit"><a href=# ng-click="vm.groupsDisplayLimit = vm.groupsDisplayLimit + vm.mainDisplayLimit">Show More</a></div></section></div>'),
e.put("app/auth/auth.html",'<div class="auth -center" ng-click=$event.stopPropagation()><div class=auth__header><div class="auth__avatar -centerh"></div><div class=auth__close ng-click=vm.close()></div></div><div ng-if="vm.isRegister && !vm.isSignin" ng-include="\'app/auth/register.html\'"></div><div ng-if="!vm.isRegister && vm.isSignin" ng-include="\'app/auth/signin.html\'"></div></div>'),e.put("app/auth/register.html",'<form novalidate class="auth__form auth__form--register" ng-submit="vm.join(vm.email, vm.password)"><div class=auth__text>You are invited to participate in NatureNet, a research project being conducted by the researchers listed at <a href=http://research.nature-net.org/people.html>http://research.nature-net.org/people.html</a>. In order for us to collect and study the way people are using technology like NatureNet, we must have your consent.</div><p><label><input class=auth__field required type=checkbox name=consent_ ng-model=vm.consent.upload> (Required) I agree that any observations (photos) or comments I contribute to NatureNet may be publicly displayed on the web, mobile phone, or tabletop platforms that comprise NatureNet.</label></p><p><label><input class=auth__field required type=checkbox name=consent_ ng-model=vm.consent.share> (Required) I agree to allow any comments, observations, and profile information that I choose to share with others via the online application to be visible to others who use the application at the same time or after me.</label></p><p><label><input class=auth__field type=checkbox name=consent_ ng-model=vm.consent.recording> (Optional) I agree to be videotaped/audiotaped during my participation in this study.</label></p><p><label><input class=auth__field placeholder=Username type=checkbox name=consent_ ng-model=vm.consent.survey> (Optional) I agree to complete a short questionnaire during or after my participation in this study.</label><div class=auth__form><input class=auth__field placeholder=Username type=text ng-model=vm.name> <input class=auth__field placeholder=password type=password ng-model=vm.password> <input class=auth__field placeholder=Name type=text ng-model=vm.realname> <input class=auth__field placeholder=email type=text ng-model=vm.email><select class=auth__field placeholder=Affiliation type=text ng-model=vm.affiliation ng-options="s.name for s in vm.sites"></select><input class="button button--auth" value=join type=submit></div></p></form>'),e.put("app/auth/signin.html",'<form class="auth__form auth__form--signin" ng-submit="vm.login(vm.email, vm.password)"><div class=auth__logo></div><input class=auth__field placeholder=email type=text ng-model=vm.email> <input class=auth__field placeholder=password type=password ng-model=vm.password><p class=auth__reset ng-click=vm.reset()>Reset my password</p><input class="button button--auth" value="sign in" type=submit></form>'),e.put("app/core/404.html","<section class=fourzerofour></section>"),e.put("app/home/home.html",'<div class=home-content><div class="content content--what"><div class=content__image></div><div class=content__text><h1 class=content__title>What is NatureNet?</h1><h2 class=content__subtitle>A community of citizen environmentalists whose members keep making it better.</h2><div class=content__description><p>NatureNet is a community of citizen environmentalists whose members keep making it better. Active sites include the Anacostia Watershed in Washington, D.C. and Maryland, Reedy Creek Nature Center in Charlotte, North Carolina, Aspen Center for Environmental Studies in Aspen, Colorado, and your backyard!</p><br><p class=content__lineitem>LEARN about nature in your community</p><p class=content__lineitem>SHARE your observations and ideas</p><p class=content__lineitem>SHAPE nature projects in your local community</p><p class=content__lineitem>DESIGN this nature technology with your community</p><br><p>This project is supported by the National Science Foundation under Grant No. IIS-1221513 and Grant No. 1423212 to the University of North Carolina at Charlotte, Grant No. 1423207 to the University of Maryland, and Grant No. 1423338 to the University of Colorado.</p></div></div></div><div class="content content--why"><div class=content__image></div><div class=content__text><h1 class=content__title>Why join NatureNet?</h1><p class=content__description>Do you want to participate in a biodiversity-preserving project in your area? Or do you have an idea for a new project and want to get a community behind you? Join NatureNet today, and donâ€™t just be a voice in the crowd: be part of a crowd with a voice!</p></div></div><div ng-controller="HeaderController as vm"><center><div ng-hide=vm.isAuthenticated><a class="button button--joinnow" href=# ng-click=vm.showRegister()>Join NatureNet Today</a></div></center></div></div><div class=home-items><ul class="items items--observations"><li class=items__group>Recent Observations</li><li class=item ng-repeat="o in vm.observations | orderBy: \'-updated_at\' | limitTo: vm.observationsDisplayLimit" ng-click=vm.showObservation(o)><nn-badge class="badge item__user" title={{$root.users[o.observer].display_name}} subtitle={{vm.formatDate(o.updated_at)}} avatar-url={{$root.users[o.observer].avatar}}></nn-badge><nn-social-totals class="item__totals totals -centerv" data=o></nn-social-totals></li><li class=items__action ng-if="vm.observations.length > vm.observationsDisplayLimit"><a href=# ng-click="vm.observationsDisplayLimit = vm.observationsDisplayLimit + 5">Show More</a></li></ul><ul class="items items--ideas"><li class=items__group>Recent Design Ideas</li><li class=item ng-repeat="i in vm.ideas | orderBy: \'-updated_at\' | limitTo: vm.ideasDisplayLimit"><nn-badge class="badge item__user" title={{$root.users[i.submitter].display_name}} subtitle={{vm.formatDate(i.updated_at)}} avatar-url={{$root.users[i.submitter].avatar}}></nn-badge><nn-social-totals class="item__totals totals -centerv" data=i show-dislikes=true></nn-social-totals></li><li class=items__action ng-if="vm.ideas.length > vm.ideasDisplayLimit"><a href=# ng-click="vm.ideasDisplayLimit = vm.ideasDisplayLimit + 5">Show More</a></li></ul></div><div class=home-footer><ul class=footer-items><li><a href=http://www.uncc.edu target=_blank>University of North Carolina Charlotte</a></li><li><a href=http://www.colorado.edu target=_blank>University of Colorado Boulder</a></li><li><a href=http://www.umd.edu target=_blank>University of Maryland College Park</a></li></ul></div>'),e.put("app/explore/explore.html",'<ng-map nn-map-contain class=map default-style=false center="United States of America" ng-class="{\'has-sidebar\': !!vm.hasSidebar}"><div class="sidebar sidebar--map-list"><header class=sidebar__header><div class="dropdown dropdown--explore" ng-class="{ \'dropdown--show-list\': !!vm.isObservationsListVisible }"><div class=dropdown__display ng-click="vm.isObservationsListVisible = !vm.isObservationsListVisible"><span>Observations</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=list-item ng-repeat="o in vm.observations | orderBy: \'-updated_at\'" ng-click=vm.showSidebar(o)><nn-image class=list-item__image image-url="{{o.data.image | img_preview}}"></nn-image><div class=list-item__detail><nn-comment class="comment list-item__comment" name={{$root.users[o.observer].display_name}} date={{vm.formatDate(o.updated_at)}} avatar-url={{$root.users[o.observer].avatar}} comment={{o.data.text}}></nn-comment><nn-social-totals class=totals data=o></nn-social-totals></div></div></div></div></header></div><div ng-if=!!vm.currentObservation class="sidebar sidebar--slide sidebar--map-detail"><header class=sidebar__header><nn-badge class="badge sidebar__user" title={{$root.users[vm.currentObservation.observer].display_name}} subtitle={{vm.formatDate(vm.currentObservation.updated_at)}} avatar-url={{$root.users[vm.currentObservation.observer].avatar}}></nn-badge><a class=sidebar__close href=# ng-click=vm.hideSidebar()></a></header><section class=sidebar__content><nn-badge class="sidebar__title badge" title={{vm.currentProject.name}} subtitle avatar-url={{vm.currentProject.icon_url}}></nn-badge><div ng-if=vm.currentObservation.data.image nn-image class=sidebar__image image-url="{{vm.currentObservation.data.image | img_sidebar}}"></div><p ng-if=vm.currentObservation.data.text class=sidebar__description>{{vm.currentObservation.data.text}}</p><nn-social-totals class=totals data=vm.currentObservation context=observations></nn-social-totals></section><section class=sidebar__comments><nn-comment class="comment list-item__comment" ng-repeat="c in vm.comments | orderBy: \'updated_at\'" name={{$root.users[c.commenter].display_name}} date={{vm.formatDate(c.updated_at)}} avatar-url={{$root.users[c.commenter].avatar}} comment={{c.comment}}></nn-comment><nn-comment-form class="badge comment list-item__comment" data=vm.currentObservation context=observations></nn-comment-form></section></div><custom-marker ng-repeat="o in vm.observations" position={{o.l}}><div class=map-marker ng-click=vm.showSidebar(o)></div></custom-marker></ng-map>'),e.put("app/ideas/ideas.html",'<div class="sidebar sidebar--ideas"><header class=sidebar__header><div class="dropdown dropdown--ideas" ng-class="{ \'dropdown--show-list\': !!vm.isIdeasListVisible }"><div class=dropdown__display ng-click="vm.isIdeasListVisible = !vm.isIdeasListVisible"><span>Design Ideas</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=list-item ng-repeat="i in vm.ideas | orderBy: \'-updated_at\' | limitTo: vm.ideasDisplayLimit" ng-click="vm.selectedIdea = i"><nn-image class=list-item__image image-url={{}}></nn-image><div class=list-item__detail><nn-comment class="comment list-item__comment" name={{$root.users[i.submitter].display_name}} date={{vm.formatDate(i.updated_at)}} avatar-url={{$root.users[i.submitter].avatar}} comment={{i.content}}></nn-comment><nn-social-totals class=totals data=i show-dislikes=true></nn-social-totals></div></div><div class=sidebar__see-more ng-if="vm.ideas.length > vm.ideasDisplayLimit"><a href=# ng-click="vm.ideasDisplayLimit = vm.ideasDisplayLimit + vm.sidebarDisplayLimit">Show More</a></div></div></div></header><header class=sidebar__header><div class="dropdown dropdown--challenges" ng-class="{ \'dropdown--show-list\': !!vm.isChallengesListVisible }"><div class=dropdown__display ng-click="vm.isChallengesListVisible = !vm.isChallengesListVisible"><span>Design Challenges</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=list-item ng-repeat="c in vm.challenges | orderBy: \'-updated_at\' | limitTo: vm.challengesDisplayLimit" ng-click="vm.selectedIdea = c"><nn-image class=list-item__image image-url={{}}></nn-image><div class=list-item__detail><nn-comment class="comment list-item__comment" name={{$root.users[c.submitter].display_name}} date={{vm.formatDate(c.updated_at)}} avatar-url={{$root.users[c.submitter].avatar}} comment={{c.content}}></nn-comment><nn-social-totals class=totals data=c show-dislikes=true></nn-social-totals></div></div><div class=sidebar__see-more ng-if="vm.challenges.length > vm.challengesDisplayLimit"><a href=# ng-click="vm.challengesDisplayLimit = vm.challengesDisplayLimit + vm.sidebarDisplayLimit">Show More</a></div></div></div></header></div><div class="main main--with-sidebar main--ideas"><section class="main__section masthead"><header class=masthead__header><div class=masthead__avatar style="background-size: cover; background-image: url(\'/images/design-ideas.png\')"></div><div class=masthead__title>Design Ideas</div></header><div class=masthead__text><p class=masthead__description>Crowdsourcing design is a way for anyone to contribute to the NatureNet experience. Designers change the world and the NatureNet project gives everyone a chance to be a designer. Your design ideas can be a new way of using NatureNet in your community, and new to use mobile technology for learning about sustainability or changes in the environment, or a new feature on the web site.</p><p class=masthead__directions>Join the discussion below with an idea or challenge of your own, comment on someone else\'s idea, or vote for your favorite idea.</p><form class="masthead__form clearfix" ng-submit=vm.addIdea()><label class=masthead__input><input type=radio ng-model=vm.group value=idea> Design Idea</label> <label class=masthead__input><input type=radio ng-model=vm.group value=challenge> Design Challenge</label><div><textarea class=masthead__textarea placeholder="{{ vm.group === \'idea\' ? \'Write a design idea...\' : \'Write a design challenge...\' }}" ng-model=vm.content>\r\n          </textarea><div class=add-me>Adding photos coming soon</div></div>Choose Idea Type:<select ng-options="item for item in vm.ideaTypes" ng-model=vm.type></select><input class="button button--masthead" value=submit type=submit></form></div><div ng-if=vm.selectedIdea><div class=list-item><div class=list-item__detail><nn-comment class="comment list-item__comment" name={{$root.users[vm.selectedIdea.submitter].display_name}} date={{vm.formatDate(vm.selectedIdea.updated_at)}} avatar-url={{$root.users[vm.selectedIdea.submitter].avatar}} comment={{vm.selectedIdea.content}}></nn-comment><nn-social-totals class=totals data=vm.selectedIdea context=ideas show-dislikes=true></nn-social-totals></div></div><section class=overlay__comments><nn-comment class="comment list-item__comment" ng-repeat="c in vm.comments | orderBy: \'updated_at\'" name={{$root.users[c.commenter].display_name}} date={{vm.formatDate(c.updated_at)}} avatar-url={{$root.users[c.commenter].avatar}} comment={{c.comment}}></nn-comment><nn-comment-form class="badge comment list-item__comment" data=vm.selectedIdea context=ideas></nn-comment-form></section></div></section></div>'),e.put("app/layout/header.html",'<a class=head-logo href="/" ng-click=vm.toggleMap(false)></a><div class=head-menu><div class=head-menu__list><a class="head-menu__item item-explore" ng-click=vm.toggleMap() ng-class="{\'is-current\': !!vm.isMapActive}" href=#>Explore</a> <a class=head-menu__item ng-repeat="r in vm.navRoutes" ng-class=vm.getClasses(r) ng-bind-html=r.settings.content ng-click=vm.toggleMap(false) ui-sref={{r.name}}></a></div><div class=head-menu__foot style="display: none"></div></div><div class=head-user><div ng-hide=vm.isAuthenticated><a class="button head-user__item button--join" href=# ng-click=vm.showRegister()>Join</a> <a class="button head-user__item button--signin" href=# ng-click=vm.showSignin()>Sign In</a></div><div ng-show=vm.isAuthenticated><nn-badge class="badge head-user__item badge--header" ng-click=vm.signOut() avatar-url={{$root.users[vm.userUid].avatar}} title="Welcome, {{$root.users[vm.userUid].display_name}}" subtitle="Click to Sign Out"></nn-badge><a class="button head-user__item button--signout" href=# ng-click=vm.signOut()>Sign Out</a></div></div>'),e.put("app/layout/shell.html",'<div class=page-logo><a href=#><i class=icon></i></a></div><header class=page-head ng-include="\'app/layout/header.html\'" ng-controller="HeaderController as vm"></header><main class=page-main ui-view></main><footer class=page-foot></footer><div class=page-map ng-include="\'app/explore/explore.html\'" ng-controller="ExploreController as vm" ng-class="{\'has-map\': !!hasMap}"></div><div class="page-over overlay" ng-hide=!vm.isAuth ng-click=vm.broadcastHideAuth()><div ng-include="\'app/auth/auth.html\'" ng-controller="AuthController as vm"></div></div>'),e.put("app/projects/projects.html",'<div class="sidebar sidebar--projects"><header class="sidebar__header sidebar__header--projects"><div class="dropdown dropdown--projects" ng-class="{ \'dropdown--show-list\': !!vm.isProjectsListVisible }"><div class=dropdown__display ng-click="vm.isProjectsListVisible = !vm.isProjectsListVisible"><span>Projects</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=dropdown__option ng-repeat="p in vm.projects | orderBy: \'-latest_contribution\'" ng-click=vm.updateProjectId(p.id)><nn-badge class=badge title={{p.name}} subtitle avatar-url={{p.icon_url}}></nn-badge></div></div></div></header></div><div class="main main--with-sidebar main--projects"><section class="main__section masthead"><header class=masthead__header><div class=masthead__avatar style="background-image: url(\'{{$root.projects[vm.projectId].icon_url}\')"></div><div class=masthead__title>{{$root.projects[vm.projectId].name}}</div></header><div class=masthead__text>{{$root.projects[vm.projectId].description}}</div></section><section class="main__section recent-contributions"><div class=main__subtitle>Recent Contributions</div><nn-observations-list observations=vm.projectObservations limit={{vm.displayLimit}}></nn-observations-list></section></div>'),e.put("app/widgets/nn-badge.html","<div class=badge__avatar style=\"background-image: url('{{avatarUrl || '/images/default-avatar.png' }}')\"></div><div class=badge__text><p class=badge__title>{{title}}</p><p ng-if=!!subtitle class=badge__subtitle>{{subtitle}}</p></div>"),e.put("app/widgets/nn-comment-form.html",'<form class="badge comment" ng-submit=doComment()><div class=badge__avatar ng-if=showDefault style="background-image: url(\'/images/default-avatar.png\')"></div><div class=badge__avatar ng-if=!showDefault style="background-image: url(\'{{avatarUrl | img_thumb}}\')"></div><input type=text class=comment__input placeholder="Write a comment..." ng-model=comment> <input type=submit style="visibility: hidden;"></form>'),e.put("app/widgets/nn-comment.html",'<nn-badge class="badge comment__user" title={{name}} subtitle={{formatDate(date)}} avatar-url={{avatarUrl}}></nn-badge><div class=comment__text>{{comment}}</div>'),e.put("app/widgets/nn-dropdown.html",'<div class=dropdown ng-class="{ \'dropdown--show-list\': !!listVisible }"><div class=dropdown__display ng-click=toggleOptions()><span ng-if=!isPlaceholder>{{display}}</span> <span class=placeholder ng-if=isPlaceholder>{{placeholder}}</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=dropdown__option ng-repeat="o in options" ng-class=isCurrent(o) ng-click=selectOption(o)><span>{{property !== undefined ? o[property] : o}}</span></div></div></div>'),e.put("app/widgets/nn-image.html","<div ng-if=showDefault style=\"background-image: url('/images/default-image.png')\"></div><div ng-if=!showDefault style=\"background-image: url('{{imageUrl}}')\"></div>"),e.put("app/widgets/nn-observations-list.html",'<div class=main__observations><div class="list-item list-item--square" ng-if="observations.length > 0" ng-repeat="o in observations | orderBy: \'-updated_at\' | limitTo: limit" ng-click=showObservation(o)><nn-image class=list-item__image image-url="{{o.data.image | img_thumb}}"></nn-image><div class=list-item__detail><nn-badge class="badge item__user" title={{$root.users[o.observer].display_name}} subtitle={{formatDate(o.updated_at)}} avatar-url={{$root.users[o.observer].avatar}}></nn-badge></div></div><div ng-if="observations.length === 0">No contributions.</div></div><div class ng-if="observations.length > limit"><a href=# ng-click=incrementLimit()>Show More</a></div>'),e.put("app/widgets/nn-social-totals.html",'<div class="totals__total totals__total--likes" ng-class="{ totals__liked: liked }" ng-click=doLike()>{{likes}}</div><div class="totals__total totals__total--dislikes" ng-class="{ totals__disliked: disliked }" ng-if=showDislikes ng-click=doDislike()>{{dislikes}}</div><div class="totals__total totals__total--comments">{{comments}}</div>')}]);