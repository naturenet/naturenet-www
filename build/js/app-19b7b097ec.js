/**
 * naturenet - nature-net.org website
 * @authors 
 * @version v0.0.1
 * @link 
 * @license 
 */
!function(){"use strict";angular.module("app",["app.core","app.widgets","app.layout","app.auth","app.home","app.explore","app.communities","app.projects","app.ideas"])}(),function(){"use strict";angular.module("app.auth",["app.core","app.widgets"])}(),function(){"use strict";angular.module("blocks.exception",["blocks.logger"])}(),function(){"use strict";angular.module("blocks.logger",[])}(),function(){"use strict";angular.module("blocks.router",["ui.router","blocks.logger"])}(),function(){"use strict";angular.module("app.communities",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.core",["ngAnimate","ngSanitize","blocks.exception","blocks.logger","blocks.router","ui.router","firebase","ngMap","ngplus"])}(),function(){"use strict";angular.module("app.explore",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.home",["app.core","app.widgets","ngAnimate","ngSanitize","ui.bootstrap"])}(),function(){"use strict";angular.module("app.ideas",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.layout",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.projects",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.widgets",["app.core"])}(),function(){"use strict";function e(e,t,i,a,n){function s(){var t=[m(),p()];return e.all(t).then(function(){o(),a.info("Authentication Ready")})}function o(){return n.onAuthStateChanged(function(e){if(e)return D.userUid=e.uid,t.$broadcast("auth:success",D.userUid),D.userUid})}function r(){var e={display_name:D.name,name:D.realname,bio:D.bio,email:D.email,affiliation:D.affiliation.$id};return n.createUser(D.email,D.password).then(function(t){D.userUid=t.uid,e.uid=t.uid,c(D.email,D.password).then(function(){return u(e)})})}function l(){var e={avatar:D.avatar,display_name:D.name,name:D.realname,bio:D.bio,affiliation:D.affiliation.$id,groups:D.membership,uid:D.userUid,demographics:{age:D.age||null,gender:D.gender||null,race:D.race||null}};return n.updateUser(e).then(function(e){return a.success("Your profile has been updated!"),b(),D.userUid})}function c(e,i){return n.authWithPassword(e,i).then(function(e){return D.userUid=e.uid,t.$broadcast("auth:success",D.userUid),b(),a.success("You are now logged in!"),D.userUid})}function d(){return n.unAuth()}function u(e){return n.addUser(e).then(function(e){return a.success("Welcome to NatureNet!"),e})}function m(){return n.getArray("sites").then(function(e){D.sites=e})}function p(){return n.getArray("groups").then(function(e){D.groups=e})}function v(){var e=n.getAuth();e?n.getActiveUserDetails().then(function(e){var t=e[0],i=e[1];D.avatar=t.avatar||"",D.name=t.display_name,D.realname=i.name,D.affiliation=D.sites.$getRecord(t.affiliation),D.bio=t.bio||"",D.membership=t.groups||{};var a=i.demographics||{};D.age=a.age||"",D.gender=a.gender||"",D.race=a.race||{}}):a.warning("User is not logged in! Nothing to update.")}function g(){D.mode="update",v()}function h(){D.mode="register"}function f(){D.mode="signin"}function b(){t.$broadcast("auth:hide"),k()}function _(e,t){$()&&c(e,t)}function y(){$()&&("update"===D.mode?l():r())}function w(){return 0===D.email.length?(a.error("No email address was entered."),!1):n.resetPassword(D.email).then(function(e){a.success("Please check the provided email address for instructions.")})}function $(){return 0===D.email.length&&"update"!==D.mode?(a.error("No email address was entered."),!1):0===D.password.length&&"update"!==D.mode?(a.error("No password was entered."),!1):0===D.name.length&&"signin"!==D.mode?(a.error("No username was entered."),!1):0===D.realname.length&&"signin"!==D.mode?(a.error("No name was entered."),!1):0!==D.affiliation.length||"signin"===D.mode||(a.error("No affiliation was entered."),!1)}function k(){D.mode=null,D.avatar="",D.email="",D.password="",D.name="",D.realname="",D.bio="",D.affiliation="",D.membership={},D.age="",D.gender="",D.race={}}var D=this;D.userUid=void 0,D.newUserObject=void 0,D.avatar="",D.email="",D.password="",D.name="",D.realname="",D.bio="",D.affiliation="",D.membership={},D.ageOptions=["8-14","15-17","18-24","25-44","45-64","65+","Prefer not to disclose"],D.genderOptions=["Male","Female","Other","Prefer not to disclose"],D.raceOptions=["Black or African American","American Indian or Alaskan Native","Asian","Native Hawaiian or Other Pacific Islander","White","Some other race"],D.age="",D.gender="",D.race={},D.mode=null,D.login=_,D.apply=y,D.close=b,D.reset=w,s(),t.$on("account:edit",g),t.$on("register:show",h),t.$on("signin:show",f),t.$on("auth:hide",k),t.$on("signout",d)}angular.module("app.auth").controller("AuthController",e),e.$inject=["$q","$rootScope","$filter","logger","dataservice"]}(),function(){"use strict";function e(){this.config={appErrorPrefix:void 0},this.configure=function(e){this.config.appErrorPrefix=e},this.$get=function(){return{config:this.config}}}function t(e){e.decorator("$exceptionHandler",i)}function i(e,t,i){return function(a,n){var s=t.config.appErrorPrefix||"",o={exception:a,cause:n};a.message=s+a.message,e(a,n),i.error(a.message,o)}}angular.module("blocks.exception").provider("exceptionHandler",e).config(t),t.$inject=["$provide"],i.$inject=["$delegate","exceptionHandler","logger"]}(),function(){"use strict";function e(e,t){function i(i){return function(a){var n,s;return a.code&&a.message&&(n="\n"+a.message,s=i+n),a.message=s,console.log(a.message),t.error(i),e.reject(a)}}var a={catcher:i};return a}e.$inject=["$q","logger"],angular.module("blocks.exception").factory("exception",e)}(),function(){"use strict";function e(e,t){function i(i,a,n){t.error(i,n),e.error("Error: "+i,a)}function a(t,i,a){e.info("Info: "+t,i)}function n(i,a,n){t.success(i,n),e.info("Success: "+i,a)}function s(t,i,a){e.warn("Warning: "+t,i)}var o={showToasts:!0,error:i,info:a,success:n,warning:s,log:e.log};return o}angular.module("blocks.logger").factory("logger",e),e.$inject=["$log","toastr"]}(),function(){"use strict";function e(e,t,i){function a(e,a,s,o){function r(e,a){e.forEach(function(e){e.config.resolve=angular.extend(e.config.resolve||{},n.resolveAlways),t.state(e.state,e.config)}),a&&!p&&(p=!0,i.otherwise(a))}function l(){a.$on("$stateChangeError",function(t,i,a,n,s,r){if(!m){v.errors++,m=!0;var l=i&&(i.title||i.name||i.loadedTemplateUrl)||"unknown target",c="Error routing to "+l+". "+(r.data||"")+". <br/>"+(r.statusText||"")+": "+(r.status||"");o.warning(c,[i]),e.path("/")}})}function c(){l(),u()}function d(){return s.get()}function u(){a.$on("$stateChangeSuccess",function(e,t,i,s,o){v.changes++,m=!1;var r=(t.title||"")+" "+n.docTitle;a.title=r,a.$broadcast("map:hide")})}var m=!1,p=!1,v={errors:0,changes:0},g={configureStates:r,getStates:d,stateCounts:v};return c(),g}var n={docTitle:void 0,resolveAlways:{}};e.html5Mode(!0),this.configure=function(e){angular.extend(n,e)},this.$get=a,a.$inject=["$location","$rootScope","$state","logger"]}angular.module("blocks.router").provider("routerHelper",e),e.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e,t,i,a,n,s){function o(){n.showSplash();var t=[r(),l(),c(),d()];return e.all(t).then(function(){n.hideSplash(),a.info("Activated Communities View")})}function r(){var e=s.getAuth();return e&&e.uid?void f(e.uid):s.getUsersRecent(1).then(function(e){return f(e[0].id),w.userId})}function l(){return s.getArray("users").then(function(e){return w.users=e,w.users})}function c(){return s.getArray("groups").then(function(e){return w.groups=e,w.groups})}function d(){return s.getSites().then(function(e){return w.sites=e,w.sites})}function u(e){return s.getObservationsByUserId(e).then(function(t){return w.observations[e]=t,w.numberOfObservations=0,w.observations[e]})}function m(e){return s.getIdeasByUserId(e).then(function(t){return w.ideas[e]=t,w.numberOfIdeas=0,w.ideas[e]})}function p(e){return s.getGroupsByUserId(e).then(function(e){return w.userGroups=e,w.userGroups})}function v(e){t.users[e]&&t.users[e].avatar?w.userAvatar=t.users[e].avatar:w.userAvatar="images/default-avatar.png"}function g(e){return t.users[e].affiliation?s.getSiteById(t.users[e].affiliation).then(function(e){return w.userSite=e.name,w.userSite}):(w.userSite="",w.userSite)}function h(){var e=s.getAuth();w.isSelf=e&&e.uid===w.userId}function f(t){w.groupId=void 0;var i=[u(t),m(t),p(t),g(t)];return e.all(i).then(function(){w.userId=t,w.observationsDisplayLimit=w.displayLimit,w.ideasDisplayLimit=w.displayLimit,w.groupsDisplayLimit=w.displayLimit,v(t),h(),a.info("Updated Communities View based on new userId")})}function b(e){return w.userId=void 0,s.getGroupById(e).then(function(t){w.groupId=e,w.group=t,w.groupMembers=Object.keys(t.members||{});for(var i in t.members)u(i)})}function _(){t.$broadcast("account:edit")}function y(){w.query="",w.peopleDisplayLimit=w.peopleDisplayLimit+w.sidebarDisplayLimit}var w=this;w.title="Communities",w.sidebarDisplayLimit=5,w.mainDisplayLimit=6,w.userId=void 0,w.userSite="",w.userAvatar="",w.isSelf=!1,w.users=[],w.groups=[],w.sites=[],w.userObservations=[],w.userGroups=[],w.groupId=void 0,w.group={},w.observations={},w.ideas={},w.peopleDisplayLimit=w.sidebarDisplayLimit,w.groupsDisplayLimit=w.sidebarDisplayLimit,w.observationsDisplayLimit=w.mainDisplayLimit,w.ideasDisplayLimit=w.mainDisplayLimit,w.groupsDisplayLimit=w.mainDisplayLimit,w.isPeopleListVisible=!0,w.isGroupsListVisible=!0,w.updateUserId=f,w.updateGroupId=b,w.showUpdate=_,w.showMore=y,w.formatDate=n.formatDate,o()}angular.module("app.communities").controller("CommunitiesController",e),e.$inject=["$q","$rootScope","$filter","logger","utility","dataservice"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"communities",config:{url:"/communities",templateUrl:"app/communities/communities.html",controller:"CommunitiesController",controllerAs:"vm",title:"Communities",settings:{nav:2,content:"Communities"}}}]}angular.module("app.communities").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e){e.options.timeOut=8e3,e.options.positionClass="toast-bottom-right"}function t(e,t,i){e.debugEnabled&&e.debugEnabled(!0),i.configure(a.appErrorPrefix),t.configure({docTitle:" | "+a.appTitle})}var i=angular.module("app.core");i.config(e),e.$inject=["toastr"];var a={appErrorPrefix:"[NN Error] ",appTitle:"NatureNet",mapOptions:{zoom:5,minZoom:3,zoomControl:!0,scaleControl:!1,streetViewControl:!1,keyboardShortcuts:!1,clickableIcons:!1}};i.value("config",a),i.config(t),t.$inject=["$logProvider","routerHelperProvider","exceptionHandlerProvider"],i.constant("FirebaseName","naturenet"),i.config(["FirebaseName",function(e){firebase.initializeApp({apiKey:"AIzaSyAm--uHylcDf4J5wGroMzPeKmw6uIDnVr8",authDomain:e+".firebaseapp.com",databaseURL:"https://"+e+".firebaseio.com",storageBucket:e+".appspot.com"}),firebase.database.enableLogging(!1)}]),i.config(["FirebaseName","$firebaseRefProvider",function(e,t){t.registerUrl({"default":"https://"+e+".firebaseio.com",projects:"https://"+e+".firebaseio.com/activities",comments:"https://"+e+".firebaseio.com/comments",geo:"https://"+e+".firebaseio.com/geo",groups:"https://"+e+".firebaseio.com/groups",ideas:"https://"+e+".firebaseio.com/ideas",tags:"https://"+e+".firebaseio.com/tags",observations:"https://"+e+".firebaseio.com/observations",sites:"https://"+e+".firebaseio.com/sites",users:"https://"+e+".firebaseio.com/users",usersPrivate:"https://"+e+".firebaseio.com/users-private",usersRanks:"https://"+e+".firebaseio.com/users-ranks"})}])}(),function(){"use strict";angular.module("app.core").constant("toastr",toastr).constant("moment",moment)}(),function(){"use strict";function e(e){var i="/404";e.configureStates(t(),i)}function t(){return[{state:"404",config:{url:"/404",templateUrl:"app/core/404.html",title:"404"}}]}e.$inject=["routerHelper"],angular.module("app.core").run(e)}(),function(){"use strict";function e(e,t,i,a,n,s,o,r,l){function c(e){function t(e){return e}function i(t){return r.catcher("Unable to load data for "+e)(t)}var a=n["default"].child(e).orderByChild("updated_at").limitToLast(50),s=d(a);return s.$loaded().then(t)["catch"](i)}function d(e){return new o(e,function(e){return!(e.hasOwnProperty("status")&&"deleted"===e.status.toLowerCase())})}function u(e){return e.updated_at=firebase.database.ServerValue.TIMESTAMP,e.hasOwnProperty("created_at")||(e.created_at=firebase.database.ServerValue.TIMESTAMP),e}function m(t,i){function a(e){o.resolve("success")}function s(e){o.reject(r.catcher("Unable to delete this content.")(e))}var o=e.defer();return t&&i?(n["default"].child(t).child(i).child("status").set("deleted",function(e){e?s(e):a()}),o.promise):(console.log("Invalid data"),e.reject())}function p(e){return firebase.auth().onAuthStateChanged(e)}function v(){return firebase.auth().currentUser}function g(e,t){function i(e){return e}function n(e){switch(e.code){case"auth/invalid-email":return r.catcher("The email address is not valid.")(e);case"auth/user-disabled":return r.catcher("This account has been disabled.")(e);case"auth/user-not-found":return r.catcher("There is no user account for this email address.\nJoin NatureNet to get started.")(e);case"auth/wrong-password":return r.catcher('The email address or password is incorrect.\nIf you forgot your password, click "Reset my password."')(e);default:return r.catcher("Unable to sign in.")(e)}}var s=a(firebase.auth());return s.$signInWithEmailAndPassword(e,t).then(i)["catch"](n)}function h(){var e=a(firebase.auth());return e.$signOut()}function f(e,t){function i(e){return e}function n(e){switch(e.code){case"auth/invalid-email":return r.catcher("The email address is not valid.")(e);case"auth/email-already-in-use":return r.catcher("This email address is already in use.\nSign in to access your account.")(e);case"auth/weak-password":return r.catcher("Please choose a password that is at least 6 characters long.")(e);default:return r.catcher("Unable to join with email and password.")(e)}}var s=a(firebase.auth());return s.$createUserWithEmailAndPassword(e,t).then(i)["catch"](n)}function b(t){function i(e){s.resolve("success")}function a(e){s.reject(r.catcher("Unable to create user profile!")(e))}var s=e.defer(),o=t.uid,l={};return l["users-private/"+o]=u({id:o,name:t.name||""}),l["users/"+o]=u({id:o,avatar:t.avatar||"",display_name:t.display_name||"",affiliation:t.affiliation||"",bio:t.bio||""}),n["default"].update(l,function(e){e?a(e):i()}),s.promise}function _(t){function i(e){s.resolve("success")}function a(e){s.reject(r.catcher("Unable to update user profile!")(e))}var s=e.defer(),o=t.uid,l={};l["users-private/"+o+"/id"]=o,l["users-private/"+o+"/name"]=t.name||"",l["users-private/"+o+"/demographics"]=t.demographics||null,l["users-private/"+o+"/updated_at"]=firebase.database.ServerValue.TIMESTAMP,l["users/"+o+"/id"]=o,l["users/"+o+"/avatar"]=t.avatar||"",l["users/"+o+"/display_name"]=t.display_name||"",l["users/"+o+"/affiliation"]=t.affiliation||"",l["users/"+o+"/bio"]=t.bio||"",l["users/"+o+"/groups"]=t.groups||null,l["users/"+o+"/updated_at"]=firebase.database.ServerValue.TIMESTAMP;for(var c in t.groups)l["groups/"+c+"/members/"+o]=t.groups[c]||null;return n["default"].update(l,function(e){e?a(e):i()}),s.promise}function y(e){function t(e){return e}function i(e){switch(error.code){case"auth/invalid-email":return r.catcher("The email address is not valid.")(error);case"auth/user-not-found":return r.catcher("There is no user account for this email address.\nJoin NatureNet to get started.")(error);default:return r.catcher("Unable to reset password.")(error)}}var n=a(firebase.auth());return n.$sendPasswordResetEmail(e).then(t)["catch"](i)}function w(){function e(e){return e}function i(e){return r.catcher("Unable to load users")(e)}return t(n.users).$loaded().then(e)["catch"](i)}function $(e){function t(e){return e}function a(e){return r.catcher("Unable to load recent users")(e)}var s=n.users.orderByChild("latest_contribution").limitToLast(e),o=i(s);return o.$loaded().then(t)["catch"](a)}function k(){function i(e){return e}function a(e){return r.catcher("Unable to load your profile")(e)}var s=v();if(null===s||!s.uid)return console.log("User is not signed in."),e.when(null);var o=t(n.users.child(s.uid));return o.$loaded().then(i)["catch"](a)}function D(){function i(e){return e}function a(e){return r.catcher("Unable to load your account data")(e)}var s=v();if(null===s||!s.uid)return console.log("User is not signed in."),e.when(null);var o=t(n.users.child(s.uid)),l=t(n.usersPrivate.child(s.uid));return e.all([o.$loaded(),l.$loaded()]).then(i)["catch"](a)}function x(){function i(e){return e.$value}function a(e){return r.catcher("Unable to load your permissions. Some features may be unavailable.")(e)}var s=v();if(null===s||!s.uid)return console.log("User is not signed in."),e.when(null);var o=t(n.usersRanks.child(s.uid));return o.$loaded().then(i)["catch"](a)}function j(){function e(e){return e}function i(e){return r.catcher("Unable to load groups")(e)}return t(n.groups).$loaded().then(e)["catch"](i)}function I(i){function a(e){return e}function s(e){return r.catcher("Unable to load group")(e)}return i?t(n.groups.child(i)).$loaded().then(a)["catch"](s):(console.log("ID does not exist"),e.when(null))}function U(t){function a(e){return e}function s(e){return r.catcher("Unable to load groups for user")(e)}if(!t)return console.log("ID does not exist"),e.when(null);var o=n.groups.orderByChild("members/"+t).equalTo(!0),l=i(o);return l.$loaded().then(a)["catch"](s)}function S(){function e(e){return e}function i(e){return r.catcher("Unable to load sites")(e)}return t(n.sites).$loaded().then(e)["catch"](i)}function A(i){function a(e){return e}function s(e){return r.catcher("Unable to load site")(e)}return i?t(n.sites.child(i)).$loaded().then(a)["catch"](s):(console.log("ID does not exist"),e.when(null))}function P(t){function i(e){return e}function a(e){return r.catcher("Unable to load obsevations for user")(e)}if(!t)return console.log("ID does not exist"),e.when(null);var s=n.observations.orderByChild("observer").equalTo(t),o=d(s);return o.$loaded().then(i)["catch"](a)}function C(t){function i(e){return e}function a(e){return r.catcher("Unable to load observations for project")(e)}if(!t)return console.log("ID does not exist"),e.when(null);var s=n.observations.orderByChild("activity").equalTo(t),o=d(s);return o.$loaded().then(i)["catch"](a)}function L(t){function i(e){return e}function a(e){return r.catcher("Unable to load observations for site")(e)}if(!t)return console.log("ID does not exist"),e.when(null);var s=n.observations.orderByChild("site").equalTo(t),o=d(s);return o.$loaded().then(i)["catch"](a)}function O(t,i,a){function s(e){l.resolve("success")}function o(e){l.reject(r.catcher("Unable to update observation!")(e))}var l=e.defer(),c={};return t?(c["observations/"+t+"/activity"]=i,c["observations/"+t+"/data/text"]=a,c["observations/"+t+"/updated_at"]=firebase.database.ServerValue.TIMESTAMP,n["default"].update(c,function(e){e?o(e):s()}),l.promise):(console.log("Observation has no ID"),e.when(null))}function M(){function e(e){return e}function i(e){return r.catcher("Unable to load projects")(e)}return t(n.projects).$loaded().then(e)["catch"](i)}function N(i){function a(e){return e}function s(e){return r.catcher("Unable to load project")(e)}return i?t(n.projects.child(i)).$loaded().then(a)["catch"](s):(console.log("ID does not exist"),e.when(null))}function E(e){function t(e){return e}function a(e){return r.catcher("Unable to load recent projects")(e)}var s=n.projects.orderByChild("latest_contribution").limitToLast(e),o=i(s);return o.$loaded().then(t)["catch"](a)}function T(e){function t(e){return e}function a(e){return r.catcher("Unable to load projects for site")(e)}var s=n.projects.orderByChild("sites/"+e).equalTo(!0),o=i(s);return o.$loaded().then(t)["catch"](a)}function B(t,i,a){function s(e){return e}function o(e){return r.catcher("Unable to submit design idea")(e)}var l=v();if(null===l||!l.uid)return console.log("You must be signed in to do that!"),e.reject(null);var c=n.ideas.push().key,d=u({id:c,group:i,type:a,submitter:l.uid,content:t,status:"doing",source:"web"}),m={};return m["ideas/"+c]=d,m["users/"+l.uid+"/latest_contribution"]=firebase.database.ServerValue.TIMESTAMP,n["default"].update(m).then(s)["catch"](o)}function R(t){function i(e){return e}function a(e){return r.catcher("Unable to load ideas for user")(e)}if(!t)return console.log("ID does not exist"),e.when(null);var s=n.ideas.orderByChild("submitter").equalTo(t),o=d(s);return o.$loaded().then(i)["catch"](a)}function V(t,i,a,s){function o(e){c.resolve("success")}function l(e){c.reject(r.catcher("Unable to update idea!")(e))}var c=e.defer(),d={};return t?(d["ideas/"+t+"/content"]=i,d["ideas/"+t+"/group"]=a,d["ideas/"+t+"/type"]=s,d["ideas/"+t+"/updated_at"]=firebase.database.ServerValue.TIMESTAMP,n["default"].update(d,function(e){e?l(e):o()}),c.promise):(console.log("Idea has no ID"),e.when(null))}function G(){function e(e){return e}function t(e){return r.catcher("Unable to load tags")(e)}return i(n.tags).$loaded().then(e)["catch"](t)}function q(e,i,a){var s=v();if(null===s||!s.uid)return void console.log("You must be signed in to do that!");var o=s.uid;t(n["default"].child(e+"/"+i.$id+"/likes")).$loaded().then(function(e){e[o]===a?delete e[o]:e[o]=a,e.$save()})}function H(e,t,i){var a=v();if(null===a||!a.uid)return void console.log("You must be signed in to do that!");var s=n.comments.push().key,o=u({id:s,parent:t.$id,context:e,comment:i,commenter:a.uid,source:"web"}),r={};r["comments/"+s]=o,r[e+"/"+t.$id+"/comments/"+s]=!0,n["default"].update(r)}function W(e){function t(e){return e}function i(e){return r.catcher("Unable to load recent comments")(e)}var a=n.comments.orderByChild("updated_at").limitToLast(e),s=d(a);return s.$loaded().then(t)["catch"](i)}function F(t){function i(e){return e}function a(e){return r.catcher("Unable to load comments for user")(e)}if(!t)return console.log("ID does not exist"),e.when(null);var s=n.comments.orderByChild("commenter").equalTo(t),o=d(s);return o.$loaded().then(i)["catch"](a)}function Y(e){function t(e){return e}function i(e){return r.catcher("Unable to load comments for this contribution")(e)}var a=n.comments.orderByChild("parent").equalTo(e.$id||e.id),s=d(a);return s.$loaded().then(t)["catch"](i)}var z={getArray:c,deleteContent:m,onAuthStateChanged:p,getAuth:v,authWithPassword:g,unAuth:h,createUser:f,addUser:b,updateUser:_,resetPassword:y,getActiveUserDetails:D,getActiveUserRank:x,getUsers:w,getUsersRecent:$,getActiveUser:k,getGroups:j,getGroupById:I,getGroupsByUserId:U,getSites:S,getSiteById:A,getObservationsByUserId:P,getObservationsByProjectId:C,getObservationsBySiteId:L,updateObservation:O,getProjects:M,getProjectsRecent:E,getProjectById:N,getProjectsAtSite:T,getIdeasByUserId:R,addIdea:B,updateIdea:V,getTags:G,likeContent:q,addComment:H,getCommentsRecent:W,getCommentsForRecord:Y,getCommentsByUserId:F};return z}angular.module("app.core").factory("dataservice",e),e.$inject=["$q","$firebaseObject","$firebaseArray","$firebaseAuth","$firebaseRef","$filter","FilteredArray","exception","logger"]}(),function(){"use strict";function e(e,t){function i(e){var t=moment(+e).format("MMM DD YYYY").toString();return t}function a(){e.showSplash=!0,o+=1}function n(){o-=1,o<1&&(e.showSplash=!1)}var s={formatDate:i,showSplash:a,hideSplash:n},o=0;return s}function t(){return function(e){return!(e[i].hasOwnProperty("status")&&"deleted"===e[i].status.toLowerCase())}}angular.module("app.core").factory("utility",e).factory("FilteredArray",["$firebaseArray",function(e){function t(t,i){return this.filterFn=i,e.call(this,t)}return t.prototype.$$added=function(t){var i=e.prototype.$$added.call(this,t);if(!this.filterFn||this.filterFn(i))return i},e.$extend(t)}]).service("notDeleted",t).filter("emptyToEnd",function(){return function(e,t){if(angular.isArray(e)){var i=e.filter(function(e){return e[t]}),a=e.filter(function(e){return!e[t]});return i.concat(a)}}}).filter("deobfuscate",[function(){return function(e){return String(e).replace(" at ","@").replace(" dot ",".")}}]).filter("img_thumb",[function(){return function(e){return String(e).replace("upload/","upload/t_web-thumbnail/")}}]).filter("img_preview",[function(){return function(e){return String(e).replace("upload/","upload/t_web-preview/")}}]).filter("img_sidebar",[function(){return function(e){return String(e).replace("upload/","upload/t_web-sidebar/")}}]).filter("img_large",[function(){return function(e){return String(e).replace("upload/","upload/t_web-large/")}}]).filter("img_fullscreen",[function(){return function(e){return String(e).replace("upload/","upload/t_web-fullscreen")}}]),e.$inject=["$rootScope","$timeout"]}(),function(){"use strict";function e(e,t,i,a,n,s,o,r,l){function c(){o.showSplash();var t=[d()];return l.getMap().then(function(i){n.info("Google Maps Ready"),y.map=i,m(),e.all(t).then(function(){o.hideSplash(),n.info("Activated Map View")})})}function d(){return r.getArray("observations").then(function(e){return y.observations=e,y.observations})}function u(){f(y.currentObservation),p(y.currentObservation)}function m(){s.mapOptions.center=new google.maps.LatLng(39.833333,(-98.583333)),s.mapOptions.mapTypeId=google.maps.MapTypeId.HYBRID,y.map.setOptions(s.mapOptions),i.$broadcast("map:init"),t.$on("map:toggle",v),t.$on("map:show",g),t.$on("map:hide",h)}function p(e){if(e){var t=new google.maps.LatLng({lat:e.l[0],lng:e.l[1]}),i=y.map.getZoom();y.map.panTo(t),i<18&&y.map.setZoom(18)}}function v(){i.$parent.hasMap=!i.$parent.hasMap}function g(e,t){t&&(y.currentObservation=t),i.$parent.hasMap=!0}function h(){i.$parent.hasMap=!1}function f(e){y.currentObservation=e,y.hasSidebar=!0,y.showDetail=!1,y.currentProject=void 0,e&&r.getProjectById(e.activity).then(function(e){y.currentProject=e}),_(y.currentObservation)}function b(){y.hasSidebar=!1}function _(){if(y.comments=void 0,y.currentObservation)return r.getCommentsForRecord(y.currentObservation).then(function(e){return y.comments=e,y.comments})}var y=this;y.title="Explore",y.map=void 0,y.observations=void 0,y.currentObservation=void 0,y.currentProject=void 0,y.comments=void 0,i.$parent.hasMap=!1,y.hasSidebar=!1,y.isObservationsListVisible=!0,y.showDetail=!1,y.toggleMap=v,y.showSidebar=f,y.hideSidebar=b,y.formatDate=o.formatDate,c(),i.$watch("vm.currentObservation",u),i.$on("delete",function(e,t){t===y.currentObservation.id&&(y.currentObservation=void 0)}),i.$on("view",function(e,t){t&&(y.showDetail=!0)})}angular.module("app.explore").controller("ExploreController",e),e.$inject=["$q","$rootScope","$scope","$timeout","logger","config","utility","dataservice","NgMap"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"explore",config:{url:"/explore",templateUrl:"app/explore/explore.html",controller:"ExploreController",controllerAs:"vm",title:"Explore"}}]}angular.module("app.explore").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(){function e(e,t,i){function a(){s=e.map,google.maps.event.addListener(s,"bounds_changed",n)}function n(){function e(){return-85>o?i=l-(o+85):a>85&&(i=l-(a-85)),t=new google.maps.LatLng(i,c),void s.setCenter(t)}var t=void 0,i=void 0,a=s.getBounds().getNorthEast().lat(),n=s.getBounds().getNorthEast().lng(),o=s.getBounds().getSouthWest().lat(),r=s.getBounds().getSouthWest().lng(),l=s.getCenter().lat(),c=s.getCenter().lng(),d=-85>o&&a>85,u=o>-85&&85>a,m=d||u,p=n>0&&180>n&&c>0,v=0>r&&r>-180&&0>c,g=p||v;if(m&&g);else if(!m)return e()}var s=void 0;e.$on("map:init",a)}var t={link:e,restrict:"A"};return t}angular.module("app.explore").directive("nnMapContain",e),e.$inject=[]}(),function(){"use strict";function e(e,t,i,a,n,s){function o(){r(),n.showSplash();var t=[l(),c()];return e.all(t).then(function(){n.hideSplash(),a.info("Activated Home View")})}function r(){/iPad|iPhone|iPod|Android/.test(navigator.userAgent)&&!window.MSStream&&i.open({template:'<div class="modal-header"><h3 class="modal-title" id="modal-title">Download the NatureNet app!</h3></div><div class="modal-body mobile-overlay" id="modal-body"><p>NatureNet is available for iOS and Android.</p><p><a href="https://itunes.apple.com/us/app/naturenet/id1104382694?mt=8" style="display:inline-block;overflow:hidden;background:url(https://linkmaker.itunes.apple.com/images/badges/en-us/badge_appstore-lrg.svg) no-repeat;width:165px;height:40px;margin:10px 0 10px 28px;"></a></p><p><a href="https://play.google.com/store/apps/details?id=org.naturenet&utm_source=global_co&utm_medium=prtnr&utm_content=Mar2515&utm_campaign=PartBadge&pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1"><img alt="Get it on Google Play" src="images/google-play-badge.png" style="height:60px;"/></a></p></div>'})}function l(){return s.getArray("observations").then(function(e){return u.observations=e,u.observations})}function c(){return s.getArray("ideas").then(function(e){return u.ideas=e,u.ideas})}function d(e){t.$broadcast("map:show",e)}var u=this;u.title="Home",u.observations=[],u.ideas=[],u.contactEmail="naturenetapp at gmail dot com",u.observationsDisplayLimit=5,u.ideasDisplayLimit=5,u.showObservation=d,u.formatDate=n.formatDate,o()}angular.module("app.home").controller("HomeController",e),e.$inject=["$q","$rootScope","$uibModal","logger","utility","dataservice"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"home",config:{url:"/",templateUrl:"app/home/home-basic.html",controller:"HomeController",controllerAs:"vm",title:"Home",settings:{content:"Home"}}}]}angular.module("app.home").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,i,a,n,s){function o(){n.showSplash();var t=[l(),d()];return e.all(t).then(function(){n.hideSplash(),a.info("Activated Design Ideas View")})}function r(){if(v.comments=void 0,v.selectedIdea)return s.getCommentsForRecord(v.selectedIdea).then(function(e){return v.comments=e,v.comments})}function l(){return s.getArray("ideas").then(function(e){return v.ideas=e,v.ideas})}function c(e,t,i){return s.addIdea(e,t,i).then(function(e){l().then(function(){p(),a.success("Idea successfully submitted!")})})}function d(){return s.getTags().then(function(e){return angular.forEach(e,function(e){v.allTags.push(e.$id)}),v.allTags})}function u(){0!==v.content.length&&c(v.content,v.group,v.type)}function m(e){v.selectedIdea=e,v.showDetail=!0}function p(){v.content=""}var v=this;v.title="Design Ideas",v.sidebarDisplayLimit=3,v.uid=void 0,v.content="",v.group="idea",v.ideaTypes=["New Features","Project Ideas","Community Ideas","Improvement Ideas"],v.allTags=[],v.type=v.ideaTypes[0],v.ideas=[],v.currentIdeaId=void 0,v.comments=void 0,v.showDetail=!1,v.ideasDisplayLimit=v.sidebarDisplayLimit,v.challengesDisplayLimit=v.sidebarDisplayLimit,v.isIdeasListVisible=!0,v.isChallengesListVisible=!0,v.addIdea=u,v.formatDate=n.formatDate,v.selectIdea=m,o(),i.$watch("vm.selectedIdea",r),i.$on("delete",function(e,t){t===v.selectedIdea.id&&(v.selectedIdea=void 0)})}angular.module("app.ideas").controller("IdeasController",e),e.$inject=["$q","$rootScope","$scope","logger","utility","dataservice"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"ideas",config:{url:"/ideas",templateUrl:"app/ideas/ideas.html",controller:"IdeasController",controllerAs:"vm",title:"Design Ideas",settings:{nav:4,content:"Design Ideas"}}}]}angular.module("app.ideas").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,i,a,n){function s(){o(),c()}function o(){return n.onAuthStateChanged(r)}function r(t){e.$apply(function(){return t?(y.isAuthenticated=!0,y.userUid=t.uid,e.currentUser=t.uid,e.userRank=void 0,n.getActiveUserRank().then(function(t){e.userRank=t})):(y.isAuthenticated=!1,y.userUid=void 0,e.currentUser=void 0,e.userRank=void 0),y.userUid})}function l(){a.success("You are now logged out.")}function c(){y.navRoutes=w.filter(function(e){
return e.settings&&e.settings.nav}).sort(function(e,t){return e.settings.nav-t.settings.nav})}function d(e){return u(e)+" "+m(e)}function u(e){return"item-"+e.name}function m(e){if(!e.title||!t.current||!t.current.title)return"";var i=e.title;return t.current.title.substr(0,i.length)===i?"is-current":""}function p(t){y.showPopup=!1,"boolean"==typeof t&&t?(e.$broadcast("map:show"),y.isMapActive=t):"boolean"!=typeof t||t?"boolean"!=typeof t&&(e.$broadcast("map:toggle"),y.isMapActive=!y.isMapActive):(e.$broadcast("map:hide"),y.isMapActive=t)}function v(){e.$broadcast("register:show"),y.showPopup=!1}function g(){e.$broadcast("account:edit"),y.showPopup=!1}function h(){e.$broadcast("signin:show"),y.showPopup=!1}function f(){e.$broadcast("signout"),y.showPopup=!1,l()}function b(){y.showPopup=!1}function _(){y.isMapActive=!0,y.showPopup=!1}var y=this,w=i.getStates();y.userUid=void 0,y.isMapActive=!1,y.isAuthenticated=!1,y.showPopup=!1,y.getClasses=d,y.toggleMap=p,y.showRegister=v,y.showSignin=h,y.signOut=f,y.showEdit=g,s(),e.$on("auth:success",b),e.$on("map:show",_)}angular.module("app.layout").controller("HeaderController",e),e.$inject=["$rootScope","$state","routerHelper","logger","dataservice"]}(),function(){"use strict";function e(e,t,i,a,n,s){function o(){i.info(a.appTitle+" loaded!",null),n.showSplash();var t=[r(),l(),c()];return e.all(t).then(function(){n.hideSplash()})}function r(){return s.getUsers().then(function(e){return t.users=e,t.users})}function l(){return s.getGroups().then(function(e){return t.groups=e,t.groups})}function c(){return s.getProjects().then(function(e){return t.projects=e,t.projects})}function d(){t.$broadcast("auth:hide")}function u(){p.isAuth=!0}function m(){p.isAuth=!1}var p=this;p.isAuth=!1,p.hideAuth=m,p.broadcastHideAuth=d,o(),t.$on("account:edit",u),t.$on("register:show",u),t.$on("signin:show",u),t.$on("auth:hide",m)}angular.module("app.layout").controller("ShellController",e),e.$inject=["$q","$rootScope","logger","config","utility","dataservice"]}(),function(){"use strict";function e(e,t,i,a,n,s){function o(){n.showSplash();var e=[r(),l(),c()];return t.all(e).then(function(){var e=[d(m.projectId)];t.all(e).then(function(){n.hideSplash(),a.info("Activated Projects View")})})}function r(){return s.getProjectsRecent(1).then(function(e){return m.projectId=e[0].id,m.projectId})}function l(){return s.getArray("activities").then(function(e){return m.projects=i("orderBy")(e,"latest_contribution",!0),m.projects})}function c(){var i=s.getAuth();if(i&&e.users[i.uid]){var a=e.users[i.uid].affiliation;return s.getSiteById(a).then(function(e){m.localSite=e.name}),s.getProjectsAtSite(a).then(function(e){return m.localProjects=e,m.localProjects})}return m.localSite="",m.localProjects=void 0,t.when(null)}function d(e){return s.getObservationsByProjectId(e).then(function(e){return m.projectObservations=e,m.projectObservations})}function u(e){var i=[d(e)];return t.all(i).then(function(){m.projectId=e,a.info("Updated Projects View based on new projectId")})}var m=this;m.title="Projects",m.displayLimit=6,m.projectId=void 0,m.localSite=void 0,m.localProjects=void 0,m.projects=[],m.projectObservations=[],m.isProjectsListVisible=!0,m.updateProjectId=u,m.formatDate=n.formatDate,o()}angular.module("app.projects").controller("ProjectsController",e),e.$inject=["$rootScope","$q","$filter","logger","utility","dataservice"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"projects",config:{url:"/projects",templateUrl:"app/projects/projects.html",controller:"ProjectsController",controllerAs:"vm",title:"Projects",settings:{nav:3,content:"Projects"}}}]}angular.module("app.projects").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(){function e(e,t,i){}var t={scope:{avatarUrl:"@",title:"@",subtitle:"@"},link:e,templateUrl:"app/widgets/nn-badge.html",restrict:"EA"};return t}angular.module("app.widgets").directive("nnBadge",e)}(),function(){"use strict";function e(){function e(e,t,i){e.comment="",e.showDefault=!1,e.getUser()}function t(e,t){e.doComment=function(){t.addComment(e.context,e.data,e.comment),e.comment=""},e.getUser=function(){t.getActiveUser().then(function(t){return t&&(e.avatarUrl=t.avatar),t})}}var i={scope:{data:"=",context:"@",avatarUrl:"@",comment:"@"},link:e,templateUrl:"app/widgets/nn-comment-form.html",restrict:"EA",controller:["$scope","dataservice",t]};return i}angular.module("app.widgets").directive("nnCommentForm",e)}(),function(){"use strict";function e(e){function t(t,i,a){t.formatDate=e.formatDate,"[no description]"===t.comment?t.text="":t.text=t.comment}var i={scope:{avatarUrl:"@",name:"@",date:"@",comment:"@"},link:t,templateUrl:"app/widgets/nn-comment.html",restrict:"EA"};return i}angular.module("app.widgets").directive("nnComment",e),e.$inject=["utility"]}(),function(){"use strict";function e(e,t){function i(e,t,i){function a(){e.options.some(function(t){return t===e.selectedOption})&&(e.isPlaceholder=void 0===e.selectedOption[e.property],e.display=e.selectedOption[e.property])}function n(t){if(!e.isPlaceholder)return t[e.property]===e.selectedOption[e.property]?"is-current":""}function s(){e.listVisible=!e.listVisible}function o(t){e.isPlaceholder=!1,e.selectedOption=t,e.listVisible=!1,e.display=e.selectedOption[e.property]}e.listVisible=!1,e.isPlaceholder=!0,e.isCurrent=n,e.toggleOptions=s,e.selectOption=o,a()}var a={scope:{placeholder:"@",options:"=",selectedOption:"=",property:"@"},link:i,templateUrl:"app/widgets/nn-dropdown.html",restrict:"EA"};return a}angular.module("app.widgets").directive("nnDropdown",e),e.$inject=["$rootScope","logger"]}(),function(){"use strict";function e(e,t){function i(t,i,a){function n(){t.show=!1}t.formatDate=e.formatDate,t.hide=n,t.isEditMode=!1,t.groups=[{id:"idea",name:"Design Idea"},{id:"challenge",name:"Design Challenge"}],t.types=["New Features","Project Ideas","Community Ideas","Improvement Ideas"],t.edit=function(){t.isEditMode=!0,t.cache=angular.copy(t.idea)},t.cancel=function(){t.isEditMode=!1}}function a(e,i){e.saveChanges=function(){e.isEditMode=!1,console.log(e.cache),i.updateIdea(e.cache.id,e.cache.content,e.cache.group,e.cache.type).then(function(e){t.success("Your idea has been updated.")})},e["delete"]=function(){confirm("Are you sure you want to delete your idea?")&&i.deleteContent("ideas",e.idea.id).then(function(i){e.$emit("delete",e.idea.id),t.success("The idea has been deleted.")})}}var n={scope:{idea:"=",comments:"=",show:"=",editable:"="},link:i,templateUrl:"app/widgets/nn-idea-modal.html",restrict:"EA",controller:["$scope","dataservice",a]};return n}angular.module("app.widgets").directive("nnIdeaModal",e),e.$inject=["utility","logger"]}(),function(){"use strict";function e(e,t){function i(e,i,a){function n(e){}function s(){e.limit=parseInt(e.limit)+parseInt(r)}function o(){e.limit=parseInt(r)}e.$watch("ideas",o);var r=e.limit.slice(0);e.formatDate=t.formatDate,e.showIdea=n,e.incrementLimit=s}var a={scope:{ideas:"=",limit:"@",expandable:"@"},link:i,templateUrl:"app/widgets/nn-ideas-list.html",restrict:"EA"};return a}angular.module("app.widgets").directive("nnIdeasList",e),e.$inject=["$rootScope","utility"]}(),function(){"use strict";function e(){function e(e,t,i){e.showDefault=!1,e.imageUrl&&""!==e.imageUrl||(e.showDefault=!0)}var t={scope:{imageUrl:"@"},link:e,templateUrl:"app/widgets/nn-image.html",restrict:"EA"};return t}angular.module("app.widgets").directive("nnImage",e)}(),function(){"use strict";function e(e){function t(t,i,a){function n(){t.show=!1}t.formatDate=e.formatDate,t.hide=n}var i={scope:{observation:"=",comments:"=",show:"="},link:t,templateUrl:"app/widgets/nn-observation-modal.html",restrict:"EA"};return i}angular.module("app.widgets").directive("nnObservationModal",e),e.$inject=["utility"]}(),function(){"use strict";function e(e){function t(e,t,i){e.isEditMode=!1,e.getProjects(),e.edit=function(){e.isEditMode=!0,e.cache=angular.copy(e.observation)},e.cancel=function(){e.isEditMode=!1,e.observation=e.cache},e.view=function(){e.$emit("view",e.observation.id)}}function i(t,i){t.saveChanges=function(){t.isEditMode=!1,i.updateObservation(t.observation.id,t.observation.activity,t.observation.data.text).then(function(t){e.success("Your observation has been updated.")})},t["delete"]=function(){confirm("Are you sure you want to delete your observation?")&&i.deleteContent("observations",t.observation.id).then(function(i){t.$emit("delete",t.observation.id),e.success("The observation has been deleted.")})},t.getProjects=function(){i.getArray("activities").then(function(e){return t.allProjects=e,e})}}var a={scope:{observation:"=",editable:"="},link:t,templateUrl:"app/widgets/nn-observation.html",restrict:"EA",controller:["$scope","dataservice",i]};return a}angular.module("app.widgets").directive("nnObservation",e),e.$inject=["logger"]}(),function(){"use strict";function e(e,t){function i(i,a,n){function s(t){e.$broadcast("map:show",t)}function o(){i.limit=parseInt(i.limit)+parseInt(l)}function r(){i.limit=parseInt(l)}i.$watch("observations",r);var l=i.limit.slice(0);i.formatDate=t.formatDate,i.showObservation=s,i.incrementLimit=o}var a={scope:{observations:"=",limit:"@",expandable:"@"},link:i,templateUrl:"app/widgets/nn-observations-list.html",restrict:"EA"};return a}angular.module("app.widgets").directive("nnObservationsList",e),e.$inject=["$rootScope","utility"]}(),function(){"use strict";function e(){function e(e,t,i){function a(){e.likes=n("likes",!0),e.dislikes=n("likes",!1),e.comments=n("comments"),e.liked=!!e.data.likes&&e.data.likes[e.uid]===!0,e.disliked=!!e.data.likes&&e.data.likes[e.uid]===!1}function n(t,i){if(e.data[t]){var a=0,n=void 0;for(n in e.data[t])"undefined"!=typeof i&&e.data[t][n]!==i||a++;return a}return 0}e.$watchCollection("data.likes",a),e.$watchCollection("data.comments",a)}function t(e,t){var i=t.getAuth();e.uid=i?i.uid:null,e.doLike=function(){e.context&&t.likeContent(e.context,e.data,!0)},e.doDislike=function(){e.context&&t.likeContent(e.context,e.data,!1)}}var i={scope:{data:"=",showDislikes:"=",context:"@"},link:e,templateUrl:"app/widgets/nn-social-totals.html",restrict:"EA",controller:["$scope","dataservice",t]};return i}angular.module("app.widgets").directive("nnSocialTotals",e)}(),function(){"use strict";function e(){function e(e,t,i){}var t={scope:{status:"="},link:e,templateUrl:"app/widgets/nn-status.html",restrict:"EA"};return t}angular.module("app.widgets").directive("nnStatus",e)}(),angular.module("app.core").run(["$templateCache",function(e){e.put("app/auth/auth.html","<div class=\"auth -center\" ng-class=\"{ 'auth--wrap': vm.mode === 'signin', 'auth--tall': vm.mode === 'update' }\" ng-click=$event.stopPropagation()><div class=auth__header><div class=\"auth__avatar -centerh\"></div><div class=auth__close ng-click=vm.close()></div></div><div class=auth__wrapper><div ng-if=\"vm.mode === 'register'\" class=auth__content ng-include=\"'app/auth/register.html'\"></div><div ng-if=\"vm.mode === 'signin'\" class=auth__content ng-include=\"'app/auth/signin.html'\"></div><div ng-if=\"vm.mode === 'update'\" class=auth__content ng-include=\"'app/auth/edit.html'\"></div></div></div>"),e.put("app/auth/edit.html",'<form novalidate class="auth__form auth__form--register" ng-submit=vm.apply()><div class=auth__form><div class=add-me>Avatars coming soon</div><label>Username</label> <input class="auth__field field-public" required placeholder=Username type=text ng-model=vm.name> <label>Real Name (private)</label> <input class="auth__field field-private" required placeholder=Name type=text ng-model=vm.realname> <label>Bio</label> <input class="auth__field field-public" placeholder=Bio type=text ng-model=vm.bio> <label>Site Affiliation</label><select class="auth__field field-public" required placeholder="Site Affiliation" ng-model=vm.affiliation ng-options="s.name for s in vm.sites"><option disabled selected hidden value>Site Affiliation</option></select><div class=auth__form><label>Groups</label> <label ng-repeat="g in vm.groups"><input class="auth__field field-public" type=checkbox ng-model=vm.membership[g.id]> {{g.name}}</label></div></div><div class=auth__text style="text-align: center;">Optional. This data will be visible to researchers only.</div><div class=auth__form><div class=auth__form><p>What is your age range?</p><select class="auth__field field-private" required placeholder=Age ng-model=vm.age ng-options="a for a in vm.ageOptions"><option disabled selected hidden value>Age</option></select><p>What is your gender?</p><select class="auth__field field-private" required placeholder=Gender ng-model=vm.gender ng-options="g for g in vm.genderOptions"><option disabled selected hidden value>Gender</option></select></div><div class=auth__form><p>What is your primary racial identity?</p><label ng-repeat="r in vm.raceOptions"><input class="auth__field field-private" placeholder=Race type=checkbox ng-model=vm.race[r]> {{r}}</label></div></div><input class="button button--auth" value=apply type=submit></form>'),e.put("app/auth/register.html",'<form novalidate class="auth__form auth__form--register" ng-submit=vm.apply()><div class=auth__text>You are invited to participate in NatureNet, a research project being conducted by the researchers listed at <a href=http://research.nature-net.org/people.html target=_blank>http://research.nature-net.org/people.html</a>. Researchers are interested in seeing what kind of information is posted to NatureNet and how it is used and shared. Your name and email will not be visible to any other participants unless you so choose, and we will not provide it to any third party.</div><div class=auth__form><input class="auth__field field-private" required placeholder=email type=text ng-model=vm.email> <input class="auth__field field-private" required placeholder=password type=password ng-model=vm.password> <input class="auth__field field-private" required placeholder=Name type=text ng-model=vm.realname> <input class="auth__field field-public" required placeholder=Username type=text ng-model=vm.name><select class="auth__field field-public" required placeholder="Site Affiliation" type=text ng-model=vm.affiliation ng-options="s.name for s in vm.sites"><option disabled selected hidden value>Site Affiliation</option></select><input class="button button--auth" value=join type=submit></div></form>'),e.put("app/auth/signin.html",'<form class="auth__form auth__form--signin" ng-submit="vm.login(vm.email, vm.password)"><div class=auth__logo></div><input class=auth__field placeholder=email type=text ng-model=vm.email> <input class=auth__field placeholder=password type=password ng-model=vm.password><p class=auth__reset ng-click=vm.reset()>Reset my password</p><input class="button button--auth" value="sign in" type=submit></form>'),e.put("app/communities/communities.html",'<div class="sidebar sidebar--communities"><header class="sidebar__header sidebar__header--people"><div class="nn-dropdown nn-dropdown--people" ng-class="{ \'nn-dropdown--show-list\': !!vm.isPeopleListVisible }"><div class=nn-dropdown__display ng-click="vm.isPeopleListVisible = !vm.isPeopleListVisible"><span>People</span><div class=nn-dropdown__action></div></div><div class=nn-dropdown__options><div class=nn-dropdown__option><form><input class=nn-dropdown__input type=text placeholder=search ng-model=vm.query></form></div><div class=nn-dropdown__option ng-repeat="u in vm.users | filter:{ display_name:vm.query } | orderBy: \'-created_at\' | orderBy: \'-latest_contribution\' | emptyToEnd: \'latest_contribution\' | limitTo: vm.peopleDisplayLimit" ng-click=vm.updateUserId(u.id)><nn-badge class=nn-badge title={{u.display_name}} subtitle={{vm.sites[u.affiliation].name}} avatar-url={{u.avatar}}></nn-badge></div><div class=sidebar__see-more ng-if="vm.users.length > vm.peopleDisplayLimit"><a href=# ng-click=vm.showMore()>Show More</a></div></div></div></header><header class="sidebar__header sidebar__header--groups"><div class="nn-dropdown nn-dropdown--groups" ng-class="{ \'nn-dropdown--show-list\': !!vm.isGroupsListVisible }"><div class=nn-dropdown__display ng-click="vm.isGroupsListVisible = !vm.isGroupsListVisible"><span>Groups</span><div class=nn-dropdown__action></div></div><div class=nn-dropdown__options><div class=nn-dropdown__option ng-repeat="g in vm.groups | orderBy: \'-updated_at\' | limitTo: vm.groupsDisplayLimit" ng-click=vm.updateGroupId(g.id)><nn-badge class=nn-badge title={{g.name}} subtitle={{vm.sites[g.affiliation].name}} avatar-url={{g.avatar}}></nn-badge></div><div class=sidebar__see-more ng-if="vm.groups.length > vm.groupsDisplayLimit"><a href=# ng-click="vm.groupsDisplayLimit = vm.groupsDisplayLimit + vm.sidebarDisplayLimit">Show More</a></div></div></div></header></div><div class="main main--with-sidebar main--communities" ng-show=vm.userId ng-include="\'app/communities/user.html\'"></div><div class="main main--with-sidebar main--communities" ng-show=vm.groupId ng-include="\'app/communities/group.html\'"></div>'),e.put("app/communities/group.html",'<section class="main__section masthead"><header class=masthead__header><nn-badge class="nn-badge nn-badge--banner" title={{vm.group.name}} subtitle={{vm.userSite}} avatar-url={{vm.group.avatar}}></nn-badge></header><div class=masthead__text>{{vm.group.bio}}</div></section><section class="main__section recent-contributions"><div class=main__subtitle>Contributions by {{vm.group.name}}</div><div class=main__subtitle ng-repeat-start="uid in vm.groupMembers"><nn-badge class="nn-badge clickable" title={{$root.users[uid].display_name}} avatar-url={{$root.users[uid].avatar}} ng-click=vm.updateUserId(uid)></nn-badge></div><nn-observations-list ng-repeat-end observations=vm.observations[uid] limit=5></nn-observations-list></section>'),e.put("app/communities/user.html",'<section class="main__section masthead"><header class=masthead__header><nn-badge class="nn-badge nn-badge--banner" title={{$root.users[vm.userId].display_name}} subtitle={{vm.userSite}} avatar-url={{vm.userAvatar}}></nn-badge></header><div class=masthead__text>{{$root.users[vm.userId].bio}}</div></section><section class="main__section recent-contributions"><div class=main__subtitle>Recent Contributions by {{$root.users[vm.userId].display_name}}</div><nn-observations-list observations=vm.observations[vm.userId] limit={{vm.mainDisplayLimit}} expandable=true></nn-observations-list><nn-ideas-list ideas=vm.ideas[vm.userId] limit={{vm.mainDisplayLimit}} expandable=true></nn-ideas-list></section><section class="main__section main__section--groups"><div class=main__subtitle>Groups</div><div class=main__groups><nn-badge class="nn-badge nn-badge--large clickable" ng-if="vm.userGroups.length > 0" ng-repeat="g in vm.userGroups | orderBy: \'-updated_at\' | limitTo: vm.groupsDisplayLimit" title={{g.name}} avatar-url={{g.avatar}} ng-click=vm.updateGroupId(g.id)></nn-badge><div ng-if="vm.userGroups.length === 0">No groups.</div></div><div class ng-if="vm.userGroups.length > vm.groupsDisplayLimit"><a href=# ng-click="vm.groupsDisplayLimit = vm.groupsDisplayLimit + vm.mainDisplayLimit">Show More</a></div></section>'),e.put("app/core/404.html","<section class=fourzerofour></section>"),e.put("app/home/home-basic.html",'<div class=home-content><div class=home-intro><div class=home-boxes><div class=boxes--upper><div class=box--upper-left><div class=box__text style="text-align: right;"><a class="box__label inline-icon icon--large icon--learn" href=# ng-click=vm.showObservation()>Explore:</a> Learn about nature in your area</div><a href=# ng-click=vm.showObservation()><nn-image class=box__image image-url=https://res.cloudinary.com/university-of-colorado/image/upload/t_web-feature/v1471987089/static/learn.jpg></nn-image></a></div><div class=box--upper-right><a href=/communities><nn-image class=box__image image-url=https://res.cloudinary.com/university-of-colorado/image/upload/t_web-feature/v1480440120/static/share.jpg></nn-image></a><div class=box__text><a class="box__label inline-icon icon--large icon--share" href=/communities>Communities:</a> Share your observations and ideas</div></div></div><div class=boxes--lower><div class=box--lower-left><div class=box__text style="text-align: right;"><a class="box__label inline-icon icon--large icon--shape" href=/projects>Projects:</a> Improve and shape sustainability initatives</div><a href=/projects><nn-image class=box__image image-url=https://res.cloudinary.com/university-of-colorado/image/upload/t_web-feature/v1460772115/xkmtpemilwmse1gvxkgk.jpg></nn-image></a></div><div class=box--lower-right><a href=/ideas><nn-image class=box__image image-url=https://res.cloudinary.com/university-of-colorado/image/upload/t_web-feature/v1469724921/irhlvtis18ibmmr1vhzi.jpg></nn-image></a><div class=box__text><a class="box__label inline-icon icon--large icon--design" href=/ideas>Design:</a> New ways to use NatureNet</div></div></div></div></div><hr><div ng-controller="HeaderController as vm" ng-show=!vm.isAuthenticated style="width: 100%; text-align: center;"><a class="button button--joinnow" href=# ng-click=vm.showRegister()></a></div><div class="content content--featured" ng-hide=true><div class=content__text><div class=content__title>Featured on NatureNet</div><div class=featured>Observation</div><div class=featured>Community</div><div class=featured>Project</div><div class=featured>Design Idea</div></div></div><div class=content__footer><p style="text-align: center; margin-bottom: 1em;"><a href="https://itunes.apple.com/us/app/naturenet/id1104382694?mt=8" style="display:inline-block;overflow:hidden;background:url(https://linkmaker.itunes.apple.com/images/badges/en-us/badge_appstore-lrg.svg) no-repeat;width:165px;height:40px;margin:10px 0;"></a> <a href="https://play.google.com/store/apps/details?id=org.naturenet&utm_source=global_co&utm_medium=prtnr&utm_content=Mar2515&utm_campaign=PartBadge&pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1"><img alt="Get it on Google Play" src=images/google-play-badge.png style=height:60px;></a></p><p><a class="button button--inline" href="mailto:{{vm.contactEmail | deobfuscate}}">Contact Us</a> NatureNet is a platform for sharing place-based nature observations and contributing design ideas. Please do NOT contribute photos of humans or pets. NatureNet is a moderated site. Postings that are inappropriate or irrelevant will be deleted. If you want one of your observations to be removed, please send an email to <a href="mailto:{{vm.contactEmail | deobfuscate}}"><span>{{vm.contactEmail | deobfuscate}}</span></a> with a description of the content you would like to be removed.</p></div></div><div class=home-items><ul class="items items--observations"><li class=items__group>Recent Observations</li><li class=item ng-repeat="o in vm.observations | orderBy: \'-updated_at\' | limitTo: vm.observationsDisplayLimit" ng-click=vm.showObservation(o)><nn-badge class="nn-badge item__user" title={{$root.users[o.observer].display_name}} subtitle={{vm.formatDate(o.updated_at)}} avatar-url="{{o.data.image | img_thumb}}"></nn-badge><nn-social-totals class="item__totals totals -centerv" data=o></nn-social-totals></li><li class=items__action ng-if="vm.observations.length > vm.observationsDisplayLimit"><a href=# ng-click="vm.observationsDisplayLimit = vm.observationsDisplayLimit + 5">Show More</a></li></ul><ul class="items items--ideas"><li class=items__group>Recent Design Ideas</li><li class=item ng-repeat="i in vm.ideas | orderBy: \'-updated_at\' | limitTo: vm.ideasDisplayLimit"><nn-badge class="nn-badge item__user" title={{$root.users[i.submitter].display_name}} subtitle={{vm.formatDate(i.updated_at)}} avatar-url={{$root.users[i.submitter].avatar}}></nn-badge><nn-social-totals class="item__totals totals -centerv" data=i show-dislikes=true></nn-social-totals></li><li class=items__action ng-if="vm.ideas.length > vm.ideasDisplayLimit"><a href=# ng-click="vm.ideasDisplayLimit = vm.ideasDisplayLimit + 5">Show More</a></li></ul></div><div class=home-footer><ul class=footer-items><li><a href=http://www.uncc.edu target=_blank>The University of North Carolina at Charlotte</a></li><li><a href=http://www.colorado.edu target=_blank>University of Colorado Boulder</a></li><li><a href=http://www.umd.edu target=_blank>University of Maryland, College Park</a></li><li><a href=http://research.nature-net.org target=_blank>NatureNet Research</a></li></ul></div>'),e.put("app/home/home.html",'<div class=home-content><div class="content content--what"><div class=content__image></div><div class=content__text><h1 class=content__title>What is NatureNet?</h1><h2 class=content__subtitle>A community of citizen environmentalists whose members keep making it better.</h2><div class=content__description><p>NatureNet is a community of citizen environmentalists whose members keep making it better. Active sites include the Anacostia Watershed in Washington, D.C. and Maryland, Reedy Creek Nature Center in Charlotte, North Carolina, Aspen Center for Environmental Studies in Aspen, Colorado, and your backyard!</p><br><p class=content__lineitem>LEARN about nature in your community</p><p class=content__lineitem>SHARE your observations and ideas</p><p class=content__lineitem>SHAPE nature projects in your local community</p><p class=content__lineitem>DESIGN this nature technology with your community</p><br><p>This project is supported by the National Science Foundation under Grant No. IIS-1221513 and Grant No. 1423212 to the University of North Carolina at Charlotte, Grant No. 1423207 to the University of Maryland, and Grant No. 1423338 to the University of Colorado.</p></div></div></div><div class="content content--why"><div class=content__image></div><div class=content__text><h1 class=content__title>Why join NatureNet?</h1><p class=content__description>Do you want to participate in a biodiversity-preserving project in your area? Or do you have an idea for a new project and want to get a community behind you? Join NatureNet today, and dont just be a voice in the crowd: be part of a crowd with a voice!</p></div></div><div ng-controller="HeaderController as vm" ng-show=!vm.isAuthenticated><a class="button button--joinnow" href=# ng-click=vm.showRegister()></a></div><div class=content__gallery><nn-observations-list observations=vm.observations limit=5></nn-observations-list></div><div class=content__footer><p><a class="button button--inline" href="mailto:{{vm.contactEmail | deobfuscate}}">Contact Us</a> NatureNet is a platform for sharing place-based nature observations and contributing design ideas. Please do NOT contribute photos of humans or pets. NatureNet is a moderated site. Postings that are inappropriate or irrelevant will be deleted.</p><p>If you want one of your observations to be removed, please send an email to <a href="mailto:{{vm.contactEmail | deobfuscate}}"><span>{{vm.contactEmail | deobfuscate}}</span></a> with a description of the content you would like to be removed.</p></div></div><div class=home-items><ul class="items items--observations"><li class=items__group>Recent Observations</li><li class=item ng-repeat="o in vm.observations | orderBy: \'-updated_at\' | limitTo: vm.observationsDisplayLimit" ng-click=vm.showObservation(o)><nn-badge class="nn-badge item__user" title={{$root.users[o.observer].display_name}} subtitle={{vm.formatDate(o.updated_at)}} avatar-url={{$root.users[o.observer].avatar}}></nn-badge><nn-social-totals class="item__totals totals -centerv" data=o></nn-social-totals></li><li class=items__action ng-if="vm.observations.length > vm.observationsDisplayLimit"><a href=# ng-click="vm.observationsDisplayLimit = vm.observationsDisplayLimit + 5">Show More</a></li></ul><ul class="items items--ideas"><li class=items__group>Recent Design Ideas</li><li class=item ng-repeat="i in vm.ideas | orderBy: \'-updated_at\' | limitTo: vm.ideasDisplayLimit"><nn-badge class="nn-badge item__user" title={{$root.users[i.submitter].display_name}} subtitle={{vm.formatDate(i.updated_at)}} avatar-url={{$root.users[i.submitter].avatar}}></nn-badge><nn-social-totals class="item__totals totals -centerv" data=i show-dislikes=true></nn-social-totals></li><li class=items__action ng-if="vm.ideas.length > vm.ideasDisplayLimit"><a href=# ng-click="vm.ideasDisplayLimit = vm.ideasDisplayLimit + 5">Show More</a></li></ul></div><div class=home-footer><ul class=footer-items><li><a href=http://www.uncc.edu target=_blank>University of North Carolina Charlotte</a></li><li><a href=http://www.colorado.edu target=_blank>University of Colorado Boulder</a></li><li><a href=http://www.umd.edu target=_blank>University of Maryland College Park</a></li></ul></div>'),e.put("app/explore/explore.html",'<ng-map nn-map-contain class=map default-style=false center="United States of America" ng-class="{\'has-sidebar\': !!vm.hasSidebar}"><div class="main main--with-sidebar main--explore" ng-if="!!vm.currentObservation && vm.showDetail"><nn-observation-modal observation=vm.currentObservation comments=vm.comments show=vm.showDetail></nn-observation-modal></div><div class="sidebar sidebar--map-list"><header class=sidebar__header><div class="nn-dropdown nn-dropdown--explore" ng-class="{ \'nn-dropdown--show-list\': !!vm.isObservationsListVisible }"><div class=nn-dropdown__display ng-click="vm.isObservationsListVisible = !vm.isObservationsListVisible"><span>Observations</span><div class=nn-dropdown__action></div></div><div class=nn-dropdown__options><div class=list-item ng-repeat="o in vm.observations | orderBy: \'-updated_at\' | filter:{ status : \'!deleted\' }" ng-click=vm.showSidebar(o)><nn-image class=list-item__image image-url="{{o.data.image | img_preview}}"></nn-image><div class=list-item__detail><nn-comment class="nn-badge list-item__comment" name={{$root.users[o.observer].display_name}} date={{o.updated_at}} avatar-url={{$root.users[o.observer].avatar}} comment={{o.data.text}}></nn-comment><nn-social-totals class=totals data=o></nn-social-totals></div></div></div></div></header></div><div ng-if=!!vm.currentObservation class="sidebar sidebar--slide sidebar--map-detail"><header class=sidebar__header><nn-badge class="nn-badge sidebar__user" title={{$root.users[vm.currentObservation.observer].display_name}} subtitle={{vm.formatDate(vm.currentObservation.updated_at)}} avatar-url={{$root.users[vm.currentObservation.observer].avatar}}></nn-badge><a class=sidebar__close href=# ng-click=vm.hideSidebar()></a></header><nn-observation observation=vm.currentObservation editable="vm.currentObservation.observer === $root.currentUser || $root.userRank === \'admin\'"></nn-observation><section class=sidebar__comments><nn-comment class="comment list-item__comment" ng-repeat="c in vm.comments | orderBy: \'updated_at\'" name={{$root.users[c.commenter].display_name}} date={{c.updated_at}} avatar-url={{$root.users[c.commenter].avatar}} comment={{c.comment}}></nn-comment><nn-comment-form class="nn-badge comment list-item__comment" data=vm.currentObservation context=observations></nn-comment-form></section></div><custom-marker ng-repeat="o in vm.observations" position={{o.l}}><div class=map-marker ng-click=vm.showSidebar(o)></div></custom-marker></ng-map>'),e.put("app/layout/header.html",'<a class=head-logo href="/" ng-click=vm.toggleMap(false)></a><div class=head-menu><div class=head-menu__list><a class="head-menu__item item-explore" ng-click=vm.toggleMap() ng-class="{\'is-current\': !!vm.isMapActive}" href=#>Explore</a> <a class=head-menu__item ng-repeat="r in vm.navRoutes" ng-class=vm.getClasses(r) ng-bind-html=r.settings.content ng-click=vm.toggleMap(false) ui-sref={{r.name}}></a></div><div class=head-menu__foot style="display: none"></div></div><div class=head-user><div ng-hide=vm.isAuthenticated><a class="button head-user__item button--join" href=# ng-click=vm.showRegister()>Join</a> <a class="button head-user__item button--signin" href=# ng-click=vm.showSignin()>Sign In</a></div><div ng-show=vm.isAuthenticated><nn-badge class="nn-badge head-user__item nn-badge--header" avatar-url={{$root.users[vm.userUid].avatar}} title="Welcome, {{$root.users[vm.userUid].display_name}}" ng-click="vm.showPopup = !vm.showPopup"></nn-badge><div class=head-dropdown ng-show=vm.showPopup><div class=head-dropdown__contents><div class=head-dropdown__avatar ng-style="{ \'background-image\' : \'url(\' + $root.users[vm.userUid].avatar + \')\' }"></div><div class=head-dropdown__text>{{$root.users[vm.userUid].display_name}}</div><div class="head-dropdown__button button button--edit" ng-click=vm.showEdit()>Edit Profile</div><div class="head-dropdown__button button button--signout" ng-click=vm.signOut()>Sign Out</div></div></div></div></div>'),
e.put("app/layout/shell.html",'<div class=page-logo><a href=#><i class=icon></i></a></div><header class=page-head ng-include="\'app/layout/header.html\'" ng-controller="HeaderController as vm"></header><main class=page-main ui-view></main><footer class=page-foot></footer><div class=page-map ng-include="\'app/explore/explore.html\'" ng-controller="ExploreController as vm" ng-class="{\'has-map\': !!hasMap}"></div><div class="page-over overlay" ng-hide=!vm.isAuth ng-click=vm.broadcastHideAuth()><div ng-include="\'app/auth/auth.html\'" ng-controller="AuthController as vm"></div></div>'),e.put("app/ideas/ideas.html",'<div class="sidebar sidebar--ideas"><header class=sidebar__header><div class="nn-dropdown nn-dropdown--ideas" ng-class="{ \'nn-dropdown--show-list\': vm.group === \'idea\' }"><div class=nn-dropdown__display ng-click="vm.group = \'idea\'"><span>Design Ideas</span><div class=nn-dropdown__action></div></div><div class=nn-dropdown__options><div class=list-item ng-repeat="i in vm.ideas | filter:{ group : \'!challenge\', status : \'!deleted\' } | orderBy: \'-updated_at\' | limitTo: vm.ideasDisplayLimit" ng-click=vm.selectIdea(i)><div class="list-item__detail list-item__noimage"><nn-comment class="comment list-item__comment" name={{$root.users[i.submitter].display_name}} date={{i.updated_at}} avatar-url={{$root.users[i.submitter].avatar}} comment={{i.content}}></nn-comment><nn-social-totals class=totals data=i show-dislikes=true></nn-social-totals></div></div><div class=sidebar__see-more ng-if="vm.ideas.length > vm.ideasDisplayLimit"><a href=# ng-click="vm.ideasDisplayLimit = vm.ideasDisplayLimit + vm.sidebarDisplayLimit">Show More</a></div></div></div></header><header class=sidebar__header><div class="nn-dropdown nn-dropdown--challenges" ng-class="{ \'nn-dropdown--show-list\': vm.group === \'challenge\' }"><div class=nn-dropdown__display ng-click="vm.group = \'challenge\'"><span>Design Challenges</span><div class=nn-dropdown__action></div></div><div class=nn-dropdown__options><div class=list-item ng-repeat="c in vm.ideas | filter:{ group : \'challenge\', status : \'!deleted\' } | orderBy: \'-updated_at\' | limitTo: vm.challengesDisplayLimit" ng-click=vm.selectIdea(c)><div class="list-item__detail list-item__noimage"><nn-comment class="comment list-item__comment" name={{$root.users[c.submitter].display_name}} date={{c.updated_at}} avatar-url={{$root.users[c.submitter].avatar}} comment={{c.content}}></nn-comment><nn-social-totals class=totals data=c show-dislikes=true></nn-social-totals></div></div><div class=sidebar__see-more ng-if="vm.challenges.length > vm.challengesDisplayLimit"><a href=# ng-click="vm.challengesDisplayLimit = vm.challengesDisplayLimit + vm.sidebarDisplayLimit">Show More</a></div></div></div></header></div><div class="main main--with-sidebar main--ideas"><section class="main__section masthead"><header class=masthead__header><div class=masthead__avatar style="background-size: cover; background-image: url(\'/images/design-ideas.png\')"></div><div class=masthead__title ng-if="vm.group === \'idea\'">Design Ideas</div><div class=masthead__title ng-if="vm.group === \'challenge\'">Design Challenges</div></header><div class=masthead__text><p class=masthead__description>Crowdsourcing design is a way for anyone to contribute to the NatureNet experience. Designers change the world and the NatureNet project gives everyone a chance to be a designer. Your design idea can be a new way of using NatureNet in your community, a new way to use mobile technology for learning about sustainability or changes in the environment, or a new feature on the web site.</p><p class=masthead__directions ng-if="vm.group === \'idea\'">Join the discussion below with an idea or challenge of your own, comment on someone else\'s idea, or vote for your favorite idea.</p><p class=masthead__directions ng-if="vm.group === \'challenge\'">Do you have a design challenge for the NatureNet communities? A design challenge is a question  for example: How can NatureNet be more useful for people with their own cameras?</p><p class=masthead__subtext>NatureNet is a moderated site. Postings that are inappropriate or irrelevant will be deleted.</p><form class="masthead__form clearfix" ng-submit=vm.addIdea()><label class=masthead__input><input type=radio ng-model=vm.group value=idea> Design Idea</label> <label class=masthead__input><input type=radio ng-model=vm.group value=challenge> Design Challenge</label><div><textarea class=masthead__textarea placeholder="{{ vm.group === \'idea\' ? \'Write a design idea...\' : \'Write a design challenge...\' }}" ng-model=vm.content>\r\n          </textarea></div>Choose Idea Type:<select ng-options="item for item in vm.ideaTypes" ng-model=vm.type></select><input class="button button--masthead" value=submit type=submit></form></div><div ng-if="vm.selectedIdea && vm.showDetail"><nn-idea-modal editable="vm.selectedIdea.submitter === $root.currentUser || $root.userRank === \'admin\'" idea=vm.selectedIdea comments=vm.comments show=vm.showDetail></nn-idea-modal></div></section></div>'),e.put("app/projects/projects.html",'<div class="sidebar sidebar--projects"><header class="sidebar__header sidebar__header--projects"><div class="nn-dropdown nn-dropdown--projects" ng-class="{ \'nn-dropdown--show-list\': !!vm.isProjectsListVisible }"><div class=nn-dropdown__display ng-click="vm.isProjectsListVisible = !vm.isProjectsListVisible"><span>Projects</span><div class=nn-dropdown__action></div></div><div class=nn-dropdown__options><div class=sidebar__sub-header ng-if=!!vm.localSite>Projects at {{vm.localSite}}</div><div class=nn-dropdown__option ng-if=!!vm.localProjects ng-repeat="p in vm.localProjects | orderBy: \'-latest_contribution\'" ng-click=vm.updateProjectId(p.id)><nn-badge class=nn-badge title={{p.name}} subtitle avatar-url={{p.icon_url}}></nn-badge></div><div class=sidebar__sub-header>All Projects</div><div class=nn-dropdown__option ng-repeat="p in vm.projects | orderBy: \'-latest_contribution\'" ng-click=vm.updateProjectId(p.id)><nn-badge class=nn-badge title={{p.name}} subtitle avatar-url={{p.icon_url}}></nn-badge></div></div></div></header></div><div class="main main--with-sidebar main--projects"><section class="main__section masthead"><header class=masthead__header><div class=masthead__avatar style="background-image: url(\'{{$root.projects[vm.projectId].icon_url}}\')"></div><div class=masthead__title>{{$root.projects[vm.projectId].name}}</div></header><div class=masthead__text>{{$root.projects[vm.projectId].description}}</div></section><section class="main__section recent-contributions"><div class=main__subtitle>Recent Contributions</div><nn-observations-list observations=vm.projectObservations limit={{vm.displayLimit}} expandable=true></nn-observations-list></section></div>'),e.put("app/widgets/nn-badge.html","<div class=nn-badge__avatar style=\"background-image: url('{{avatarUrl || '/images/default-avatar.png' }}')\"></div><div class=nn-badge__text><p class=nn-badge__title>{{title}}</p><p ng-if=!!subtitle class=nn-badge__subtitle>{{subtitle}}</p></div>"),e.put("app/widgets/nn-comment-form.html",'<form class="nn-badge comment" ng-submit=doComment()><div class=nn-badge__avatar style="background-image: url(\'{{(avatarUrl || \'/images/default-avatar.png\') | img_thumb }}\')"></div><input type=text class=comment__input placeholder="Write a comment..." ng-model=comment> <input type=submit style="visibility: hidden;"></form>'),e.put("app/widgets/nn-comment.html","<nn-badge class=\"nn-badge comment__user\" title={{name}} subtitle={{formatDate(date)}} avatar-url={{avatarUrl}}></nn-badge><div class=comment__text title={{comment}}>{{comment | limitTo: 130}}{{comment.length > 130 ? '...' : ''}}</div>"),e.put("app/widgets/nn-dropdown.html",'<div class=nn-dropdown ng-class="{ \'nn-dropdown--show-list\': !!listVisible }"><div class=nn-dropdown__display ng-click=toggleOptions()><span ng-if=!isPlaceholder>{{display}}</span> <span class=placeholder ng-if=isPlaceholder>{{placeholder}}</span><div class=nn-dropdown__action></div></div><div class=nn-dropdown__options><div class=nn-dropdown__option ng-repeat="o in options" ng-class=isCurrent(o) ng-click=selectOption(o)><span>{{property !== undefined ? o[property] : o}}</span></div></div></div>'),e.put("app/widgets/nn-idea-modal.html",'<div class=overlay-partial><div class="nn-modal -center" ng-click=$event.stopPropagation()><header class=nn-modal__header><nn-badge class="nn-badge detail__user" title={{$root.users[idea.submitter].display_name}} subtitle={{formatDate(idea.updated_at)}} avatar-url={{avatarUrl}}></nn-badge><a class=nn-modal__close href=# ng-click=hide()></a></header><div class=detail><nn-status class=detail__status status=idea.status></nn-status><div ng-if=!isEditMode class=detail__header ng-switch=idea.group><div ng-switch-when=challenge>Design Challenge</div><div ng-switch-default>Design Idea</div></div><select ng-if=isEditMode ng-model=cache.group ng-options="g.id as g.name for g in groups"></select><div ng-if=!isEditMode class=detail__header>{{idea.type}}</div><select ng-if=isEditMode ng-model=cache.type ng-options="t for t in types"></select><div ng-if=!isEditMode class=detail__description>{{idea.content}}</div><textarea ng-if=isEditMode class=detail__description ng-model=cache.content></textarea> <img class=detail__image src="{{idea.icon_url | img_large }}" ng-if=idea.icon_url><nn-social-totals class="totals detail__totals" data=idea context=ideas show-dislikes=true></nn-social-totals><div ng-if=!isEditMode style="margin-left:2em; display:inline;"><input ng-if=editable class=button ng-click=edit() value=edit type=submit> <input ng-if=editable class="button button--delete" ng-click=delete() value=delete type=submit></div><div ng-if=isEditMode style=display:inline;><input class="button button--cancel" ng-click=cancel() value=cancel type=submit> <input class="button button--save" ng-click=saveChanges() value=save type=submit></div><section class=detail__comments><nn-comment class="comment detail__comment" ng-repeat="c in comments | orderBy: \'updated_at\'" name={{$root.users[c.commenter].display_name}} date={{c.updated_at}} avatar-url={{$root.users[c.commenter].avatar}} comment={{c.comment}}></nn-comment><nn-comment-form class="nn-badge comment list-item__comment" data=idea context=ideas></nn-comment-form></section></div></div></div>'),e.put("app/widgets/nn-ideas-list.html",'<div class=main__ideas><div class="list-item list-item--square" ng-if="ideas.length > 0" ng-repeat="i in ideas | filter:{ status:\'!deleted\' } | orderBy: \'-updated_at\' | limitTo: limit" ng-click=showIdea(i)><div class="list-item__detail list-item__noimage"><nn-comment class="comment list-item__comment" name={{$root.users[i.submitter].display_name}} date={{i.updated_at}} avatar-url={{$root.users[i.submitter].avatar}} comment={{i.content}}></nn-comment></div></div><div ng-if="ideas.length === 0">No Design Ideas.</div></div><div class ng-if="expandable && (ideas.length > limit)"><a href=# ng-click=incrementLimit()>Show More</a></div>'),e.put("app/widgets/nn-image.html","<div ng-if=showDefault style=\"background-image: url('/images/default-image.png')\"></div><div ng-if=!showDefault style=\"background-image: url('{{imageUrl}}')\"></div>"),e.put("app/widgets/nn-observation-modal.html",'<div class=overlay-partial><div class="nn-modal -center" ng-click=$event.stopPropagation()><header class=nn-modal__header><nn-badge class="nn-badge detail__user" title={{$root.users[observation.observer].display_name}} subtitle={{formatDate(observation.updated_at)}} avatar-url={{avatarUrl}}></nn-badge><a class=nn-modal__close href=# ng-click=hide()></a></header><div class=detail><div class=detail__description ng-if=observation.data.text>{{observation.data.text}}</div><img class=detail__image src="{{observation.data.image | img_large }}" ng-if=observation.data.image><nn-social-totals class="totals detail__totals" data=observation context=observations show-dislikes=false></nn-social-totals><section class=detail__comments><nn-comment class="comment detail__comment" ng-repeat="c in comments | orderBy: \'updated_at\'" name={{$root.users[c.commenter].display_name}} date={{c.updated_at}} avatar-url={{$root.users[c.commenter].avatar}} comment={{c.comment}}></nn-comment><nn-comment-form class="nn-badge comment list-item__comment" data=observation context=observations></nn-comment-form></section></div></div></div>'),e.put("app/widgets/nn-observation.html",'<section class=sidebar__content><nn-badge ng-if=!isEditMode class="sidebar__title nn-badge" title={{allProjects.$getRecord(observation.activity).name}} subtitle avatar-url={{allProjects.$getRecord(observation.activity).icon_url}}></nn-badge><select ng-if=isEditMode ng-model=observation.activity ng-options="a.id as a.name for a in allProjects"></select><div ng-if=observation.data.image nn-image class=sidebar__image image-url="{{observation.data.image | img_sidebar}}" ng-click=view()></div><p ng-if=!isEditMode class=sidebar__description>{{observation.data.text}}</p><textarea ng-if=isEditMode ng-model=observation.data.text class=sidebar__description></textarea><nn-social-totals class=totals data=observation context=observations></nn-social-totals><div ng-if=!isEditMode style="margin-left:2em; display:inline;"><input ng-if=editable class=button ng-click=edit() value=edit type=submit> <input ng-if=editable class="button button--delete" ng-click=delete() value=delete type=submit></div><div ng-if=isEditMode style=display:inline;><input class="button button--cancel" ng-click=cancel() value=cancel type=submit> <input class="button button--save" ng-click=saveChanges() value=save type=submit></div></section>'),e.put("app/widgets/nn-observations-list.html",'<div class=main__observations><div class="list-item list-item--square" ng-if="observations.length > 0" ng-repeat="o in observations | filter:{ status:\'!deleted\' } | orderBy: \'-updated_at\' | limitTo: limit" ng-click=showObservation(o)><nn-image class=list-item__image image-url="{{o.data.image | img_thumb}}"></nn-image><div class=list-item__detail><nn-badge class="nn-badge item__user" title={{$root.users[o.observer].display_name}} subtitle={{formatDate(o.updated_at)}} avatar-url={{$root.users[o.observer].avatar}}></nn-badge></div></div><div ng-if="observations.length === 0">No Observations.</div></div><div class ng-if="expandable && (observations.length > limit)"><a href=# ng-click=incrementLimit()>Show More</a></div>'),e.put("app/widgets/nn-social-totals.html",'<div class="totals__total totals__total--likes" ng-class="{ totals__liked: liked }" ng-click=doLike()>{{likes}}</div><div class="totals__total totals__total--dislikes" ng-class="{ totals__disliked: disliked }" ng-if=showDislikes ng-click=doDislike()>{{dislikes}}</div><div class="totals__total totals__total--comments">{{comments}}</div>'),e.put("app/widgets/nn-status.html",'<div ng-switch on=status><div class="status status__discussing" ng-switch-when=doing><div class=status__text><p class=status__title>Discussing</p></div><div class=status__icon style="background-image: url(\'images/discussing.png\')"></div></div><div class="status status__completed" ng-switch-when=done><div class=status__text><p class=status__title>Completed</p></div><div class=status__icon style="background-image: url(\'images/completed.png\')"></div></div><div ng-switch-default><div></div></div></div>')}]);