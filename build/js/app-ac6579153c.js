/**
 * NatureNet - 
 * @authors 
 * @version v0.0.1
 * @link 
 * @license 
 */
!function(){"use strict";angular.module("app",["app.core","app.widgets","app.layout","app.auth","app.home","app.explore","app.communities","app.projects","app.ideas"])}(),function(){"use strict";angular.module("app.auth",["app.core","app.widgets"])}(),function(){"use strict";angular.module("blocks.exception",["blocks.logger"])}(),function(){"use strict";angular.module("blocks.logger",[])}(),function(){"use strict";angular.module("blocks.router",["ui.router","blocks.logger"])}(),function(){"use strict";angular.module("app.communities",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.core",["ngAnimate","ngSanitize","blocks.exception","blocks.logger","blocks.router","ui.router","firebase","ngMap","ngplus"])}(),function(){"use strict";angular.module("app.explore",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.home",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.ideas",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.layout",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.projects",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.widgets",[])}(),function(){"use strict";function e(e,t,i,n){function a(){var t=[s()];return e.all(t).then(function(){i.info("Authentication Ready")})}function s(){return n.onAuth().then(function(e){return e?(f.userUid=e.uid,t.$broadcast("auth:success",f.userUid),f.userUid):(t.$broadcast("signout"),void i.success("You are now logged out."))})}function o(e,t){var i=f.name;return n.createUser({email:e,password:t}).then(function(e){f.userUid=e.uid,r(f.email,f.password).then(function(){return l(f.userUid,f.email,i)})})}function r(e,a){return n.authWithPassword({email:e,password:a}).then(function(e){return f.userUid=e.uid,t.$broadcast("auth:success",f.userUid),p(),i.success("You are now logged in!"),f.userUid})}function c(){return n.unAuth()}function l(e,t,a){return n.addUser(e,t,a).then(function(e){return i.success("Welcome to NatureNet!"),e})}function d(){f.isRegister=!0,f.isSignin=!1}function u(){f.isRegister=!1,f.isSignin=!0}function p(){t.$broadcast("auth:hide"),h()}function m(e,t){g("login")&&r(e,t)}function v(e,t){g("join")&&o(e,t)}function g(e){return 0===f.email.length?(i.error("No email address was entered."),!1):0===f.password.length?(i.error("No password was entered."),!1):0===f.name.length&&"join"===e?(i.error("No username was entered."),!1):!0}function h(){f.isRegister=!1,f.isSignin=!1,f.email="",f.password="",f.name=""}var f=this;f.userUid=void 0,f.newUserObject=void 0,f.email="",f.password="",f.name="",f.isRegister=!1,f.isSignin=!1,f.login=m,f.join=v,f.close=p,a(),t.$on("register:show",d),t.$on("signin:show",u),t.$on("auth:hide",h),t.$on("signout",c)}angular.module("app.auth").controller("AuthController",e),e.$inject=["$q","$rootScope","logger","dataservice"]}(),function(){"use strict";function e(){this.config={appErrorPrefix:void 0},this.configure=function(e){this.config.appErrorPrefix=e},this.$get=function(){return{config:this.config}}}function t(e){e.decorator("$exceptionHandler",i)}function i(e,t,i){return function(n,a){var s=t.config.appErrorPrefix||"",o={exception:n,cause:a};n.message=s+n.message,e(n,a),i.error(n.message,o)}}angular.module("blocks.exception").provider("exceptionHandler",e).config(t),t.$inject=["$provide"],i.$inject=["$delegate","exceptionHandler","logger"]}(),function(){"use strict";function e(e,t){function i(i){return function(n){var a,s;return n.code&&n.message&&(a="\n"+n.message,s=i+a),n.message=s,t.error(s),e.reject(n)}}var n={catcher:i};return n}e.$inject=["$q","logger"],angular.module("blocks.exception").factory("exception",e)}(),function(){"use strict";function e(e,t){function i(i,n,a){t.error(i,a),e.error("Error: "+i,n)}function n(t,i,n){e.info("Info: "+t,i)}function a(i,n,a){t.success(i,a),e.info("Success: "+i,n)}function s(t,i,n){e.warn("Warning: "+t,i)}var o={showToasts:!0,error:i,info:n,success:a,warning:s,log:e.log};return o}angular.module("blocks.logger").factory("logger",e),e.$inject=["$log","toastr"]}(),function(){"use strict";function e(e,t,i){function n(e,n,s,o){function r(e,n){e.forEach(function(e){e.config.resolve=angular.extend(e.config.resolve||{},a.resolveAlways),t.state(e.state,e.config)}),n&&!m&&(m=!0,i.otherwise(n))}function c(){n.$on("$stateChangeError",function(t,i,n,a,s,r){if(!p){v.errors++,p=!0;var c=i&&(i.title||i.name||i.loadedTemplateUrl)||"unknown target",l="Error routing to "+c+". "+(r.data||"")+". <br/>"+(r.statusText||"")+": "+(r.status||"");o.warning(l,[i]),e.path("/")}})}function l(){c(),u()}function d(){return s.get()}function u(){n.$on("$stateChangeSuccess",function(e,t,i,s,o){v.changes++,p=!1;var r=(t.title||"")+" "+a.docTitle;n.title=r,n.$broadcast("map:hide")})}var p=!1,m=!1,v={errors:0,changes:0},g={configureStates:r,getStates:d,stateCounts:v};return l(),g}var a={docTitle:void 0,resolveAlways:{}};e.html5Mode(!0),this.configure=function(e){angular.extend(a,e)},this.$get=n,n.$inject=["$location","$rootScope","$state","logger"]}angular.module("blocks.router").provider("routerHelper",e),e.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e,t,i,n,a,s){function o(){a.showSplash();var t=[r(),c(),l()];return e.all(t).then(function(){var t=[d(m.userId),u(m.userId)];e.all(t).then(function(){a.hideSplash(),n.info("Activated Communities View")})})}function r(){return s.getUsersRecent(1).then(function(e){return m.userId=e[0].id,m.userId})}function c(){return s.getArray("users").then(function(e){return m.users=i("orderBy")(e,"updated_at"),m.users})}function l(){return s.getArray("groups").then(function(e){return m.groups=e,m.groups})}function d(e){return s.getObservationsArrayByUserId(e).then(function(e){return m.userObservations=e,m.numberOfObservations=0,m.userObservations})}function u(e){return s.getGroupsByUserId(e).then(function(e){return m.userGroups=e,m.userGroups})}function p(t){var i=[d(t),u(t)];return e.all(i).then(function(){m.userId=t,m.observationsDisplayLimit=m.displayLimit,m.groupsDisplayLimit=m.displayLimit,n.info("Updated Communities View based on new userId")})}var m=this;m.title="Communities",m.sidebarDisplayLimit=5,m.mainDisplayLimit=6,m.userId=void 0,m.users=[],m.groups=[],m.userObservations=[],m.userGroups=[],m.peopleDisplayLimit=m.sidebarDisplayLimit,m.groupsDisplayLimit=m.sidebarDisplayLimit,m.observationsDisplayLimit=m.mainDisplayLimit,m.groupsDisplayLimit=m.mainDisplayLimit,m.isPeopleListVisible=!0,m.isGroupsListVisible=!0,m.updateUserId=p,m.formatDate=a.formatDate,o()}angular.module("app.communities").controller("CommunitiesController",e),e.$inject=["$q","$rootScope","$filter","logger","utility","dataservice"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"communities",config:{url:"/communities",templateUrl:"app/communities/communities.html",controller:"CommunitiesController",controllerAs:"vm",title:"Communities",settings:{nav:2,content:"Communities"}}}]}angular.module("app.communities").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e){e.options.timeOut=4e3,e.options.positionClass="toast-bottom-right"}function t(e,t,i){e.debugEnabled&&e.debugEnabled(!0),i.configure(n.appErrorPrefix),t.configure({docTitle:" | "+n.appTitle})}var i=angular.module("app.core");i.config(e),e.$inject=["toastr"];var n={appErrorPrefix:"[NN Error] ",appTitle:"NatureNet",mapOptions:{zoom:5,minZoom:3,zoomControl:!0,scaleControl:!1,streetViewControl:!1,keyboardShortcuts:!1}};i.value("config",n),i.config(t),t.$inject=["$logProvider","routerHelperProvider","exceptionHandlerProvider"]}(),function(){"use strict";angular.module("app.core").constant("toastr",toastr).constant("moment",moment)}(),function(){"use strict";function e(e){var i="/404";e.configureStates(t(),i)}function t(){return[{state:"404",config:{url:"/404",templateUrl:"app/core/404.html",title:"404"}}]}e.$inject=["routerHelper"],angular.module("app.core").run(e)}(),function(){"use strict";function e(e,t,i,n,a,s,o){function r(e){function t(e){return a("orderBy")(a("notDeleted")(e),"updated_at",!0)}function n(e){return s.catcher("Failed for dataservice.getArray")(e)}var o=new Firebase(L+e).orderByChild("updated_at").limitToLast(50),r=i(o);return r.$loaded().then(t)["catch"](n)}function c(){function t(e){i.resolve(e)}var i=e.defer(),a=new Firebase(L),s=n(a);return s.$onAuth(function(e){t(e)}),i.promise}function l(){function t(e){i.resolve(e)}var i=e.defer(),a=new Firebase(L),s=n(a);return s.$getAuth(function(e){t(e)}),i.promise}function d(e){function t(e){return e}function i(e){return s.catcher("Failed for dataservice.authWithPassword")(e)}var a=new Firebase(L),o=n(a);return o.$authWithPassword(e).then(t)["catch"](i)}function u(){var e=new Firebase(L),t=n(e);return t.$unauth()}function p(e){function t(e){return e}function i(e){return s.catcher("Failed for dataservice.createUser")(e)}var a=new Firebase(L),o=n(a);return o.$createUser(e).then(t)["catch"](i)}function m(e){function t(e){return e}function i(e){return s.catcher("Failed for dataservice.removeUser")(e)}var a=new Firebase(L),o=n(a);return o.$removeUser().then(t)["catch"](i)}function v(t,i,n){function a(e){r.resolve("success")}function o(e){r.reject(s.catcher("Failed for dataservice.addUser")(e))}var r=e.defer(),c=new Firebase(L),l={};return l["users-private/"+t]={id:t,consent:{required:!0},created_at:Firebase.ServerValue.TIMESTAMP,updated_at:Firebase.ServerValue.TIMESTAMP},l["users/"+t]={id:t,display_name:n,created_at:Firebase.ServerValue.TIMESTAMP,updated_at:Firebase.ServerValue.TIMESTAMP},c.update(l,function(e){e?o(e):a()}),r.promise}function g(){function e(e){return e}function i(e){return s.catcher("Failed for dataservice.getUsers")(e)}var n=new Firebase(L+"users"),a=t(n);return a.$loaded().then(e)["catch"](i)}function h(e){function t(e){return a("orderBy")(e,"updated_at",!0)}function n(e){return s.catcher("Failed for dataservice.getUsersRecent")(e)}var o=new Firebase(L+"users").orderByChild("public/updated_at").limitToLast(e),r=i(o);return r.$loaded().then(t)["catch"](n)}function f(){function e(e){return e}function i(e){return s.catcher("Failed for dataservice.getGroups")(e)}var n=new Firebase(L+"groups"),a=t(n);return a.$loaded().then(e)["catch"](i)}function b(e){function t(e){return a("orderBy")(e,"updated_at",!0)}function n(e){return s.catcher("Failed for dataservice.getGroupsByUserId")(e)}var o=new Firebase(L+"groups").orderByChild("members/"+e).equalTo(!0),r=i(o);return r.$loaded().then(t)["catch"](n)}function _(e){function t(e){return a("orderBy")(a("notDeleted")(e),"updated_at",!0)}function n(e){return s.catcher("Failed for dataservice.getObservationsArrayByUserId")(e)}var o=new Firebase(L+"observations").orderByChild("observer").equalTo(e),r=i(o);return r.$loaded().then(t)["catch"](n)}function w(t){var i=e.defer();return j(t).then(function(e){var t=0,n=e.length,a=void 0,s=[];for(t;n>t;t++)a=new Firebase(L+"observations").orderByChild("activity_location").equalTo(e[t]),a.on("value",function(e){for(var t in e.val())s.push(e.val()[t])});i.resolve(s)}),i.promise}function y(){function e(e){return e}function i(e){return s.catcher("Failed for dataservice.getProjects")(e)}var n=new Firebase(L+"activities"),a=t(n);return a.$loaded().then(e)["catch"](i)}function $(e){function t(e){return a("orderBy")(e,"updated_at",!0)}function n(e){return s.catcher("Failed for dataservice.getProjectsRecent")(e)}var o=new Firebase(L+"activities").orderByChild("updated_at").limitToLast(e),r=i(o);return r.$loaded().then(t)["catch"](n)}function j(t){function i(e){var t=[];for(var i in e.val())t.push(i);a.resolve(t)}function n(e){a.reject(s.catcher("Failed for dataservice.getProjectLocationIds")(e))}var a=e.defer(),o=new Firebase(L+"geo/activities").orderByChild("activity").equalTo(t);return o.on("value",i,n),a.promise}function D(e,t){function n(e){return e}function a(e){return s.catcher("Failed for dataservice.getProjectsRecent")(e)}var o=new Firebase(L+"ideas"),r=i(o),c={group:"idea",submitter:e,content:t,created_at:Firebase.ServerValue.TIMESTAMP};return r.$add(c).then(n)["catch"](a)}var L="https://naturenet.firebaseio.com/",S={getArray:r,onAuth:c,getAuth:l,authWithPassword:d,unAuth:u,createUser:p,removeUser:m,addUser:v,getUsers:g,getUsersRecent:h,getGroups:f,getGroupsByUserId:b,getObservationsArrayByUserId:_,getObservationsArrayByProjectId:w,getProjects:y,getProjectsRecent:$,addIdea:D};return S}angular.module("app.core").factory("dataservice",e),e.$inject=["$q","$firebaseObject","$firebaseArray","$firebaseAuth","$filter","exception","logger"]}(),function(){"use strict";function e(e,t){function i(e){var t=moment(e).format("MMM DD YYYY").toString();return t}function n(){e.showSplash=!0}function a(){t(function(){e.showSplash=!1},1e3)}var s={formatDate:i,showSplash:n,hideSplash:a};return s}function t(){return function(e){for(var t=[],i=0;i<e.length;++i)e[i].hasOwnProperty("status")&&"deleted"===e[i].status.toLowerCase()||t.push(e[i]);return t}}angular.module("app.core").factory("utility",e).filter("notDeleted",t),e.$inject=["$rootScope","$timeout"]}(),function(){"use strict";function e(e,t,i,n,a,s,o,r,c){function l(){o.showSplash();var t=[d()];return c.getMap().then(function(i){a.info("Google Maps Ready"),_.map=i,p(),e.all(t).then(function(){o.hideSplash(),a.info("Activated Map View")})})}function d(){return r.getArray("observations").then(function(e){return _.observations=e,_.observations})}function u(){f(_.currentObservation),m(_.currentObservation)}function p(){s.mapOptions.center=new google.maps.LatLng(39.833333,-98.583333),s.mapOptions.mapTypeId=google.maps.MapTypeId.HYBRID,_.map.setOptions(s.mapOptions),i.$broadcast("map:init"),t.$on("map:toggle",v),t.$on("map:show",g),t.$on("map:hide",h)}function m(e){if(e){var t=new google.maps.LatLng({lat:e.l[0],lng:e.l[1]}),i=_.map.getZoom();_.map.panTo(t),18>i&&_.map.setZoom(18)}}function v(){i.$parent.hasMap=!i.$parent.hasMap}function g(e,t){t&&(_.currentObservation=t),i.$parent.hasMap=!0}function h(){i.$parent.hasMap=!1}function f(e){_.currentObservation=e,_.hasSidebar=!0}function b(){_.hasSidebar=!1}var _=this;_.title="Explore",_.map=void 0,_.observations=void 0,_.currentObservation=void 0,i.$parent.hasMap=!1,_.hasSidebar=!1,_.isObservationsListVisible=!0,_.toggleMap=v,_.showSidebar=f,_.hideSidebar=b,_.formatDate=o.formatDate,l(),i.$watch("vm.currentObservation",u)}angular.module("app.explore").controller("ExploreController",e),e.$inject=["$q","$rootScope","$scope","$timeout","logger","config","utility","dataservice","NgMap"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"explore",config:{url:"/explore",templateUrl:"app/explore/explore.html",controller:"ExploreController",controllerAs:"vm",title:"Explore"}}]}angular.module("app.explore").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(){function e(e,t,i){function n(){s=e.map,google.maps.event.addListener(s,"bounds_changed",a)}function a(){function e(){return-85>o?i=c-(o+85):n>85&&(i=c-(n-85)),t=new google.maps.LatLng(i,l),void s.setCenter(t)}var t=void 0,i=void 0,n=s.getBounds().getNorthEast().lat(),a=s.getBounds().getNorthEast().lng(),o=s.getBounds().getSouthWest().lat(),r=s.getBounds().getSouthWest().lng(),c=s.getCenter().lat(),l=s.getCenter().lng(),d=-85>o&&n>85,u=o>-85&&85>n,p=d||u,m=a>0&&180>a&&l>0,v=0>r&&r>-180&&0>l,g=m||v;if(p&&g);else if(!p)return e()}var s=void 0;e.$on("map:init",n)}var t={link:e,restrict:"A"};return t}angular.module("app.explore").directive("nnMapContain",e),e.$inject=[]}(),function(){"use strict";function e(e,t,i,n,a){function s(){n.showSplash();var t=[o(),r()];return e.all(t).then(function(){n.hideSplash(),i.info("Activated Home View")})}function o(){return a.getArray("observations").then(function(e){return l.observations=e,l.observations})}function r(){return a.getArray("ideas").then(function(e){return l.ideas=e,l.ideas})}function c(e){t.$broadcast("map:show",e)}var l=this;l.title="Home",l.observations=[],l.ideas=[],l.observationsDisplayLimit=5,l.ideasDisplayLimit=5,l.showObservation=c,l.formatDate=n.formatDate,s()}angular.module("app.home").controller("HomeController",e),e.$inject=["$q","$rootScope","logger","utility","dataservice"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"home",config:{url:"/",templateUrl:"app/home/home.html",controller:"HomeController",controllerAs:"vm",title:"Home",settings:{content:"Home"}}}]}angular.module("app.home").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,i,n){function a(){i.showSplash();var n=[s()];return e.all(n).then(function(){i.hideSplash(),t.info("Activated Design Ideas View")})}function s(){return n.getArray("ideas").then(function(e){var t=0,i=e.length;for(t;i>t;t++)e[t].group&&"challenge"===e[t].group.toLowerCase()?d.challenges.push(e[t]):d.ideas.push(e[t]);return console.log("updated"),!0})}function o(e,i){return n.addIdea(e,i).then(function(e){s().then(function(){l(),t.success("Idea successfully submitted!")})})}function r(){return n.onAuth().then(function(e){return d.uid=e.uid,d.uid})}function c(){0!==d.content.length&&r().then(function(){o(d.uid,d.content)})}function l(){d.content=""}var d=this;d.title="Design Ideas",d.sidebarDisplayLimit=3,d.uid=void 0,d.content="",d.ideas=[],d.challenges=[],d.currentIdeaId=void 0,d.currentChallengeId=void 0,d.ideasDisplayLimit=d.sidebarDisplayLimit,d.challengesDisplayLimit=d.sidebarDisplayLimit,d.isIdeasListVisible=!0,d.isChallengesListVisible=!0,d.addIdea=c,d.formatDate=i.formatDate,a()}angular.module("app.ideas").controller("IdeasController",e),e.$inject=["$q","logger","utility","dataservice"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"ideas",config:{url:"/ideas",templateUrl:"app/ideas/ideas.html",controller:"IdeasController",controllerAs:"vm",title:"Design Ideas",settings:{nav:4,content:"Design Ideas"}}}]}angular.module("app.ideas").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,i,n,a){function s(){c()}function o(){return a.onAuth().then(function(e){return b.isAuthenticated=!0,b.userUid=e.uid,b.userUid})}function r(){b.isAuthenticated=!1,b.userUid=void 0}function c(){b.navRoutes=_.filter(function(e){return e.settings&&e.settings.nav}).sort(function(e,t){return e.settings.nav-t.settings.nav})}function l(e){return d(e)+" "+u(e)}function d(e){return"item-"+e.name}function u(e){if(!e.title||!t.current||!t.current.title)return"";var i=e.title;return t.current.title.substr(0,i.length)===i?"is-current":""}function p(t){"boolean"==typeof t&&t?(e.$broadcast("map:show"),b.isMapActive=t):"boolean"!=typeof t||t?"boolean"!=typeof t&&(e.$broadcast("map:toggle"),b.isMapActive=!b.isMapActive):(e.$broadcast("map:hide"),b.isMapActive=t)}function m(){e.$broadcast("register:show")}function v(){e.$broadcast("signin:show")}function g(){e.$broadcast("signout")}function h(){o()}function f(){b.isMapActive=!0}var b=this,_=i.getStates();b.userUid=void 0,b.isMapActive=!1,b.isAuthenticated=!1,b.getClasses=l,b.toggleMap=p,b.showRegister=m,b.showSignin=v,b.signOut=g,s(),e.$on("auth:success",h),e.$on("map:show",f),e.$on("signout",r)}angular.module("app.layout").controller("HeaderController",e),e.$inject=["$rootScope","$state","routerHelper","logger","dataservice"]}(),function(){"use strict";function e(e,t,i,n,a,s){function o(){i.info(n.appTitle+" loaded!",null),a.showSplash();var t=[r(),c(),l()];return e.all(t).then(function(){a.hideSplash()})}function r(){return s.getUsers().then(function(e){return t.users=e,t.users})}function c(){return s.getGroups().then(function(e){return t.groups=e,t.groups})}function l(){return s.getProjects().then(function(e){return t.projects=e,t.projects})}function d(){t.$broadcast("auth:hide")}function u(){m.isAuth=!0}function p(){m.isAuth=!1}var m=this;m.isAuth=!1,m.hideAuth=p,m.broadcastHideAuth=d,o(),t.$on("register:show",u),t.$on("signin:show",u),t.$on("auth:hide",p)}angular.module("app.layout").controller("ShellController",e),e.$inject=["$q","$rootScope","logger","config","utility","dataservice"]}(),function(){"use strict";function e(e,t,i,n){function a(){i.showSplash();var n=[s(),o()];return e.all(n).then(function(){var n=[r(l.projectId)];e.all(n).then(function(){i.hideSplash(),t.info("Activated Projects View")})})}function s(){return n.getProjectsRecent(1).then(function(e){return l.projectId=e[0].id,l.projectId})}function o(){return n.getArray("activities").then(function(e){return l.projects=e,l.projects})}function r(e){return n.getObservationsArrayByProjectId(e).then(function(e){return l.projectObservations=e,l.projectObservations})}function c(i){var n=[r(i)];return e.all(n).then(function(){l.projectId=i,t.info("Updated Projects View based on new projectId")})}var l=this;l.title="Projects",l.displayLimit=6,l.projectId=void 0,l.projects=[],l.projectObservations=[],l.isProjectsListVisible=!0,l.updateProjectId=c,l.formatDate=i.formatDate,a()}angular.module("app.projects").controller("ProjectsController",e),e.$inject=["$q","logger","utility","dataservice"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"projects",config:{url:"/projects",templateUrl:"app/projects/projects.html",controller:"ProjectsController",controllerAs:"vm",title:"Projects",settings:{nav:3,content:"Projects"}}}]}angular.module("app.projects").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(){function e(e,t,i){e.showDefault=!1,e.avatarUrl&&""!==e.avatarUrl||(e.showDefault=!0)}var t={scope:{avatarUrl:"@",title:"@",subtitle:"@"},link:e,templateUrl:"app/widgets/nn-badge.html",restrict:"EA"};return t}angular.module("app.widgets").directive("nnBadge",e)}(),function(){"use strict";function e(e){function t(t,i,n){t.formatDate=e.formatDate,"[no description]"===t.comment?t.text="":t.text=t.comment}var i={scope:{avatarUrl:"@",name:"@",date:"@",comment:"@"},link:t,templateUrl:"app/widgets/nn-comment.html",restrict:"EA"};return i}angular.module("app.widgets").directive("nnComment",e),e.$inject=["utility"]}(),function(){"use strict";function e(e,t){function i(e,t,i){function n(){e.options.some(function(t){return t===e.selectedOption})&&(e.isPlaceholder=void 0===e.selectedOption[e.property],e.display=e.selectedOption[e.property])}function a(t){return e.isPlaceholder?void 0:t[e.property]===e.selectedOption[e.property]?"is-current":""}function s(){e.listVisible=!e.listVisible}function o(t){e.isPlaceholder=!1,e.selectedOption=t,e.listVisible=!1,e.display=e.selectedOption[e.property]}e.listVisible=!1,e.isPlaceholder=!0,e.isCurrent=a,e.toggleOptions=s,e.selectOption=o,n()}var n={scope:{placeholder:"@",options:"=",selectedOption:"=",property:"@"},link:i,templateUrl:"app/widgets/nn-dropdown.html",restrict:"EA"};return n}angular.module("app.widgets").directive("nnDropdown",e),e.$inject=["$rootScope","logger"]}(),function(){"use strict";function e(){function e(e,t,i){e.showDefault=!1,e.imageUrl&&""!==e.imageUrl||(e.showDefault=!0)}var t={scope:{imageUrl:"@"},link:e,templateUrl:"app/widgets/nn-image.html",restrict:"EA"};return t}angular.module("app.widgets").directive("nnImage",e)}(),function(){"use strict";function e(e,t){function i(i,n,a){function s(t){e.$broadcast("map:show",t)}function o(){i.limit=parseInt(i.limit)+parseInt(c)}function r(){i.limit=parseInt(c)}i.$watch("observations",r);var c=i.limit.slice(0);i.formatDate=t.formatDate,i.showObservation=s,i.incrementLimit=o}var n={scope:{observations:"=",limit:"@"},link:i,templateUrl:"app/widgets/nn-observations-list.html",restrict:"EA"};return n}angular.module("app.widgets").directive("nnObservationsList",e),e.$inject=["$rootScope","utility"]}(),function(){"use strict";function e(){function e(e,t,i){function n(){e.likes=a("likes"),e.dislikes=a("dislikes"),e.comments=a("comments")}function a(t){if(e.data[t]){var i=0,n=void 0;for(n in e.data[t])e.data[t][n]&&i++;return i}return 0}e.$watch("data",n)}var t={scope:{data:"=",showDislikes:"@"},link:e,templateUrl:"app/widgets/nn-social-totals.html",restrict:"EA"};return t}angular.module("app.widgets").directive("nnSocialTotals",e)}(),angular.module("app.core").run(["$templateCache",function(e){e.put("app/auth/auth.html",'<div class="auth -center" ng-click=$event.stopPropagation()><div class=auth__header><div class="auth__avatar -centerh"></div><div class=auth__close ng-click=vm.close()></div></div><div ng-if="vm.isRegister && !vm.isSignin" ng-include="\'app/auth/register.html\'"></div><div ng-if="!vm.isRegister && vm.isSignin" ng-include="\'app/auth/signin.html\'"></div></div>'),e.put("app/auth/register.html",'<form class="auth__form auth__form--register" ng-submit="vm.join(vm.email, vm.password)"><div class=auth__text>Join NatureNet today!</div><div style="margin-bottom: 30px; line-height: 1.4;"></div><input class=auth__field placeholder=Username type=text ng-model=vm.name> <input class=auth__field placeholder=password type=password ng-model=vm.password> <input class=auth__field placeholder=email type=text ng-model=vm.email> <input class="button button--auth" value=join type=submit></form>'),e.put("app/auth/signin.html",'<form class="auth__form auth__form--signin" ng-submit="vm.login(vm.email, vm.password)"><div class=auth__logo></div><input class=auth__field placeholder=email type=text ng-model=vm.email> <input class=auth__field placeholder=password type=password ng-model=vm.password> <input class="button button--auth" value="sign in" type=submit></form>'),e.put("app/communities/communities.html",'<div class="sidebar sidebar--communities"><header class="sidebar__header sidebar__header--people"><div class="dropdown dropdown--people" ng-class="{ \'dropdown--show-list\': !!vm.isPeopleListVisible }"><div class=dropdown__display ng-click="vm.isPeopleListVisible = !vm.isPeopleListVisible"><span>People</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=dropdown__option ng-repeat="u in vm.users | limitTo: vm.peopleDisplayLimit" ng-click=vm.updateUserId(u.id)><nn-badge class=badge title={{u.display_name}} subtitle avatar-url={{u.avatar}}></nn-badge></div><div class=sidebar__see-more ng-if="vm.users.length > vm.peopleDisplayLimit"><a href=# ng-click="vm.peopleDisplayLimit = vm.peopleDisplayLimit + vm.sidebarDisplayLimit">Show More</a></div></div></div></header><header class="sidebar__header sidebar__header--groups" ng-if=false><div class="dropdown dropdown--groups" ng-class="{ \'dropdown--show-list\': !!vm.isGroupsListVisible }"><div class=dropdown__display ng-click="vm.isGroupsListVisible = !vm.isGroupsListVisible"><span>Groups</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=dropdown__option ng-repeat="g in vm.groups | limitTo: vm.groupsDisplayLimit"><nn-badge class=badge title={{g.name}} subtitle avatar-url={{g.avatar}}></nn-badge></div><div class=sidebar__see-more ng-if="vm.groups.length > vm.groupsDisplayLimit"><a href=# ng-click="vm.groupsDisplayLimit = vm.groupsDisplayLimit + vm.sidebarDisplayLimit">Show More</a></div></div></div></header></div><div class="main main--with-sidebar main--communities"><section class="main__section masthead"><header class=masthead__header><div class=masthead__avatar style="background-image: url(\'{{$root.users[vm.userId].avatar}}\')"></div><div class=masthead__title>{{$root.users[vm.userId].display_name}}</div></header><div class=masthead__text>{{$root.users[vm.userId].bio}}</div></section><section class="main__section recent-contributions"><div class=main__subtitle>Recent Contributions by {{$root.users[vm.userId].display_name}}</div><nn-observations-list observations=vm.userObservations limit={{vm.mainDisplayLimit}}></nn-observations-list></section><section class="main__section main__section--groups"><div class=main__subtitle>Groups</div><div class=main__groups><nn-badge class="badge badge--large" ng-if="vm.userGroups.length > 0" ng-repeat="g in vm.userGroups | limitTo: vm.groupsDisplayLimit" title={{g.name}} avatar-url={{g.avatar}}></nn-badge><div ng-if="vm.userGroups.length === 0">No groups.</div><div class ng-if="vm.userGroups.length > vm.groupsDisplayLimit"><a href=# ng-click="vm.groupsDisplayLimit = vm.groupsDisplayLimit + vm.mainDisplayLimit">Show More</a></div></div></section></div>'),e.put("app/core/404.html","<section class=fourzerofour></section>"),e.put("app/explore/explore.html",'<ng-map nn-map-contain class=map default-style=false center="United States of America" ng-class="{\'has-sidebar\': !!vm.hasSidebar}"><div class="sidebar sidebar--map-list"><header class=sidebar__header><div class="dropdown dropdown--explore" ng-class="{ \'dropdown--show-list\': !!vm.isObservationsListVisible }"><div class=dropdown__display ng-click="vm.isObservationsListVisible = !vm.isObservationsListVisible"><span>Observations</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=list-item ng-repeat="o in vm.observations" ng-click=vm.showSidebar(o)><nn-image class=list-item__image image-url={{o.data.image}}></nn-image><div class=list-item__detail><nn-comment class="comment list-item__comment" name={{$root.users[o.observer].display_name}} date={{vm.formatDate(o.updated_at)}} avatar-url={{$root.users[o.observer].avatar}} comment={{o.data.text}}></nn-comment><nn-social-totals class=totals data=o></nn-social-totals></div></div></div></div></header></div><div ng-if=!!vm.currentObservation class="sidebar sidebar--slide sidebar--map-detail"><header class=sidebar__header><nn-badge class="badge sidebar__user" title={{$root.users[vm.currentObservation.observer].display_name}} subtitle={{vm.formatDate(vm.currentObservation.updated_at)}} avatar-url={{$root.users[vm.currentObservation.observer].avatar}}></nn-badge><a class=sidebar__close href=# ng-click=vm.hideSidebar()></a></header><section class=sidebar__content><div ng-if=vm.currentObservation.data.image nn-image class=sidebar__image image-url={{vm.currentObservation.data.image}}></div><p ng-if=vm.currentObservation.data.text class=sidebar__description>{{vm.currentObservation.data.text}}</p><nn-social-totals class=totals data=vm.currentObservation></nn-social-totals></section><section class=sidebar__comments><nn-comment class="comment list-item__comment" ng-repeat="c in vm.currentObservation.comments" name={{$root.users[c.commenter].display_name}} date={{vm.formatDate(c.updated_at)}} avatar-url={{$root.users[c.commenter].avatar}} comment={{c.comment}}></nn-comment></section></div><custom-marker ng-repeat="o in vm.observations" position={{o.l}}><div class=map-marker ng-click=vm.showSidebar(o)></div></custom-marker></ng-map>'),e.put("app/home/home.html",'<div class=home-content><div class="content content--what"><div class=content__image></div><div class=content__text><h1 class=content__title>What is NatureNet?</h1><h2 class=content__subtitle>A community of citizen environmentalists whose members keep making it better.</h2><div class=content__description><p>NatureNet is a community of citizen environmentalists whose members keep making it better. Active sites include the Anacostia Watershed in Washington, D.C. and Maryland, Reedy Creek Nature Center in Charlotte, North Carolina, Aspen Center for Environmental Studies in Aspen, Colorado, and your backyard!</p><br><p class=content__lineitem>LEARN about nature in your community</p><p class=content__lineitem>SHARE your observations and ideas</p><p class=content__lineitem>SHAPE nature projects in your local community</p><p class=content__lineitem>DESIGN this nature technology with your community</p><br><p>This project is supported by the National Science Foundation under Grant No. IIS-1221513 and Grant No. 1423212 to the University of North Carolina at Charlotte, Grant No. 1423207 to the University of Maryland, and Grant No. 1423338 to the University of Colorado.</p></div></div></div><div class="content content--why"><div class=content__image></div><div class=content__text><h1 class=content__title>Why join NatureNet?</h1><p class=content__description>Do you want to participate in a biodiversity-preserving project in your area? Or do you have an idea for a new project and want to get a community behind you? Join NatureNet today, and donâ€™t just be a voice in the crowd: be part of a crowd with a voice!</p></div></div><div ng-controller="HeaderController as vm"><center><div ng-hide=vm.isAuthenticated><a class="button button--joinnow" href=# ng-click=vm.showRegister()>Join NatureNet Today</a></div></center></div></div><div class=home-items><ul class="items items--observations"><li class=items__group>Recent Observations</li><li class=item ng-repeat="o in vm.observations | limitTo: vm.observationsDisplayLimit" ng-click=vm.showObservation(o)><nn-badge class="badge item__user" title={{$root.users[o.observer].display_name}} subtitle={{vm.formatDate(o.updated_at)}} avatar-url={{$root.users[o.observer].avatar}}></nn-badge><nn-social-totals class="item__totals totals -centerv" data=o></nn-social-totals></li><li class=items__action ng-if="vm.observations.length > vm.observationsDisplayLimit"><a href=# ng-click="vm.observationsDisplayLimit = vm.observationsDisplayLimit + 5">Show More</a></li></ul><ul class="items items--ideas"><li class=items__group>Recent Design Ideas</li><li class=item ng-repeat="i in vm.ideas | limitTo: vm.ideasDisplayLimit"><nn-badge class="badge item__user" title={{$root.users[i.submitter].display_name}} subtitle={{vm.formatDate(i.updated_at)}} avatar-url={{$root.users[i.submitter].avatar}}></nn-badge><nn-social-totals class="item__totals totals -centerv" data=i></nn-social-totals></li><li class=items__action ng-if="vm.ideas.length > vm.ideasDisplayLimit"><a href=# ng-click="vm.ideasDisplayLimit = vm.ideasDisplayLimit + 5">Show More</a></li></ul></div>'),
e.put("app/ideas/ideas.html",'<div class="sidebar sidebar--ideas"><header class=sidebar__header><div class="dropdown dropdown--ideas" ng-class="{ \'dropdown--show-list\': !!vm.isIdeasListVisible }"><div class=dropdown__display ng-click="vm.isIdeasListVisible = !vm.isIdeasListVisible"><span>Design Ideas</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=list-item ng-repeat="i in vm.ideas | limitTo: vm.ideasDisplayLimit" ng-click="vm.selectedIdea = i"><nn-image class=list-item__image image-url={{}}></nn-image><div class=list-item__detail><nn-comment class="comment list-item__comment" name={{$root.users[i.submitter].display_name}} date={{vm.formatDate(i.updated_at)}} avatar-url={{$root.users[i.submitter].avatar}} comment={{i.content}}></nn-comment><nn-social-totals class=totals data=i></nn-social-totals></div></div><div class=sidebar__see-more ng-if="vm.ideas.length > vm.ideasDisplayLimit"><a href=# ng-click="vm.ideasDisplayLimit = vm.ideasDisplayLimit + vm.sidebarDisplayLimit">Show More</a></div></div></div></header><header class=sidebar__header><div class="dropdown dropdown--challenges" ng-class="{ \'dropdown--show-list\': !!vm.isChallengesListVisible }"><div class=dropdown__display ng-click="vm.isChallengesListVisible = !vm.isChallengesListVisible"><span>Design Challenges</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=list-item ng-repeat="c in vm.challenges | limitTo: vm.challengesDisplayLimit" ng-click><nn-image class=list-item__image image-url={{}}></nn-image><div class=list-item__detail><nn-comment class="comment list-item__comment" name={{$root.users[c.submitter].display_name}} date={{vm.formatDate(c.updated_at)}} avatar-url={{$root.users[c.submitter].avatar}} comment={{c.content}}></nn-comment><nn-social-totals class=totals data=c></nn-social-totals></div></div><div class=sidebar__see-more ng-if="vm.challenges.length > vm.challengesDisplayLimit"><a href=# ng-click="vm.challengesDisplayLimit = vm.challengesDisplayLimit + vm.sidebarDisplayLimit">Show More</a></div></div></div></header></div><div class="main main--with-sidebar main--ideas"><section class="main__section masthead"><header class=masthead__header><div class=masthead__avatar style="background-size: cover; background-image: url(\'/images/design-ideas.png\')"></div><div class=masthead__title>Design Ideas</div></header><div class=masthead__text><p class=masthead__description>Crowdsourcing design is a way for anyone to contribute to the NatureNet experience. Designers change the world and the NatureNet project gives everyone a chance to be a designer. Your design ideas can be a new way of using NatureNet in your community, and new to use mobile technology for learning about sustainability or changes in the environment, or a new feature on the web site.</p><p class=masthead__directions>Join the discussion below with an idea or challenge of your own, comment on someone else\'s idea, or vote for your favorite idea.</p><form class="masthead__form clearfix" ng-submit=vm.addIdea()><div><textarea class=masthead__textarea placeholder="Write a design challenge..." ng-model=vm.content>\n          </textarea><div class=add-me>Adding photos coming soon</div></div><input class="button button--masthead" value=submit type=submit></form></div><div ng-if=vm.selectedIdea><div class=list-item><div class=list-item__detail><nn-comment class="comment list-item__comment" name={{$root.users[vm.selectedIdea.submitter].display_name}} date={{vm.formatDate(vm.selectedIdea.updated_at)}} avatar-url={{$root.users[vm.selectedIdea.submitter].avatar}} comment={{vm.selectedIdea.content}}></nn-comment><nn-social-totals class=totals data=vm.selectedIdea></nn-social-totals></div></div></div></section></div>'),e.put("app/layout/header.html",'<a class=head-logo href="/" ng-click=vm.toggleMap(false)></a><div class=head-menu><div class=head-menu__list><a class="head-menu__item item-explore" ng-click=vm.toggleMap() ng-class="{\'is-current\': !!vm.isMapActive}" href=#>Explore</a> <a class=head-menu__item ng-repeat="r in vm.navRoutes" ng-class=vm.getClasses(r) ng-bind-html=r.settings.content ng-click=vm.toggleMap(false) ui-sref={{r.name}}></a></div><div class=head-menu__foot style="display: none"></div></div><div class=head-user><div ng-hide=vm.isAuthenticated><a class="button head-user__item button--join" href=# ng-click=vm.showRegister()>Join</a> <a class="button head-user__item button--signin" href=# ng-click=vm.showSignin()>Sign In</a></div><div ng-show=vm.isAuthenticated><nn-badge class="badge head-user__item badge--header" ng-click=vm.signOut() title="Welcome, {{$root.users[vm.userUid].display_name}}" subtitle="Click to Sign Out"></nn-badge><a class="button head-user__item button--signout" href=# ng-click=vm.signOut()>Sign Out</a></div></div>'),e.put("app/layout/shell.html",'<div class=page-logo><a href=#><i class=icon></i></a></div><header class=page-head ng-include="\'app/layout/header.html\'" ng-controller="HeaderController as vm"></header><main class=page-main ui-view></main><footer class=page-foot></footer><div class=page-map ng-include="\'app/explore/explore.html\'" ng-controller="ExploreController as vm" ng-class="{\'has-map\': !!hasMap}"></div><div class="page-over overlay" ng-hide=!vm.isAuth ng-click=vm.broadcastHideAuth()><div ng-include="\'app/auth/auth.html\'" ng-controller="AuthController as vm"></div></div>'),e.put("app/projects/projects.html",'<div class="sidebar sidebar--projects"><header class="sidebar__header sidebar__header--projects"><div class="dropdown dropdown--projects" ng-class="{ \'dropdown--show-list\': !!vm.isProjectsListVisible }"><div class=dropdown__display ng-click="vm.isProjectsListVisible = !vm.isProjectsListVisible"><span>Projects</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=dropdown__option ng-repeat="p in vm.projects" ng-click=vm.updateProjectId(p.id)><nn-badge class=badge title={{p.name}} subtitle avatar-url={{p.icon_url}}></nn-badge></div></div></div></header></div><div class="main main--with-sidebar main--projects"><section class="main__section masthead"><header class=masthead__header><div class=masthead__avatar style="background-image: url(\'{{$root.projects[vm.projectId].icon_url}}\')"></div><div class=masthead__title>{{$root.projects[vm.projectId].name}}</div></header><div class=masthead__text>{{$root.projects[vm.projectId].description}}</div></section><section class="main__section recent-contributions"><div class=main__subtitle>Recent Contributions</div><nn-observations-list observations=vm.projectObservations limit={{vm.displayLimit}}></nn-observations-list></section></div>'),e.put("app/widgets/nn-badge.html","<div class=badge__avatar ng-if=showDefault style=\"background-image: url('/images/default-avatar.png')\"></div><div class=badge__avatar ng-if=!showDefault style=\"background-image: url('{{avatarUrl}}')\"></div><div class=badge__text><p class=badge__title>{{title}}</p><p ng-if=!!subtitle class=badge__subtitle>{{subtitle}}</p></div>"),e.put("app/widgets/nn-comment.html",'<nn-badge class="badge comment__user" title={{name}} subtitle={{formatDate(date)}} avatar-url={{avatarUrl}}></nn-badge><div class=comment__text>{{comment}}</div>'),e.put("app/widgets/nn-dropdown.html",'<div class=dropdown ng-class="{ \'dropdown--show-list\': !!listVisible }"><div class=dropdown__display ng-click=toggleOptions()><span ng-if=!isPlaceholder>{{display}}</span> <span class=placeholder ng-if=isPlaceholder>{{placeholder}}</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=dropdown__option ng-repeat="o in options" ng-class=isCurrent(o) ng-click=selectOption(o)><span>{{property !== undefined ? o[property] : o}}</span></div></div></div>'),e.put("app/widgets/nn-image.html","<div ng-if=showDefault style=\"background-image: url('/images/default-image.png')\"></div><div ng-if=!showDefault style=\"background-image: url('{{imageUrl}}')\"></div>"),e.put("app/widgets/nn-observations-list.html",'<div class=main__observations><div class="list-item list-item--square" ng-if="observations.length > 0" ng-repeat="o in observations | limitTo: limit" ng-click=showObservation(o)><nn-image class=list-item__image image-url={{o.data.image}}></nn-image><div class=list-item__detail><nn-badge class="badge item__user" title={{$root.users[o.observer].display_name}} subtitle={{formatDate(o.updated_at)}} avatar-url={{$root.users[o.observer].avatar}}></nn-badge></div></div><div ng-if="observations.length === 0">No contributions.</div></div><div class ng-if="observations.length > limit"><a href=# ng-click=incrementLimit()>Show More</a></div>'),e.put("app/widgets/nn-social-totals.html",'<div class="totals__total totals__total--likes">{{likes}}</div><div class="totals__total totals__total--dislikes" ng-if=false>{{dislikes}}</div><div class="totals__total totals__total--comments">{{comments}}</div>')}]);