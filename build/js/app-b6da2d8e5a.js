/**
 * naturenet - nature-net.org website
 * @authors 
 * @version v0.0.1
 * @link 
 * @license 
 */
!function(){"use strict";angular.module("app",["app.core","app.widgets","app.layout","app.auth","app.home","app.explore","app.communities","app.contributions","app.projects","app.ideas"])}(),function(){"use strict";angular.module("app.auth",["app.core","app.widgets"])}(),function(){"use strict";angular.module("blocks.exception",["blocks.logger"])}(),function(){"use strict";angular.module("blocks.logger",[])}(),function(){"use strict";angular.module("blocks.router",["ui.router","blocks.logger"])}(),function(){"use strict";angular.module("app.communities",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.contributions",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.core",["ngAnimate","ngSanitize","blocks.exception","blocks.logger","blocks.router","ui.router","firebase","ngMap","ngplus","ngCookies","ngFileUpload","ngGeolocation","angular-cloudinary"])}(),function(){"use strict";angular.module("app.explore",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.home",["app.core","app.widgets","ngAnimate","ngSanitize","ui.bootstrap"])}(),function(){"use strict";angular.module("app.ideas",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.layout",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.projects",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.widgets",["app.core"])}(),function(){"use strict";function e(e,t,i,a,n,o){function s(){var t=[v(),g()];return e.all(t).then(function(){r(),n.info("Authentication Ready")})}function r(){return o.onAuthStateChanged(function(e){return e?(D.userUid=e.uid,t.$broadcast("auth:success",D.userUid),D.userUid):void 0})}function l(){var e={display_name:D.name,name:D.realname,bio:D.bio,email:D.email,affiliation:D.affiliation.$id};return o.createUser(D.email,D.password).then(function(t){D.userUid=t.uid,e.uid=t.uid,u(D.email,D.password).then(function(){return p(e)})})}function c(){d().then(function(){console.log("updating profile");var e={avatar:D.avatar,display_name:D.name,name:D.realname,bio:D.bio,affiliation:D.affiliation.$id,groups:D.membership,uid:D.userUid,demographics:{age:D.age||null,gender:D.gender||null,race:D.race||null}};return o.updateUser(e).then(function(e){return n.success("Your profile has been updated!"),y(),D.userUid})})}function d(){var t=e.when(null);return D.avatarFile&&(console.log("uploading avatar"),t=a.upload(D.avatarFile,{upload_preset:"avatar-preset"}).then(function(e){console.log("avatar uploaded"),D.avatar=e.data.secure_url})["catch"](function(e){n.error("The image you selected could not be uploaded."),D.avatarFile=null})),t}function u(e,i){return o.authWithPassword(e,i).then(function(e){return D.userUid=e.uid,t.$broadcast("auth:success",D.userUid),y(),n.success("You are now logged in!"),D.userUid})}function m(){return o.unAuth()}function p(e){return o.addUser(e).then(function(e){return n.success("Welcome to NatureNet!"),e})}function v(){return o.getArray("sites").then(function(e){D.sites=e})}function g(){return o.getArray("groups").then(function(e){D.groups=e})}function h(){var e=o.getAuth();e?o.getActiveUserDetails().then(function(e){var t=e[0],i=e[1];D.avatar=t.avatar||"",D.name=t.display_name,D.realname=i.name,D.affiliation=D.sites.$getRecord(t.affiliation),D.bio=t.bio||"",D.membership=t.groups||{};var a=i.demographics||{};D.age=a.age||"",D.gender=a.gender||"",D.race=a.race||{}}):n.warning("User is not logged in! Nothing to update.")}function f(){D.mode="update",h()}function b(){D.mode="register"}function _(){D.mode="signin"}function y(){t.$broadcast("auth:hide"),j()}function w(e,t){x()&&u(e,t)}function $(){x()&&("update"===D.mode?c():l())}function k(){return 0===D.email.length?(n.error("No email address was entered."),!1):o.resetPassword(D.email).then(function(e){n.success("Please check the provided email address for instructions.")})}function x(){return 0===D.email.length&&"update"!==D.mode?(n.error("No email address was entered."),!1):0===D.password.length&&"update"!==D.mode?(n.error("No password was entered."),!1):0===D.name.length&&"signin"!==D.mode?(n.error("No username was entered."),!1):0===D.realname.length&&"signin"!==D.mode?(n.error("No name was entered."),!1):0===D.affiliation.length&&"signin"!==D.mode?(n.error("No affiliation was entered."),!1):!0}function j(){D.mode=null,D.avatarFile=null,D.avatar="",D.email="",D.password="",D.name="",D.realname="",D.bio="",D.affiliation="",D.membership={},D.age="",D.gender="",D.race={}}var D=this;D.userUid=void 0,D.newUserObject=void 0,D.avatarFile=void 0,D.avatar="",D.email="",D.password="",D.name="",D.realname="",D.bio="",D.affiliation="",D.membership={},D.ageOptions=["8-14","15-17","18-24","25-44","45-64","65+","Prefer not to disclose"],D.genderOptions=["Male","Female","Other","Prefer not to disclose"],D.raceOptions=["Black or African American","American Indian or Alaskan Native","Asian","Native Hawaiian or Other Pacific Islander","White","Some other race"],D.age="",D.gender="",D.race={},D.mode=null,D.login=w,D.apply=$,D.close=y,D.reset=k,s(),t.$on("account:edit",f),t.$on("register:show",b),t.$on("signin:show",_),t.$on("auth:hide",j),t.$on("signout",m)}angular.module("app.auth").controller("AuthController",e),e.$inject=["$q","$rootScope","$filter","cloudinary","logger","dataservice"]}(),function(){"use strict";function e(){this.config={appErrorPrefix:void 0},this.configure=function(e){this.config.appErrorPrefix=e},this.$get=function(){return{config:this.config}}}function t(e){e.decorator("$exceptionHandler",i)}function i(e,t,i){return function(a,n){var o=t.config.appErrorPrefix||"",s={exception:a,cause:n};a.message=o+a.message,e(a,n),i.error(a.message,s)}}angular.module("blocks.exception").provider("exceptionHandler",e).config(t),t.$inject=["$provide"],i.$inject=["$delegate","exceptionHandler","logger"]}(),function(){"use strict";function e(e,t){function i(i){return function(a){var n,o;return a.code&&a.message&&(n="\n"+a.message,o=i+n),a.message=o,console.log(a.message),t.error(i),e.reject(a)}}var a={catcher:i};return a}e.$inject=["$q","logger"],angular.module("blocks.exception").factory("exception",e)}(),function(){"use strict";function e(e,t){function i(i,a,n){t.error(i,n),e.error("Error: "+i,a)}function a(t,i,a){e.info("Info: "+t,i)}function n(i,a,n){t.success(i,n),e.info("Success: "+i,a)}function o(t,i,a){e.warn("Warning: "+t,i)}var s={showToasts:!0,error:i,info:a,success:n,warning:o,log:e.log};return s}angular.module("blocks.logger").factory("logger",e),e.$inject=["$log","toastr"]}(),function(){"use strict";function e(e,t,i){function a(e,a,o,s){function r(e,a){e.forEach(function(e){e.config.resolve=angular.extend(e.config.resolve||{},n.resolveAlways),t.state(e.state,e.config)}),a&&!p&&(p=!0,i.otherwise(a))}function l(){a.$on("$stateChangeError",function(t,i,a,n,o,r){if(!m){v.errors++,m=!0;var l=i&&(i.title||i.name||i.loadedTemplateUrl)||"unknown target",c="Error routing to "+l+". "+(r.data||"")+". <br/>"+(r.statusText||"")+": "+(r.status||"");s.warning(c,[i]),e.path("/")}})}function c(){l(),u()}function d(){return o.get()}function u(){a.$on("$stateChangeSuccess",function(e,t,i,o,s){v.changes++,m=!1;var r=(t.title||"")+" "+n.docTitle;a.title=r,a.$broadcast("map:hide")})}var m=!1,p=!1,v={errors:0,changes:0},g={configureStates:r,getStates:d,stateCounts:v};return c(),g}var n={docTitle:void 0,resolveAlways:{}};e.html5Mode(!0),this.configure=function(e){angular.extend(n,e)},this.$get=a,a.$inject=["$location","$rootScope","$state","logger"]}angular.module("blocks.router").provider("routerHelper",e),e.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e,t,i,a,n,o){function s(){n.showSplash();var t=[r(),l(),c(),d()];return e.all(t).then(function(){n.hideSplash(),a.info("Activated Communities View")})}function r(){var e=o.getAuth();return e&&e.uid?void f(e.uid):o.getUsersRecent(1).then(function(e){return f(e[0].id),w.userId})}function l(){return o.getArray("users").then(function(e){return w.users=e,w.users})}function c(){return o.getArray("groups").then(function(e){return w.groups=e,w.groups})}function d(){return o.getSites().then(function(e){return w.sites=e,w.sites})}function u(e){return o.getObservationsByUserId(e).then(function(t){return w.observations[e]=t,w.numberOfObservations=0,w.observations[e]})}function m(e){return o.getIdeasByUserId(e).then(function(t){return w.ideas[e]=t,w.numberOfIdeas=0,w.ideas[e]})}function p(e){return o.getGroupsByUserId(e).then(function(e){return w.userGroups=e,w.userGroups})}function v(e){t.users[e]&&t.users[e].avatar?w.userAvatar=t.users[e].avatar:w.userAvatar="images/default-avatar.png"}function g(e){return t.users[e].affiliation?o.getSiteById(t.users[e].affiliation).then(function(e){return w.userSite=e.name,w.userSite}):(w.userSite="",w.userSite)}function h(){var e=o.getAuth();w.isSelf=e&&e.uid===w.userId}function f(t){w.groupId=void 0;var i=[u(t),m(t),p(t),g(t)];return e.all(i).then(function(){w.userId=t,w.observationsDisplayLimit=w.displayLimit,w.ideasDisplayLimit=w.displayLimit,w.groupsDisplayLimit=w.displayLimit,v(t),h(),a.info("Updated Communities View based on new userId")})}function b(e){return w.userId=void 0,o.getGroupById(e).then(function(t){w.groupId=e,w.group=t,w.groupMembers=Object.keys(t.members||{});for(var i in t.members)u(i)})}function _(){t.$broadcast("account:edit")}function y(){w.query="",w.peopleDisplayLimit=w.peopleDisplayLimit+w.sidebarDisplayLimit}var w=this;w.title="Communities",w.sidebarDisplayLimit=5,w.mainDisplayLimit=6,w.userId=void 0,w.userSite="",w.userAvatar="",w.isSelf=!1,w.users=[],w.groups=[],w.sites=[],w.userObservations=[],w.userGroups=[],w.groupId=void 0,w.group={},w.observations={},w.ideas={},w.peopleDisplayLimit=w.sidebarDisplayLimit,w.groupsDisplayLimit=w.sidebarDisplayLimit,w.observationsDisplayLimit=w.mainDisplayLimit,w.ideasDisplayLimit=w.mainDisplayLimit,w.groupsDisplayLimit=w.mainDisplayLimit,w.isPeopleListVisible=!0,w.isGroupsListVisible=!0,w.updateUserId=f,w.updateGroupId=b,w.showUpdate=_,w.showMore=y,w.formatDate=n.formatDate,s()}angular.module("app.communities").controller("CommunitiesController",e),e.$inject=["$q","$rootScope","$filter","logger","utility","dataservice"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"communities",config:{url:"/communities",templateUrl:"app/communities/communities.html",controller:"CommunitiesController",controllerAs:"vm",title:"Communities",settings:{nav:4,content:"Communities"}}}]}angular.module("app.communities").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,i,a,n,o,s){function r(){o.showSplash();var t=[l(),c()];return e.all(t).then(function(){o.hideSplash(),n.info("Activated Contributions View")})}function l(){s.onAuthStateChanged(function(e){return e?s.getObservationsByUserId(e.uid).then(function(e){return v.myObservations=e,v.myObservations}):void(v.myObservations=[])})}function c(){return s.getArray("activities").then(function(e){return v.allProjects=e,v.allProjects})}function d(){if(!v.file||!v.file[0])return void n.info("No file was selected for upload.");v.uploading=!0;"application/pdf"===v.file[0].type?m():u()}function u(){a.upload(v.file,{}).then(function(e){v.contribution.data.image=e.data.secure_url,v.contribution.activity=v.contribution.activity||"-ACES_a38",s.addObservation(v.contribution,!0).then(function(){p(),n.success("Your observation has been submitted!")})})["catch"](function(e){n.error("The file you selected could not be uploaded."),v.file=null,v.uploading=!1})}function m(){a.upload(v.file,{upload_preset:"pdf-preset"}).then(function(e){v.contribution.data.image=e.data.secure_url.replace(/\.[^\/.]+$/,".jpg"),v.contribution.data.doc=e.data.secure_url,v.contribution.activity=v.contribution.activity||"-ACES_a38",s.addObservation(v.contribution,!1).then(function(){p(),n.success("Your observation has been submitted!")})})["catch"](function(e){n.error("The file you selected could not be uploaded."),v.file=null,v.uploading=!1})}function p(){v.uploading=!1,v.contribution={data:{}},v.file=null}var v=this;v.title="Contributions",v.contribution={data:{}},v.myObservations=[],v.file=null,v.submit=d,v.reset=p,r()}angular.module("app.contributions").controller("ContributionsController",e),e.$inject=["$q","$rootScope","$scope","cloudinary","logger","utility","dataservice"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"contributions",config:{url:"/contributions",templateUrl:"app/contributions/contributions.html",controller:"ContributionsController",controllerAs:"vm",title:"Contributions",settings:{nav:5,content:"Contributions"}}}]}angular.module("app.contributions").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e){e.$get().watchPosition({timeout:6e4,maximumAge:250,enableHighAccuracy:!0})}function t(e){e.config({cloud_name:"university-of-colorado",upload_preset:"web-preset"})}function i(e){e.options.timeOut=8e3,e.options.positionClass="toast-bottom-right"}function a(e,t,i){e.debugEnabled&&e.debugEnabled(!0),i.configure(o.appErrorPrefix),t.configure({docTitle:" | "+o.appTitle})}var n=angular.module("app.core");n.config(e),e.$inject=["$geolocationProvider"],n.config(t),t.$inject=["cloudinaryProvider"],n.config(i),i.$inject=["toastr"];var o={appErrorPrefix:"[NN Error] ",appTitle:"NatureNet",mapOptions:{zoom:5,minZoom:3,zoomControl:!0,scaleControl:!1,streetViewControl:!1,keyboardShortcuts:!1,clickableIcons:!1}};n.value("config",o),n.config(a),a.$inject=["$logProvider","routerHelperProvider","exceptionHandlerProvider"],n.constant("FirebaseName","naturenet"),n.config(["FirebaseName",function(e){firebase.initializeApp({apiKey:"AIzaSyAm--uHylcDf4J5wGroMzPeKmw6uIDnVr8",authDomain:e+".firebaseapp.com",databaseURL:"https://"+e+".firebaseio.com",storageBucket:e+".appspot.com"}),firebase.database.enableLogging(!1)}]),n.config(["FirebaseName","$firebaseRefProvider",function(e,t){t.registerUrl({"default":"https://"+e+".firebaseio.com",projects:"https://"+e+".firebaseio.com/activities",comments:"https://"+e+".firebaseio.com/comments",geo:"https://"+e+".firebaseio.com/geo",groups:"https://"+e+".firebaseio.com/groups",ideas:"https://"+e+".firebaseio.com/ideas",tags:"https://"+e+".firebaseio.com/tags",observations:"https://"+e+".firebaseio.com/observations",sites:"https://"+e+".firebaseio.com/sites",users:"https://"+e+".firebaseio.com/users",usersPrivate:"https://"+e+".firebaseio.com/users-private",usersRanks:"https://"+e+".firebaseio.com/users-ranks"})}])}(),function(){"use strict";angular.module("app.core").constant("toastr",toastr).constant("moment",moment)}(),function(){"use strict";function e(e){var i="/404";e.configureStates(t(),i)}function t(){return[{state:"404",config:{url:"/404",templateUrl:"app/core/404.html",title:"404"}}]}e.$inject=["routerHelper"],angular.module("app.core").run(e)}(),function(){"use strict";function e(e,t,i,a,n,o,s,r,l,c,d){function u(e){function t(e){return e}function i(t){return c.catcher("Unable to load data for "+e)(t)}var a=o["default"].child(e).orderByChild("updated_at").limitToLast(50),n=m(a);return n.$loaded().then(t)["catch"](i)}function m(e){return new l(e,function(e){return!(e.hasOwnProperty("status")&&"deleted"===e.status.toLowerCase())})}function p(e){return e.updated_at=firebase.database.ServerValue.TIMESTAMP,e.hasOwnProperty("created_at")||(e.created_at=firebase.database.ServerValue.TIMESTAMP),e}function v(e,i){function a(e){s.resolve("success")}function n(e){s.reject(c.catcher("Unable to delete this content.")(e))}var s=t.defer();return e&&i?(o["default"].child(e).child(i).child("status").set("deleted",function(e){e?n(e):(o.geo.child(i).remove(),a())}),s.promise):(console.log("Invalid data"),t.reject())}function g(){return r.position.coords}function h(e){return firebase.auth().onAuthStateChanged(e)}function f(){return firebase.auth().currentUser}function b(e,t){function i(e){return e}function a(e){switch(e.code){case"auth/invalid-email":return c.catcher("The email address is not valid.")(e);case"auth/user-disabled":return c.catcher("This account has been disabled.")(e);case"auth/user-not-found":return c.catcher("There is no user account for this email address.\nJoin NatureNet to get started.")(e);case"auth/wrong-password":return c.catcher('The email address or password is incorrect.\nIf you forgot your password, click "Reset my password."')(e);default:return c.catcher("Unable to sign in.")(e)}}var o=n(firebase.auth());return o.$signInWithEmailAndPassword(e,t).then(i)["catch"](a)}function _(){var e=n(firebase.auth());return e.$signOut()}function y(e,t){function i(e){return e}function a(e){switch(e.code){case"auth/invalid-email":return c.catcher("The email address is not valid.")(e);case"auth/email-already-in-use":return c.catcher("This email address is already in use.\nSign in to access your account.")(e);case"auth/weak-password":return c.catcher("Please choose a password that is at least 6 characters long.")(e);default:return c.catcher("Unable to join with email and password.")(e)}}var o=n(firebase.auth());return o.$createUserWithEmailAndPassword(e,t).then(i)["catch"](a)}function w(e){function i(e){n.resolve("success")}function a(e){n.reject(c.catcher("Unable to create user profile!")(e))}var n=t.defer(),s=e.uid,r={};return r["users-private/"+s]=p({id:s,name:e.name||""}),r["users/"+s]=p({id:s,avatar:e.avatar||"",display_name:e.display_name||"",affiliation:e.affiliation||"",bio:e.bio||""}),o["default"].update(r,function(e){e?a(e):i()}),n.promise}function $(e){function i(e){n.resolve("success")}function a(e){n.reject(c.catcher("Unable to update user profile!")(e))}var n=t.defer(),s=e.uid,r={};r["users-private/"+s+"/id"]=s,r["users-private/"+s+"/name"]=e.name||"",r["users-private/"+s+"/demographics"]=e.demographics||null,r["users-private/"+s+"/updated_at"]=firebase.database.ServerValue.TIMESTAMP,r["users/"+s+"/id"]=s,r["users/"+s+"/avatar"]=e.avatar||"",r["users/"+s+"/display_name"]=e.display_name||"",r["users/"+s+"/affiliation"]=e.affiliation||"",r["users/"+s+"/bio"]=e.bio||"",r["users/"+s+"/groups"]=e.groups||null,r["users/"+s+"/updated_at"]=firebase.database.ServerValue.TIMESTAMP;for(var l in e.groups)r["groups/"+l+"/members/"+s]=e.groups[l]||null;return o["default"].update(r,function(e){e?a(e):i()}),n.promise}function k(e){function t(e){return e}function i(e){switch(error.code){case"auth/invalid-email":return c.catcher("The email address is not valid.")(error);case"auth/user-not-found":return c.catcher("There is no user account for this email address.\nJoin NatureNet to get started.")(error);default:return c.catcher("Unable to reset password.")(error)}}var a=n(firebase.auth());return a.$sendPasswordResetEmail(e).then(t)["catch"](i)}function x(){function e(e){return e}function t(e){return c.catcher("Unable to load users")(e)}return i(o.users).$loaded().then(e)["catch"](t)}function j(e){function t(e){return e}function i(e){return c.catcher("Unable to load recent users")(e)}var n=o.users.orderByChild("latest_contribution").limitToLast(e),s=a(n);return s.$loaded().then(t)["catch"](i)}function D(){function e(e){return e}function a(e){return c.catcher("Unable to load your profile")(e)}var n=f();if(null===n||!n.uid)return console.log("User is not signed in."),t.when(null);var s=i(o.users.child(n.uid));return s.$loaded().then(e)["catch"](a)}function S(){function e(e){return e}function a(e){return c.catcher("Unable to load your account data")(e)}var n=f();if(null===n||!n.uid)return console.log("User is not signed in."),t.when(null);var s=i(o.users.child(n.uid)),r=i(o.usersPrivate.child(n.uid));return t.all([s.$loaded(),r.$loaded()]).then(e)["catch"](a)}function I(){function e(e){return e.$value}function a(e){return c.catcher("Unable to load your permissions. Some features may be unavailable.")(e)}var n=f();if(null===n||!n.uid)return console.log("User is not signed in."),t.when(null);var s=i(o.usersRanks.child(n.uid));return s.$loaded().then(e)["catch"](a)}function U(){function e(e){return e}function t(e){return c.catcher("Unable to load groups")(e)}return i(o.groups).$loaded().then(e)["catch"](t)}function P(e){function a(e){return e}function n(e){return c.catcher("Unable to load group")(e)}return e?i(o.groups.child(e)).$loaded().then(a)["catch"](n):(console.log("ID does not exist"),t.when(null))}function A(e){function i(e){return e}function n(e){return c.catcher("Unable to load groups for user")(e)}if(!e)return console.log("ID does not exist"),t.when(null);var s=o.groups.orderByChild("members/"+e).equalTo(!0),r=a(s);return r.$loaded().then(i)["catch"](n)}function C(){function e(e){return e}function t(e){return c.catcher("Unable to load sites")(e)}return i(o.sites).$loaded().then(e)["catch"](t)}function O(e){function a(e){return e}function n(e){return c.catcher("Unable to load site")(e)}return e?i(o.sites.child(e)).$loaded().then(a)["catch"](n):(console.log("ID does not exist"),t.when(null))}function M(e){function a(e){return e}function n(e){return c.catcher("Unable to load observation")(e)}return e?i(o.observations.child(e)).$loaded().then(a)["catch"](n):(console.log("ID does not exist"),t.when(null))}function L(e){function i(e){return e}function a(e){return c.catcher("Unable to load obsevations for user")(e)}if(!e)return console.log("ID does not exist"),t.when(null);var n=o.observations.orderByChild("observer").equalTo(e),s=m(n);return s.$loaded().then(i)["catch"](a)}function N(e){function i(e){return e}function a(e){return c.catcher("Unable to load observations for project")(e)}if(!e)return console.log("ID does not exist"),t.when(null);var n=o.observations.orderByChild("activity").equalTo(e),s=m(n);return s.$loaded().then(i)["catch"](a)}function T(e){function i(e){return e}function a(e){return c.catcher("Unable to load observations for site")(e)}if(!e)return console.log("ID does not exist"),t.when(null);var n=o.observations.orderByChild("site").equalTo(e),s=m(n);return s.$loaded().then(i)["catch"](a)}function E(e,i,a){function n(){ne.cancel(),o.resolve(s)}var o=t.defer(),s={},r=0;ne.updateCriteria({center:[e.lat(),e.lng()],radius:i});ne.on("key_entered",function(e,t){angular.equals(t,[0,0])||(s[e]=t,void 0!=a&&++r>=a&&n())}),ne.on("ready",n);return o.promise}function B(e,i,a){function n(e){r.resolve("success")}function s(e){r.reject(c.catcher("Unable to update observation!")(e))}var r=t.defer(),l={};return e?(l["observations/"+e+"/activity"]=i,l["observations/"+e+"/data/text"]=a,l["observations/"+e+"/updated_at"]=firebase.database.ServerValue.TIMESTAMP,o["default"].update(l,function(e){e?s(e):n()}),r.promise):(console.log("Observation has no ID"),t.when(null))}function R(e,i){function a(e){s.resolve("success")}function n(e){s.reject(c.catcher("Unable to submit observation!")(e))}var s=t.defer();return D().then(function(t){var s=o.observations.push().key;if(e.id=s,e.observer=t.id,e.site=t.affiliation,e.source="web",i&&r.position.coords){var l=r.position.coords.latitude,c=r.position.coords.longitude;e.l={0:l,1:c}}var d={};d["/observations/"+s]=p(e),d["/activities/"+e.activity+"/latest_contribution"]=firebase.database.ServerValue.TIMESTAMP,d["/users/"+e.observer+"/latest_contribution"]=firebase.database.ServerValue.TIMESTAMP,o["default"].update(d,function(e){e?n(e):(new GeoFire(o.geo).set(s,[l,c]),a())})})["catch"](n),s.promise}function G(){function e(e){return e}function t(e){return c.catcher("Unable to load projects")(e)}return i(o.projects).$loaded().then(e)["catch"](t)}function V(e){function a(e){return e}function n(e){return c.catcher("Unable to load project")(e)}return e?i(o.projects.child(e)).$loaded().then(a)["catch"](n):(console.log("ID does not exist"),t.when(null))}function q(e){function t(e){return e}function i(e){return c.catcher("Unable to load recent projects")(e)}var n=o.projects.orderByChild("latest_contribution").limitToLast(e),s=a(n);return s.$loaded().then(t)["catch"](i)}function F(e){function t(e){return e}function i(e){return c.catcher("Unable to load projects for site")(e)}var n=o.projects.orderByChild("sites/"+e).equalTo(!0),s=a(n);return s.$loaded().then(t)["catch"](i)}function H(e,i){function a(e){return e}function n(e){return c.catcher("Unable to submit design idea")(e)}var s=f();if(null===s||!s.uid)return console.log("You must be signed in to do that!"),t.reject(null);var r=o.ideas.push().key,l=p({id:r,group:"idea",type:i,submitter:s.uid,content:e,status:"doing",source:"web"}),d={};return d["ideas/"+r]=l,d["users/"+s.uid+"/latest_contribution"]=firebase.database.ServerValue.TIMESTAMP,o["default"].update(d).then(a)["catch"](n)}function z(e){function i(e){return e}function a(e){return c.catcher("Unable to load ideas for user")(e)}if(!e)return console.log("ID does not exist"),t.when(null);var n=o.ideas.orderByChild("submitter").equalTo(e),s=m(n);return s.$loaded().then(i)["catch"](a)}function W(e,i,a){function n(e){r.resolve("success")}function s(e){r.reject(c.catcher("Unable to update idea!")(e))}var r=t.defer(),l={};return e?(l["ideas/"+e+"/content"]=i,l["ideas/"+e+"/type"]=a,l["ideas/"+e+"/updated_at"]=firebase.database.ServerValue.TIMESTAMP,o["default"].update(l,function(e){e?s(e):n()}),r.promise):(console.log("Idea has no ID"),t.when(null))}function Y(){function e(e){return e}function t(e){return c.catcher("Unable to load tags")(e)}return a(o.tags).$loaded().then(e)["catch"](t)}function J(e,t,a){var n=f();if(null===n||!n.uid)return void console.log("You must be signed in to do that!");var s=n.uid;i(o["default"].child(e+"/"+t.$id+"/likes/"+s)).$loaded().then(function(e){e.$value===a?e.$value=null:e.$value=a,e.$save()})}function K(e,t,i){var a=f();if(null===a||!a.uid)return void console.log("You must be signed in to do that!");var n=o.comments.push().key,s=p({id:n,parent:t.$id,context:e,comment:i,commenter:a.uid,source:"web"}),r={};r["comments/"+n]=s,r[e+"/"+t.$id+"/comments/"+n]=!0,o["default"].update(r)}function Z(e){function t(e){return e}function i(e){return c.catcher("Unable to load recent comments")(e)}var a=o.comments.orderByChild("updated_at").limitToLast(e),n=m(a);return n.$loaded().then(t)["catch"](i)}function Q(e){function i(e){return e}function a(e){return c.catcher("Unable to load comments for user")(e)}if(!e)return console.log("ID does not exist"),t.when(null);var n=o.comments.orderByChild("commenter").equalTo(e),s=m(n);return s.$loaded().then(i)["catch"](a)}function X(e){function t(e){return e}function i(e){return c.catcher("Unable to load comments for this contribution")(e)}var a=o.comments.orderByChild("parent").equalTo(e.$id||e.id),n=m(a);return n.$loaded().then(t)["catch"](i)}var ee={getArray:u,deleteContent:v,getGeolocation:g,onAuthStateChanged:h,getAuth:f,authWithPassword:b,unAuth:_,createUser:y,addUser:w,updateUser:$,resetPassword:k,getActiveUserDetails:S,getActiveUserRank:I,getUsers:x,getUsersRecent:j,getActiveUser:D,getGroups:U,getGroupById:P,getGroupsByUserId:A,getSites:C,getSiteById:O,getObservationById:M,getObservationsByUserId:L,getObservationsByProjectId:N,getObservationsBySiteId:T,getObservationsNear:E,updateObservation:B,addObservation:R,getProjects:G,getProjectsRecent:q,getProjectById:V,getProjectsAtSite:F,getIdeasByUserId:z,addIdea:H,updateIdea:W,getTags:Y,likeContent:J,addComment:K,getCommentsRecent:Z,getCommentsForRecord:X,getCommentsByUserId:Q},te=e.get("naturenet.status");if(te){var ie=o["default"].child(".info/connected"),ae=o["default"].child("status").child(te);ie.on("value",function(e){ae.onDisconnect().set(!1),ae.set(!0)})}r.getCurrentPosition();var ne=new GeoFire(o.geo).query({center:[0,0],radius:1});return ee}angular.module("app.core").factory("dataservice",e),e.$inject=["$cookies","$q","$firebaseObject","$firebaseArray","$firebaseAuth","$firebaseRef","$filter","$geolocation","FilteredArray","exception","logger"]}(),function(){"use strict";function e(e,t){function i(e){var t=moment(+e).format("MMM DD YYYY").toString();return t}function a(){e.$applyAsync(function(){e.showSplash=!0,s+=1,console.log("Splash counter: "+s)})}function n(){e.$applyAsync(function(){s-=1,console.log("Splash counter: "+s),1>s&&(e.showSplash=!1,$(".phone-screens").cycle(),console.log("cleared splash"))})}var o={formatDate:i,showSplash:a,hideSplash:n},s=0;return o}function t(){return function(e){return!(e[i].hasOwnProperty("status")&&"deleted"===e[i].status.toLowerCase())}}angular.module("app.core").factory("utility",e).factory("FilteredArray",["$firebaseArray",function(e){function t(t,i){return this.filterFn=i,e.call(this,t)}return t.prototype.$$added=function(t){var i=e.prototype.$$added.call(this,t);return!this.filterFn||this.filterFn(i)?i:void 0},e.$extend(t)}]).service("notDeleted",t).filter("emptyToEnd",function(){return function(e,t){if(angular.isArray(e)){var i=e.filter(function(e){return e[t]}),a=e.filter(function(e){return!e[t]});return i.concat(a)}}}).filter("deobfuscate",[function(){return function(e){return String(e).replace(" at ","@").replace(" dot ",".")}}]).filter("img_thumb",[function(){return function(e){return String(e).replace("upload/","upload/t_web-thumbnail/")}}]).filter("img_preview",[function(){return function(e){return String(e).replace("upload/","upload/t_web-preview/")}}]).filter("img_sidebar",[function(){return function(e){return String(e).replace("upload/","upload/t_web-sidebar/")}}]).filter("img_large",[function(){return function(e){return String(e).replace("upload/","upload/t_web-large/")}}]).filter("img_fullscreen",[function(){return function(e){return String(e).replace("upload/","upload/t_web-fullscreen")}}]),e.$inject=["$rootScope","$timeout"]}(),function(){"use strict";function e(e,t,i,a,n,o,s,r,l){function c(){s.showSplash();var t=[d()];return l.getMap().then(function(i){n.info("Google Maps Ready"),j.map=i,p(),e.all(t).then(function(){s.hideSplash(),n.info("Activated Map View")})})}function d(){return r.getArray("observations").then(function(e){return j.observations=e,j.observations})}function u(e){e&&r.getObservationById(e).then(function(e){null!==e.$value?j.currentObservation=e:n.warning("This observation cannot be displayed.")})}function m(){$(j.currentObservation),b(j.currentObservation)}function p(){var e=r.getGeolocation();e&&(o.mapOptions.center=new google.maps.LatLng(e.latitude,e.longitude),o.mapOptions.zoom=12),o.mapOptions.mapTypeId=google.maps.MapTypeId.HYBRID,j.map.setOptions(o.mapOptions),i.$broadcast("map:init"),t.$on("map:toggle",_),t.$on("map:show",y),t.$on("map:hide",w),t.$on("auth:success",h)}function v(){j.map&&r.getObservationsNear(j.map.getCenter(),g(),j.maxPoints).then(function(e){j.localObservationIds=e})}function g(){var e=1,t=j.map.getBounds(),i=j.map.getCenter();if(t&&i){var a=t.getNorthEast(),e=google.maps.geometry.spherical.computeDistanceBetween(i,a);e=Math.floor(e/1e3)}return e}function h(e){r.getActiveUser().then(function(e){r.getSiteById(e.affiliation).then(function(e){if(e){var t=new google.maps.LatLng({lat:e.l[0],lng:e.l[1]});j.map.panTo(t),j.map.setZoom(12)}})})}function f(){o.mapOptions.center=new google.maps.LatLng({lat:37.2758365,lng:-104.6536539}),o.mapOptions.zoom=4,j.map.setOptions(o.mapOptions)}function b(e){if(j.map){if(!e||!e.l||angular.equals(e.l,[0,0]))return f();var t=new google.maps.LatLng({lat:e.l[0],lng:e.l[1]}),i=j.map.getZoom();j.map.panTo(t),18>i&&j.map.setZoom(18)}}function _(){i.$parent.hasMap=!i.$parent.hasMap}function y(e,t){t&&(j.currentObservation=t),i.$parent.hasMap=!0}function w(){i.$parent.hasMap=!1}function $(e){j.currentObservation=e,j.hasSidebar=!0,j.showDetail=!1,j.currentProject=void 0,e&&r.getProjectById(e.activity).then(function(e){j.currentProject=e}),x(j.currentObservation)}function k(){j.hasSidebar=!1}function x(){return j.comments=void 0,j.currentObservation?r.getCommentsForRecord(j.currentObservation).then(function(e){return j.comments=e,j.comments}):void 0}var j=this;j.title="Explore",j.map=void 0,j.localObservationIds=void 0,j.observations=void 0,j.currentObservation=void 0,j.currentProject=void 0,j.comments=void 0,j.maxPoints=100,
i.$parent.hasMap=!1,j.hasSidebar=!1,j.isObservationsListVisible=!0,j.showDetail=!1,j.toggleMap=_,j.showSidebar=$,j.hideSidebar=k,j.formatDate=s.formatDate,j.onMapMoved=v,j.select=u,c(),i.$watch("vm.currentObservation",m),i.$on("delete",function(e,t){t===j.currentObservation.id&&(j.currentObservation=void 0)}),i.$on("view",function(e,t){t&&(j.showDetail=!0)})}angular.module("app.explore").controller("ExploreController",e),e.$inject=["$q","$rootScope","$scope","$timeout","logger","config","utility","dataservice","NgMap"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"explore",config:{url:"/explore",templateUrl:"app/explore/explore.html",controller:"ExploreController",controllerAs:"vm",title:"Explore"}}]}angular.module("app.explore").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(){function e(e,t,i){function a(){o=e.map,google.maps.event.addListener(o,"bounds_changed",n)}function n(){function e(){return-85>s?i=l-(s+85):a>85&&(i=l-(a-85)),t=new google.maps.LatLng(i,c),void o.setCenter(t)}var t=void 0,i=void 0,a=o.getBounds().getNorthEast().lat(),n=o.getBounds().getNorthEast().lng(),s=o.getBounds().getSouthWest().lat(),r=o.getBounds().getSouthWest().lng(),l=o.getCenter().lat(),c=o.getCenter().lng(),d=-85>s&&a>85,u=s>-85&&85>a,m=d||u,p=n>0&&180>n&&c>0,v=0>r&&r>-180&&0>c,g=p||v;if(m&&g);else if(!m)return e()}var o=void 0;e.$on("map:init",a)}var t={link:e,restrict:"A"};return t}angular.module("app.explore").directive("nnMapContain",e),e.$inject=[]}(),function(){"use strict";function e(e,t,i,a,n,o){function s(){r(),n.showSplash();var t=[l(),c()];return e.all(t).then(function(){n.hideSplash(),a.info("Activated Home View")})}function r(){/iPad|iPhone|iPod|Android/.test(navigator.userAgent)&&!window.MSStream&&i.open({template:'<div class="modal-header"><h3 class="modal-title" id="modal-title">Download the NatureNet app!</h3></div><div class="modal-body mobile-overlay" id="modal-body"><p>NatureNet is available for iOS and Android.</p><p><a href="https://itunes.apple.com/us/app/naturenet/id1104382694?mt=8" style="display:inline-block;overflow:hidden;background:url(https://linkmaker.itunes.apple.com/images/badges/en-us/badge_appstore-lrg.svg) no-repeat;width:165px;height:40px;margin:10px 0 10px 28px;"></a></p><p><a href="https://play.google.com/store/apps/details?id=org.naturenet&utm_source=global_co&utm_medium=prtnr&utm_content=Mar2515&utm_campaign=PartBadge&pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1"><img alt="Get it on Google Play" src="images/google-play-badge.png" style="height:60px;"/></a></p></div>'})}function l(){return o.getArray("observations").then(function(e){return m.observations=e,m.observations})}function c(){return o.getArray("ideas").then(function(e){return m.ideas=e,m.ideas})}function d(e){t.$broadcast("map:show",e)}function u(){t.$broadcast("map:show")}var m=this;m.title="Home",m.observations=[],m.ideas=[],m.contactEmail="naturenetapp at gmail dot com",m.observationsDisplayLimit=5,m.ideasDisplayLimit=5,m.showObservation=d,m.showMap=u,m.formatDate=n.formatDate,s()}angular.module("app.home").controller("HomeController",e),e.$inject=["$q","$rootScope","$uibModal","logger","utility","dataservice"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"home",config:{url:"/",templateUrl:"app/home/home-new.html",controller:"HomeController",controllerAs:"vm",title:"Home",settings:{content:"Home"}}}]}angular.module("app.home").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,i,a,n,o){function s(){n.showSplash();var t=[l(),d()];return e.all(t).then(function(){n.hideSplash(),a.info("Activated Design Ideas View")})}function r(){return g.comments=void 0,g.selectedIdea?o.getCommentsForRecord(g.selectedIdea).then(function(e){return g.comments=e,g.comments}):void 0}function l(){return o.getArray("ideas").then(function(e){return g.ideas=e,g.ideas})}function c(e,t){return o.addIdea(e,t).then(function(e){l().then(function(){p(),a.success("Idea successfully submitted!")})})}function d(){return o.getTags().then(function(e){return angular.forEach(e,function(e){g.allTags.push(e.$id)}),g.allTags})}function u(){0!==g.content.length&&c(g.content,g.type)}function m(e){g.selectedIdea=e,g.showDetail=!0}function p(){g.content=""}function v(e){g.content+=" #"+e}var g=this;g.title="Design Ideas",g.sidebarDisplayLimit=6,g.uid=void 0,g.content="",g.ideaTypes=["New Features","Project Ideas","Community Ideas","Improvement Ideas"],g.allTags=[],g.type=g.ideaTypes[0],g.ideas=[],g.currentIdeaId=void 0,g.comments=void 0,g.showDetail=!1,g.ideasDisplayLimit=g.sidebarDisplayLimit,g.addIdea=u,g.formatDate=n.formatDate,g.selectIdea=m,g.tag=v,s(),i.$watch("vm.selectedIdea",r),i.$on("delete",function(e,t){t===g.selectedIdea.id&&(g.selectedIdea=void 0)})}angular.module("app.ideas").controller("IdeasController",e),e.$inject=["$q","$rootScope","$scope","logger","utility","dataservice"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"ideas",config:{url:"/ideas",templateUrl:"app/ideas/ideas.html",controller:"IdeasController",controllerAs:"vm",title:"Design Ideas",settings:{nav:3,content:"Design Ideas"}}}]}angular.module("app.ideas").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,i,a,n){function o(){s(),c()}function s(){return n.onAuthStateChanged(r)}function r(t){e.$apply(function(){return t?(y.isAuthenticated=!0,y.userUid=t.uid,e.currentUser=t.uid,e.userRank=void 0,n.getActiveUserRank().then(function(t){e.userRank=t})):(y.isAuthenticated=!1,y.userUid=void 0,e.currentUser=void 0,e.userRank=void 0),y.userUid})}function l(){a.success("You are now logged out.")}function c(){y.navRoutes=w.filter(function(e){return e.settings&&e.settings.nav}).sort(function(e,t){return e.settings.nav-t.settings.nav})}function d(e){return u(e)+" "+m(e)}function u(e){return"item-"+e.name}function m(e){if(!e.title||!t.current||!t.current.title)return"";var i=e.title;return t.current.title.substr(0,i.length)===i?"is-current":""}function p(t){y.showPopup=!1,"boolean"==typeof t&&t?(e.$broadcast("map:show"),y.isMapActive=t):"boolean"!=typeof t||t?"boolean"!=typeof t&&(e.$broadcast("map:toggle"),y.isMapActive=!y.isMapActive):(e.$broadcast("map:hide"),y.isMapActive=t)}function v(){e.$broadcast("register:show"),y.showPopup=!1}function g(){e.$broadcast("account:edit"),y.showPopup=!1}function h(){e.$broadcast("signin:show"),y.showPopup=!1}function f(){e.$broadcast("signout"),y.showPopup=!1,l()}function b(){y.showPopup=!1}function _(){y.isMapActive=!0,y.showPopup=!1}var y=this,w=i.getStates();y.userUid=void 0,y.isMapActive=!1,y.isAuthenticated=!1,y.showPopup=!1,y.getClasses=d,y.toggleMap=p,y.showRegister=v,y.showSignin=h,y.signOut=f,y.showEdit=g,o(),e.$on("auth:success",b),e.$on("map:show",_)}angular.module("app.layout").controller("HeaderController",e),e.$inject=["$rootScope","$state","routerHelper","logger","dataservice"]}(),function(){"use strict";function e(e,t,i,a,n,o){function s(){i.info(a.appTitle+" loaded!",null),n.showSplash(),r();var t=[l(),c(),d()];return e.all(t).then(function(){n.hideSplash()})}function r(){n.showSplash();var e=$("#overlay__two").width()/2;$("#overlay__logo").animate({left:"-="+(e+140)},function(){$("#overlay__one").fadeToggle(1e3).fadeToggle(1e3,function(){$("#overlay__two").fadeToggle(1e3).delay(1e3).fadeToggle(1e3,function(){$("#overlay__logo").animate({left:"+="+(e+140)},n.hideSplash)})})})}function l(){return o.getUsers().then(function(e){return t.users=e,t.users})}function c(){return o.getGroups().then(function(e){return t.groups=e,t.groups})}function d(){return o.getProjects().then(function(e){return t.projects=e,t.projects})}function u(){t.$broadcast("auth:hide")}function m(){v.isAuth=!0}function p(){v.isAuth=!1}var v=this;v.isAuth=!1,v.hideAuth=p,v.broadcastHideAuth=u,s(),t.$on("account:edit",m),t.$on("register:show",m),t.$on("signin:show",m),t.$on("auth:hide",p)}angular.module("app.layout").controller("ShellController",e),e.$inject=["$q","$rootScope","logger","config","utility","dataservice"]}(),function(){"use strict";function e(e,t,i,a,n,o){function s(){n.showSplash();var e=[r(),l(),c()];return t.all(e).then(function(){var e=[d(m.projectId)];t.all(e).then(function(){n.hideSplash(),a.info("Activated Projects View")})})}function r(){return o.getProjectsRecent(1).then(function(e){return m.projectId=e[0].id,m.projectId})}function l(){return o.getArray("activities").then(function(e){return m.projects=i("orderBy")(e,"latest_contribution",!0),m.projects})}function c(){var i=o.getAuth();if(i&&e.users[i.uid]){var a=e.users[i.uid].affiliation;return o.getSiteById(a).then(function(e){m.localSite=e.name}),o.getProjectsAtSite(a).then(function(e){return m.localProjects=e,m.localProjects})}return m.localSite="",m.localProjects=void 0,t.when(null)}function d(e){return o.getObservationsByProjectId(e).then(function(e){return m.projectObservations=e,m.projectObservations})}function u(e){var i=[d(e)];return t.all(i).then(function(){m.projectId=e,a.info("Updated Projects View based on new projectId")})}var m=this;m.title="Projects",m.displayLimit=6,m.projectId=void 0,m.localSite=void 0,m.localProjects=void 0,m.projects=[],m.projectObservations=[],m.isProjectsListVisible=!0,m.updateProjectId=u,m.formatDate=n.formatDate,s()}angular.module("app.projects").controller("ProjectsController",e),e.$inject=["$rootScope","$q","$filter","logger","utility","dataservice"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"projects",config:{url:"/projects",templateUrl:"app/projects/projects.html",controller:"ProjectsController",controllerAs:"vm",title:"Projects",settings:{nav:2,content:"Projects"}}}]}angular.module("app.projects").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(){function e(e,t,i){}var t={scope:{avatarUrl:"@",title:"@",subtitle:"@"},link:e,templateUrl:"app/widgets/nn-badge.html",restrict:"EA"};return t}angular.module("app.widgets").directive("nnBadge",e)}(),function(){"use strict";function e(){function e(e,t,i){e.comment="",e.showDefault=!1,e.getUser()}function t(e,t){e.doComment=function(){t.addComment(e.context,e.data,e.comment),e.comment=""},e.getUser=function(){t.getActiveUser().then(function(t){return t&&(e.avatarUrl=t.avatar),t})}}var i={scope:{data:"=",context:"@",avatarUrl:"@",comment:"@"},link:e,templateUrl:"app/widgets/nn-comment-form.html",restrict:"EA",controller:["$scope","dataservice",t]};return i}angular.module("app.widgets").directive("nnCommentForm",e)}(),function(){"use strict";function e(e){function t(t,i,a){t.formatDate=e.formatDate,"[no description]"===t.comment?t.text="":t.text=t.comment}var i={scope:{limit:"=",avatarUrl:"@",name:"@",date:"@",comment:"@"},link:t,templateUrl:"app/widgets/nn-comment.html",restrict:"EA"};return i}angular.module("app.widgets").directive("nnComment",e),e.$inject=["utility"]}(),function(){"use strict";function e(e,t){function i(e,t,i){function a(){e.options.some(function(t){return t===e.selectedOption})&&(e.isPlaceholder=void 0===e.selectedOption[e.property],e.display=e.selectedOption[e.property])}function n(t){return e.isPlaceholder?void 0:t[e.property]===e.selectedOption[e.property]?"is-current":""}function o(){e.listVisible=!e.listVisible}function s(t){e.isPlaceholder=!1,e.selectedOption=t,e.listVisible=!1,e.display=e.selectedOption[e.property]}e.listVisible=!1,e.isPlaceholder=!0,e.isCurrent=n,e.toggleOptions=o,e.selectOption=s,a()}var a={scope:{placeholder:"@",options:"=",selectedOption:"=",property:"@"},link:i,templateUrl:"app/widgets/nn-dropdown.html",restrict:"EA"};return a}angular.module("app.widgets").directive("nnDropdown",e),e.$inject=["$rootScope","logger"]}(),function(){"use strict";function e(e,t){function i(t,i,a){function n(){t.show=!1}t.formatDate=e.formatDate,t.hide=n,t.isEditMode=!1,t.groups=[{id:"idea",name:"Design Idea"},{id:"challenge",name:"Design Challenge"}],t.types=["New Features","Project Ideas","Community Ideas","Improvement Ideas"],t.edit=function(){t.isEditMode=!0,t.cache=angular.copy(t.idea)},t.cancel=function(){t.isEditMode=!1}}function a(e,i){e.saveChanges=function(){e.isEditMode=!1,console.log(e.cache),i.updateIdea(e.cache.id,e.cache.content,e.cache.group,e.cache.type).then(function(e){t.success("Your idea has been updated.")})},e["delete"]=function(){confirm("Are you sure you want to delete your idea?")&&i.deleteContent("ideas",e.idea.id).then(function(i){e.$emit("delete",e.idea.id),t.success("The idea has been deleted.")})}}var n={scope:{idea:"=",comments:"=",show:"=",editable:"="},link:i,templateUrl:"app/widgets/nn-idea-modal.html",restrict:"EA",controller:["$scope","dataservice",a]};return n}angular.module("app.widgets").directive("nnIdeaModal",e),e.$inject=["utility","logger"]}(),function(){"use strict";function e(e,t){function i(e,i,a){function n(e){}function o(){e.limit=parseInt(e.limit)+parseInt(r)}function s(){e.limit=parseInt(r)}e.$watch("ideas",s);var r=e.limit.slice(0);e.formatDate=t.formatDate,e.showIdea=n,e.incrementLimit=o}var a={scope:{ideas:"=",limit:"@",expandable:"@"},link:i,templateUrl:"app/widgets/nn-ideas-list.html",restrict:"EA"};return a}angular.module("app.widgets").directive("nnIdeasList",e),e.$inject=["$rootScope","utility"]}(),function(){"use strict";function e(){function e(e,t,i){e.showDefault=!1,e.imageUrl&&""!==e.imageUrl||(e.showDefault=!0)}var t={scope:{imageUrl:"@"},link:e,templateUrl:"app/widgets/nn-image.html",restrict:"EA"};return t}angular.module("app.widgets").directive("nnImage",e)}(),function(){"use strict";function e(e){function t(t,i,a){function n(){t.show=!1}t.formatDate=e.formatDate,t.hide=n}var i={scope:{observation:"=",comments:"=",show:"="},link:t,templateUrl:"app/widgets/nn-observation-modal.html",restrict:"EA"};return i}angular.module("app.widgets").directive("nnObservationModal",e),e.$inject=["utility"]}(),function(){"use strict";function e(e){function t(e,t,i){e.isEditMode=!1,e.getProjects(),e.edit=function(){e.isEditMode=!0,e.cache=angular.copy(e.observation)},e.cancel=function(){e.isEditMode=!1,e.observation=e.cache},e.view=function(){e.$emit("view",e.observation.id)}}function i(t,i){t.saveChanges=function(){t.isEditMode=!1,i.updateObservation(t.observation.id,t.observation.activity,t.observation.data.text).then(function(t){e.success("Your observation has been updated.")})},t["delete"]=function(){confirm("Are you sure you want to delete your observation?")&&i.deleteContent("observations",t.observation.id).then(function(i){t.$emit("delete",t.observation.id),e.success("The observation has been deleted.")})},t.getProjects=function(){i.getArray("activities").then(function(e){return t.allProjects=e,e})}}var a={scope:{observation:"=",editable:"="},link:t,templateUrl:"app/widgets/nn-observation.html",restrict:"EA",controller:["$scope","dataservice",i]};return a}angular.module("app.widgets").directive("nnObservation",e),e.$inject=["logger"]}(),function(){"use strict";function e(e,t){function i(i,a,n){function o(t){e.$broadcast("map:show",t)}function s(){i.limit=parseInt(i.limit)+parseInt(l)}function r(){i.limit=parseInt(l)}i.$watch("observations",r);var l=i.limit.slice(0);i.formatDate=t.formatDate,i.showObservation=o,i.incrementLimit=s}var a={scope:{observations:"=",limit:"@",expandable:"@"},link:i,templateUrl:"app/widgets/nn-observations-list.html",restrict:"EA"};return a}angular.module("app.widgets").directive("nnObservationsList",e),e.$inject=["$rootScope","utility"]}(),function(){"use strict";function e(){function e(e,t,i){function a(){e.likes=n("likes",!0),e.dislikes=n("likes",!1),e.comments=n("comments"),e.liked=!!e.data.likes&&e.data.likes[e.uid]===!0,e.disliked=!!e.data.likes&&e.data.likes[e.uid]===!1}function n(t,i){if(e.data[t]){var a=0,n=void 0;for(n in e.data[t])"undefined"!=typeof i&&e.data[t][n]!==i||a++;return a}return 0}e.$watchCollection("data.likes",a),e.$watchCollection("data.comments",a)}function t(e,t){var i=t.getAuth();e.uid=i?i.uid:null,e.doLike=function(){e.context&&t.likeContent(e.context,e.data,!0)},e.doDislike=function(){e.context&&t.likeContent(e.context,e.data,!1)}}var i={scope:{data:"=",showDislikes:"=",context:"@"},link:e,templateUrl:"app/widgets/nn-social-totals.html",restrict:"EA",controller:["$scope","dataservice",t]};return i}angular.module("app.widgets").directive("nnSocialTotals",e)}(),function(){"use strict";function e(){function e(e,t,i){}var t={scope:{status:"="},link:e,templateUrl:"app/widgets/nn-status.html",restrict:"EA"};return t}angular.module("app.widgets").directive("nnStatus",e)}(),angular.module("app.core").run(["$templateCache",function(e){e.put("app/auth/auth.html","<div class=\"auth -center\" ng-class=\"{ 'auth--wrap': vm.mode === 'signin', 'auth--tall': vm.mode === 'update' }\" ng-click=$event.stopPropagation()><div class=auth__header><div class=\"auth__avatar -centerh\"><img ng-src={{vm.avatar}} ngf-src=\"!vm.avatarFile[0].$error && vm.avatarFile[0]\"><div ng-if=\"vm.mode === 'update'\" ngf-drop ngf-select ng-drag-over-class=\"'dragover'\" ngf-multiple=false ngf-pattern=\"'image/*'\" accept=image/* ng-model=vm.avatarFile style=width:100%;height:100%><div class=auth__upload></div></div></div><div class=auth__close ng-click=vm.close()></div></div><div class=auth__wrapper><div ng-if=\"vm.mode === 'register'\" class=auth__content ng-include=\"'app/auth/register.html'\"></div><div ng-if=\"vm.mode === 'signin'\" class=auth__content ng-include=\"'app/auth/signin.html'\"></div><div ng-if=\"vm.mode === 'update'\" class=auth__content ng-include=\"'app/auth/edit.html'\"></div></div></div>"),e.put("app/auth/edit.html",'<form novalidate class="auth__form auth__form--register" ng-submit=vm.apply()><div class=auth__form><label>Username</label> <input class="auth__field field-public" required placeholder=Username type=text ng-model=vm.name> <label>Real Name (private)</label> <input class="auth__field field-private" required placeholder=Name type=text ng-model=vm.realname> <label>Bio</label> <input class="auth__field field-public" placeholder=Bio type=text ng-model=vm.bio> <label>Site Affiliation</label><select class="auth__field field-public" required placeholder="Site Affiliation" ng-model=vm.affiliation ng-options="s.name for s in vm.sites"><option disabled selected hidden value>Site Affiliation</option></select><div class=auth__form><label>Groups</label> <label ng-repeat="g in vm.groups"><input class="auth__field field-public" type=checkbox ng-model=vm.membership[g.id]> {{g.name}}</label></div></div><div class=auth__text style="text-align: center;">Optional. This data will be visible to researchers only.</div><div class=auth__form><div class=auth__form><p>What is your age range?</p><select class="auth__field field-private" required placeholder=Age ng-model=vm.age ng-options="a for a in vm.ageOptions"><option disabled selected hidden value>Age</option></select><p>What is your gender?</p><select class="auth__field field-private" required placeholder=Gender ng-model=vm.gender ng-options="g for g in vm.genderOptions"><option disabled selected hidden value>Gender</option></select></div><div class=auth__form><p>What is your primary racial identity?</p><label ng-repeat="r in vm.raceOptions"><input class="auth__field field-private" placeholder=Race type=checkbox ng-model=vm.race[r]> {{r}}</label></div></div><input class="button button--auth" value=apply type=submit></form>'),e.put("app/auth/register.html",'<form novalidate class="auth__form auth__form--register" ng-submit=vm.apply()><div class=auth__text>You are invited to participate in NatureNet, a research project being conducted by the researchers listed at <a href=http://research.nature-net.org/people.html target=_blank>http://research.nature-net.org/people.html</a>. Researchers are interested in seeing what kind of information is posted to NatureNet and how it is used and shared. Your name and email will not be visible to any other participants unless you so choose, and we will not provide it to any third party.</div><div class=auth__form><input class="auth__field field-private" required placeholder=email type=text ng-model=vm.email> <input class="auth__field field-private" required placeholder=password type=password ng-model=vm.password> <input class="auth__field field-private" required placeholder=Name type=text ng-model=vm.realname> <input class="auth__field field-public" required placeholder=Username type=text ng-model=vm.name><select class="auth__field field-public" required placeholder="Site Affiliation" type=text ng-model=vm.affiliation ng-options="s.name for s in vm.sites"><option disabled selected hidden value>Site Affiliation</option></select><input class="button button--auth" value=join type=submit></div></form>'),e.put("app/auth/signin.html",'<form class="auth__form auth__form--signin" ng-submit="vm.login(vm.email, vm.password)"><div class=auth__logo></div><input class=auth__field placeholder=email type=text ng-model=vm.email> <input class=auth__field placeholder=password type=password ng-model=vm.password><p class=auth__reset ng-click=vm.reset()>Reset my password</p><input class="button button--auth" value="sign in" type=submit></form>'),e.put("app/communities/communities.html",'<div class="sidebar sidebar--communities"><header class="sidebar__header sidebar__header--people"><div class="nn-dropdown nn-dropdown--people" ng-class="{ \'nn-dropdown--show-list\': !!vm.isPeopleListVisible }"><div class=nn-dropdown__display ng-click="vm.isPeopleListVisible = !vm.isPeopleListVisible"><span>People</span><div class=nn-dropdown__action></div></div><div class=nn-dropdown__options><div class=nn-dropdown__option><form><input class=nn-dropdown__input type=text placeholder=search ng-model=vm.query></form></div><div class=nn-dropdown__option ng-repeat="u in vm.users | filter:{ display_name:vm.query } | orderBy: \'-created_at\' | orderBy: \'-latest_contribution\' | emptyToEnd: \'latest_contribution\' | limitTo: vm.peopleDisplayLimit" ng-click=vm.updateUserId(u.id)><nn-badge class=nn-badge title={{u.display_name}} subtitle={{vm.sites[u.affiliation].name}} avatar-url={{u.avatar}}></nn-badge></div><div class=sidebar__see-more ng-if="vm.users.length > vm.peopleDisplayLimit"><a href=# ng-click=vm.showMore()>Show More</a></div></div></div></header><header class="sidebar__header sidebar__header--groups"><div class="nn-dropdown nn-dropdown--groups" ng-class="{ \'nn-dropdown--show-list\': !!vm.isGroupsListVisible }"><div class=nn-dropdown__display ng-click="vm.isGroupsListVisible = !vm.isGroupsListVisible"><span>Groups</span><div class=nn-dropdown__action></div></div><div class=nn-dropdown__options><div class=nn-dropdown__option ng-repeat="g in vm.groups | orderBy: \'-updated_at\' | limitTo: vm.groupsDisplayLimit" ng-click=vm.updateGroupId(g.id)><nn-badge class=nn-badge title={{g.name}} subtitle={{vm.sites[g.affiliation].name}} avatar-url={{g.avatar}}></nn-badge></div><div class=sidebar__see-more ng-if="vm.groups.length > vm.groupsDisplayLimit"><a href=# ng-click="vm.groupsDisplayLimit = vm.groupsDisplayLimit + vm.sidebarDisplayLimit">Show More</a></div></div></div></header></div><div class="main main--with-sidebar main--communities" ng-show=vm.userId ng-include="\'app/communities/user.html\'"></div><div class="main main--with-sidebar main--communities" ng-show=vm.groupId ng-include="\'app/communities/group.html\'"></div>'),e.put("app/communities/group.html",'<section class="main__section masthead"><header class=masthead__header><nn-badge class="nn-badge nn-badge--banner" title={{vm.group.name}} subtitle={{vm.userSite}} avatar-url={{vm.group.avatar}}></nn-badge></header><div class=masthead__text>{{vm.group.bio}}</div></section><section class="main__section recent-contributions"><div class=main__subtitle>Contributions by {{vm.group.name}}</div><div class=main__subtitle ng-repeat-start="uid in vm.groupMembers"><nn-badge class="nn-badge clickable" title={{$root.users[uid].display_name}} avatar-url={{$root.users[uid].avatar}} ng-click=vm.updateUserId(uid)></nn-badge></div><nn-observations-list ng-repeat-end observations=vm.observations[uid] limit=5></nn-observations-list></section>'),e.put("app/communities/user.html",'<section class="main__section masthead"><header class=masthead__header><nn-badge class="nn-badge nn-badge--banner" title={{$root.users[vm.userId].display_name}} subtitle={{vm.userSite}} avatar-url={{vm.userAvatar}}></nn-badge></header><div class=masthead__text>{{$root.users[vm.userId].bio}}</div></section><section class="main__section recent-contributions"><div class=main__subtitle>Recent Contributions by {{$root.users[vm.userId].display_name}}</div><nn-observations-list observations=vm.observations[vm.userId] limit={{vm.mainDisplayLimit}} expandable=true></nn-observations-list><nn-ideas-list ideas=vm.ideas[vm.userId] limit={{vm.mainDisplayLimit}} expandable=true></nn-ideas-list></section><section class="main__section main__section--groups"><div class=main__subtitle>Groups</div><div class=main__groups><nn-badge class="nn-badge nn-badge--large clickable" ng-if="vm.userGroups.length > 0" ng-repeat="g in vm.userGroups | orderBy: \'-updated_at\' | limitTo: vm.groupsDisplayLimit" title={{g.name}} avatar-url={{g.avatar}} ng-click=vm.updateGroupId(g.id)></nn-badge><div ng-if="vm.userGroups.length === 0">No groups.</div></div><div class ng-if="vm.userGroups.length > vm.groupsDisplayLimit"><a href=# ng-click="vm.groupsDisplayLimit = vm.groupsDisplayLimit + vm.mainDisplayLimit">Show More</a></div></section>'),e.put("app/contributions/contributions.html",'<div class="sidebar sidebar--ideas"><header class=sidebar__header><div class="nn-dropdown nn-dropdown--contrib nn-dropdown--show-list"><div class=nn-dropdown__display><span>Contributions</span><div class=nn-dropdown__action></div></div><div class=nn-dropdown__options><div class=list-item ng-repeat="o in vm.myObservations | orderBy: \'-updated_at\' | filter:{ status : \'!deleted\' }" ng-click=vm.showObservation(o)><nn-image class=list-item__image image-url="{{o.data.image | img_preview}}"></nn-image><div class=list-item__detail><nn-comment class="nn-badge list-item__comment" name={{$root.users[o.observer].display_name}} date={{o.updated_at}} avatar-url={{$root.users[o.observer].avatar}} comment={{o.data.text}}></nn-comment><nn-social-totals class=totals data=o></nn-social-totals></div></div></div></div></header></div><div class="main main--with-sidebar main--ideas"><section class="main__section masthead"><header class=masthead__header><div class=masthead__avatar style="background-size: cover; background-image: url(\'/images/add-observation.png\')"></div><div class=masthead__title>Contributions</div></header><div class=masthead__text><form class="masthead__form clearfix"><p class=masthead__directions>Upload</p><p class=masthead__description>Use one of the methods below to upload a photo or PDF document to use in your contributions.</p><div class=container-fluid><div ngf-drop ngf-select class="drop-box col-xs-12" style=height:200px ng-drag-over-class="\'dragover\'" ngf-multiple=false ngf-pattern="\'image/*\'" accept=image/* ng-model=vm.file><span ng-if="!vm.uploading && !vm.file">Drop a file here<br>or<br><button type=button class="btn btn-primary" ng-click=vm.selectFile()>Select a file</button></span> <img ng-if="!!vm.file[0] && vm.file[0].type.includes(\'image\') && !vm.uploading" ngf-src="!vm.file[0].$error && vm.file[0]" style="display:block;margin:0 auto;max-width:100%;"> {{vm.file[0].name}}<uib-progressbar style="padding: 0 2em;" ng-if=vm.uploading value=vm.progress type=info max=100 animate=true title="Upload progress">Uploading...</uib-progressbar></div><div class="col-xs-12 col-lg-6"><span class=masthead__directions>Description</span> <textarea ng-model=vm.contribution.data.text class=form-control rows=3 style=resize:vertical;></textarea></div><div class="col-xs-12 col-lg-6"><span class=masthead__directions>Where is it?</span> <input type=text placeholder=(Optional) ng-model=vm.contribution.where class=form-control> <span class=masthead__directions>Project</span><select class=form-control ng-model=vm.contribution.activity ng-options="a.id as a.name for a in vm.allProjects"><option disabled selected hidden value>Free Observation (Default)</option></select></div><div class="col-xs-12 text-right" style="margin-top: 1em"><button class="btn btn-link" type=button ng-click=vm.reset()>Clear</button> <button class="btn btn-success" type=button ng-click=vm.submit()>Submit</button></div></div></form></div></section></div>'),e.put("app/core/404.html","<section class=fourzerofour></section>"),e.put("app/explore/explore.html",'<ng-map nn-map-contain class=map default-style=false center="United States of America" on-idle=vm.onMapMoved() ng-class="{\'has-sidebar\': !!vm.hasSidebar}"><div class="main main--with-sidebar main--explore" ng-if="!!vm.currentObservation && vm.showDetail"><nn-observation-modal observation=vm.currentObservation comments=vm.comments show=vm.showDetail></nn-observation-modal></div><div class="sidebar sidebar--map-list"><header class=sidebar__header><div class="nn-dropdown nn-dropdown--explore" ng-class="{ \'nn-dropdown--show-list\': !!vm.isObservationsListVisible }"><div class=nn-dropdown__display ng-click="vm.isObservationsListVisible = !vm.isObservationsListVisible"><span>Observations</span><div class=nn-dropdown__action></div></div><div class=nn-dropdown__options><div class=list-item ng-repeat="o in vm.observations | orderBy: \'-updated_at\' | filter:{ status : \'!deleted\' }" ng-click=vm.showSidebar(o)><nn-image class=list-item__image image-url="{{o.data.image | img_preview}}"></nn-image><div class=list-item__detail><nn-comment class="nn-badge list-item__comment" limit=80 name={{$root.users[o.observer].display_name}} date={{o.updated_at}} avatar-url={{$root.users[o.observer].avatar}} comment={{o.data.text}}></nn-comment><nn-social-totals class=totals data=o></nn-social-totals></div></div></div></div></header></div><div ng-if=!!vm.currentObservation class="sidebar sidebar--slide sidebar--map-detail"><header class=sidebar__header><nn-badge class="nn-badge sidebar__user" title={{$root.users[vm.currentObservation.observer].display_name}} subtitle={{vm.formatDate(vm.currentObservation.updated_at)}} avatar-url={{$root.users[vm.currentObservation.observer].avatar}}></nn-badge><a class=sidebar__close href=# ng-click=vm.hideSidebar()></a></header><nn-observation observation=vm.currentObservation editable="vm.currentObservation.observer === $root.currentUser || $root.userRank === \'admin\'"></nn-observation><section class=sidebar__comments><nn-comment class="comment list-item__comment" ng-repeat="c in vm.comments | orderBy: \'updated_at\'" name={{$root.users[c.commenter].display_name}} date={{c.updated_at}} avatar-url={{$root.users[c.commenter].avatar}} comment={{c.comment}}></nn-comment><nn-comment-form class="nn-badge comment list-item__comment" data=vm.currentObservation context=observations></nn-comment-form></section></div><custom-marker ng-repeat="(id, pos) in vm.localObservationIds | limitTo: vm.maxPoints" position={{pos}}><div class=map-marker ng-click=vm.select(id)></div></custom-marker></ng-map>'),e.put("app/home/home-basic.html",'<div class=home-content><div class=home-intro><div class=home-boxes><div class=boxes--upper><div class=box--upper-left><div class=box__text style="text-align: right;"><a class="box__label inline-icon icon--large icon--learn" href=# ng-click=vm.showObservation()>Explore:</a> Learn about nature in your area</div><a href=# ng-click=vm.showObservation()><nn-image class=box__image image-url=https://res.cloudinary.com/university-of-colorado/image/upload/t_web-feature/v1471987089/static/learn.jpg></nn-image></a></div><div class=box--upper-right><a href=/communities><nn-image class=box__image image-url=https://res.cloudinary.com/university-of-colorado/image/upload/t_web-feature/v1480440120/static/share.jpg></nn-image></a><div class=box__text><a class="box__label inline-icon icon--large icon--share" href=/communities>Communities:</a> Share your observations and ideas</div></div></div><div class=boxes--lower><div class=box--lower-left><div class=box__text style="text-align: right;"><a class="box__label inline-icon icon--large icon--shape" href=/projects>Projects:</a> Improve and shape sustainability initatives</div><a href=/projects><nn-image class=box__image image-url=https://res.cloudinary.com/university-of-colorado/image/upload/t_web-feature/v1460772115/xkmtpemilwmse1gvxkgk.jpg></nn-image></a></div><div class=box--lower-right><a href=/ideas><nn-image class=box__image image-url=https://res.cloudinary.com/university-of-colorado/image/upload/t_web-feature/v1469724921/irhlvtis18ibmmr1vhzi.jpg></nn-image></a><div class=box__text><a class="box__label inline-icon icon--large icon--design" href=/ideas>Design:</a> New ways to use NatureNet</div></div></div></div></div><hr><div ng-controller="HeaderController as vm" ng-show=!vm.isAuthenticated style="width: 100%; text-align: center;"><a class="button button--joinnow" href=# ng-click=vm.showRegister()></a></div><div class="content content--featured" ng-hide=true><div class=content__text><div class=content__title>Featured on NatureNet</div><div class=featured>Observation</div><div class=featured>Community</div><div class=featured>Project</div><div class=featured>Design Idea</div></div></div><div class=content__footer><p style="text-align: center; margin-bottom: 1em;"><a target=_blank href="https://itunes.apple.com/us/app/naturenet/id1104382694?mt=8" style="display:inline-block;overflow:hidden;background:url(https://linkmaker.itunes.apple.com/images/badges/en-us/badge_appstore-lrg.svg) no-repeat;width:165px;height:40px;margin:10px 0;"></a> <a target=_blank href="https://play.google.com/store/apps/details?id=org.naturenet&utm_source=global_co&utm_medium=prtnr&utm_content=Mar2515&utm_campaign=PartBadge&pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1"><img alt="Get it on Google Play" src=images/google-play-badge.png style=height:60px;></a></p><p><a class="button button--inline" href="mailto:{{vm.contactEmail | deobfuscate}}">Contact Us</a> NatureNet is a platform for sharing place-based nature observations and contributing design ideas. Please do NOT contribute photos of humans or pets. NatureNet is a moderated site. Postings that are inappropriate or irrelevant will be deleted. If you want one of your observations to be removed, please send an email to <a href="mailto:{{vm.contactEmail | deobfuscate}}"><span>{{vm.contactEmail | deobfuscate}}</span></a> with a description of the content you would like to be removed.</p></div></div><div class=home-items><ul class="items items--observations"><li class=items__group>Recent Observations</li><li class=item ng-repeat="o in vm.observations | orderBy: \'-updated_at\' | limitTo: vm.observationsDisplayLimit" ng-click=vm.showObservation(o)><nn-badge class="nn-badge item__user" title={{$root.users[o.observer].display_name}} subtitle={{vm.formatDate(o.updated_at)}} avatar-url="{{o.data.image | img_thumb}}"></nn-badge><nn-social-totals class="item__totals totals -centerv" data=o></nn-social-totals></li><li class=items__action ng-if="vm.observations.length > vm.observationsDisplayLimit"><a href=# ng-click="vm.observationsDisplayLimit = vm.observationsDisplayLimit + 5">Show More</a></li></ul><ul class="items items--ideas"><li class=items__group>Recent Design Ideas</li><li class=item ng-repeat="i in vm.ideas | orderBy: \'-updated_at\' | limitTo: vm.ideasDisplayLimit"><nn-badge class="nn-badge item__user" title={{$root.users[i.submitter].display_name}} subtitle={{vm.formatDate(i.updated_at)}} avatar-url={{$root.users[i.submitter].avatar}}></nn-badge><nn-social-totals class="item__totals totals -centerv" data=i show-dislikes=true></nn-social-totals></li><li class=items__action ng-if="vm.ideas.length > vm.ideasDisplayLimit"><a href=# ng-click="vm.ideasDisplayLimit = vm.ideasDisplayLimit + 5">Show More</a></li></ul></div><div class=home-footer><ul class=footer-items><li><a href=http://www.uncc.edu target=_blank>The University of North Carolina at Charlotte</a></li><li><a href=http://www.colorado.edu target=_blank>University of Colorado Boulder</a></li><li><a href=http://www.umd.edu target=_blank>University of Maryland, College Park</a></li><li><a href=http://research.nature-net.org target=_blank>NatureNet Research</a></li></ul></div>'),
e.put("app/home/home-new.html",'<div style=position:relative;width:100%;height:100%;><div class=scroller><section class="home__page page--intro container-fluid" id=intro><div class="page__content col-xs-12 col-md-7 col-md-offset-1"><div class="row content-row"><div class="col-sm-4 hidden-xs"><div class="homepage-icon icon-phone"></div></div><div class="col-xs-12 col-sm-8 content-col"><div class="h1 center-block">Get NatureNet now!</div><div style="display: block;"><a target=_blank href="https://itunes.apple.com/us/app/naturenet/id1104382694?mt=8" style="display:inline-block;overflow:hidden;background:url(https://linkmaker.itunes.apple.com/images/badges/en-us/badge_appstore-lrg.svg) no-repeat;width:165px;height:40px;margin:10px 0;"></a> <a target=_blank href="https://play.google.com/store/apps/details?id=org.naturenet&utm_source=global_co&utm_medium=prtnr&utm_content=Mar2515&utm_campaign=PartBadge&pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1"><img alt="Get it on Google Play" src=images/google-play-badge.png style=height:60px;></a></div></div></div><div class="row content-row"><div class="col-sm-4 hidden-xs"><div class="homepage-icon icon-tree"></div></div><div class="col-xs-12 col-sm-8 content-col"><div class="h1 center-block">Contribute to NatureNet</div><a href=#intro ng-click=vm.showMap() class="page__goto button button--explore">Explore</a> <a href=#projects class="page__next dark"></a></div></div></div><div class="page__preview hidden-xs hidden-sm col-md-4"><div class=phone__template><div class=phone-screens><img class=phone-screen src=/images/ss-splash.png> <img class=phone-screen src=/images/ss-map-preview-android.png> <img class=phone-screen src=/images/ss-map-zoom-android.png> <img class=phone-screen src=/images/ss-project-android.png> <img class=phone-screen src=/images/ss-obs-android.png></div></div></div></section><section class="home__page dark page--projects container-fluid" id=projects><div class="page__content col-xs-12 col-md-4 col-md-offset-2"><div class=page__title><h1>Join a citizen science project</h1></div><div class=page__blurb><p>Help collect information about the environment. Select a topic from the list and contribute photos and descriptions directly from your phone through the NatureNet app.</p></div><a href=/projects class="page__goto button button--projects">Projects</a> <a href=#contributions class=page__next></a></div><div class="page__preview hidden-xs hidden-sm col-md-4"><div class=phone__template><div class=phone-screens><img class=phone-screen src=/images/ss-project-list-ios.png> <img class=phone-screen src=/images/ss-project-ios.png></div></div></div></section><section class="home__page page--contributions container-fluid" id=contributions><div class="page__content col-xs-12 col-md-4 col-md-offset-2"><div class=page__title><h1>Make your contribution</h1></div><div class=page__blurb><p>You can also upload your photos and descriptions to the nature-net.org website and comment on others you see there.</p></div><a href=/contributions class="page__goto button button--contributions">Contributions</a> <a href=#communities class="page__next dark"></a></div><div class="page__preview hidden-xs hidden-sm col-md-4"><div class=phone__template><div class=phone-screens><img class=phone-screen src=/images/ss-camera.png> <img class=phone-screen src=/images/ss-obs-ios.png></div></div></div></section><section class="home__page dark page--communities container-fluid" id=communities><div class="page__content col-xs-12 col-md-4 col-md-offset-2"><div class=page__title><h1>Find a friend</h1></div><div class=page__blurb><p>Connect with others who share your interests in a topic, a place, or an activity. Share tips, tools, and techniques for learning about and preserving the environment.</p></div><a href=/communities class="page__goto button button--communities">Communities</a> <a href=#ideas class=page__next></a></div><div class="page__preview hidden-xs hidden-sm col-md-4"><div class=phone__template><div class=phone-screens><img class=phone-screen src=/images/ss-user-list-ios.png></div></div></div></section><section class="home__page page--ideas container-fluid" id=ideas><div class="page__content col-xs-12 col-md-4 col-md-offset-2"><div class=page__title><h1>Be a part of the design</h1></div><div class=page__blurb><p>Share your ideas for new nature and environmental stewardship projects. Share your suggestions for improving the NatureNet mobile phone app and website.</p></div><a href=/ideas class="page__goto button button--ideas">Design Ideas</a> <a href=#summary class="page__next dark"></a></div><div class="page__preview hidden-xs hidden-sm col-md-4"><div class=phone__template><div class=phone-screens><img class=phone-screen src=/images/ss-idea-list-ios.png> <img class=phone-screen src=/images/ss-idea-ios.png></div></div></div></section><section class="home__page page--summary container-fluid" id=summary><div class="h1 center-block">Explore NatureNet</div><div class="row content-row" style="text-align: center;align-items:flex-end;"><div class="col-xs-6 col-md-2 col-md-offset-1 home-action-hover"><div class="homepage-icon icon-explore"></div><div>Contribute to NatureNet</div><a href=#summary ng-click=vm.showMap() class="button button--dark">Explore</a></div><div class="col-xs-6 col-md-2 home-action-hover"><div class="homepage-icon icon-projects"></div><div>Join a citizen science project</div><a href=/projects class="button button--dark">Projects</a></div><div class="col-xs-6 col-md-2 home-action-hover"><div class="homepage-icon icon-ideas"></div><div>Be a part of the design</div><a href=/ideas class="button button--dark">Design Ideas</a></div><div class="col-xs-6 col-md-2 home-action-hover"><div class="homepage-icon icon-communities"></div><div>Find a friend</div><a href=/communities class="button button--dark">Communities</a></div><div class="col-xs-6 col-md-2 home-action-hover"><div class="homepage-icon icon-contributions"></div><div>Make your contribution</div><a href=/contributions class="button button--dark">Contributions</a></div></div></section></div></div><div class=home-footer><ul class=footer-items><li><a href=http://www.uncc.edu target=_blank>The University of North Carolina at Charlotte</a></li><li><a href=http://www.colorado.edu target=_blank>University of Colorado Boulder</a></li><li><a href=http://www.umd.edu target=_blank>University of Maryland, College Park</a></li><li><a href=http://research.nature-net.org target=_blank>NatureNet Research</a></li></ul></div>'),e.put("app/home/home.html",'<div class=home-content><div class="content content--what"><div class=content__image></div><div class=content__text><h1 class=content__title>What is NatureNet?</h1><h2 class=content__subtitle>A community of citizen environmentalists whose members keep making it better.</h2><div class=content__description><p>NatureNet is a community of citizen environmentalists whose members keep making it better. Active sites include the Anacostia Watershed in Washington, D.C. and Maryland, Reedy Creek Nature Center in Charlotte, North Carolina, Aspen Center for Environmental Studies in Aspen, Colorado, and your backyard!</p><br><p class=content__lineitem>LEARN about nature in your community</p><p class=content__lineitem>SHARE your observations and ideas</p><p class=content__lineitem>SHAPE nature projects in your local community</p><p class=content__lineitem>DESIGN this nature technology with your community</p><br><p>This project is supported by the National Science Foundation under Grant No. IIS-1221513 and Grant No. 1423212 to the University of North Carolina at Charlotte, Grant No. 1423207 to the University of Maryland, and Grant No. 1423338 to the University of Colorado.</p></div></div></div><div class="content content--why"><div class=content__image></div><div class=content__text><h1 class=content__title>Why join NatureNet?</h1><p class=content__description>Do you want to participate in a biodiversity-preserving project in your area? Or do you have an idea for a new project and want to get a community behind you? Join NatureNet today, and dont just be a voice in the crowd: be part of a crowd with a voice!</p></div></div><div ng-controller="HeaderController as vm" ng-show=!vm.isAuthenticated><a class="button button--joinnow" href=# ng-click=vm.showRegister()></a></div><div class=content__gallery><nn-observations-list observations=vm.observations limit=5></nn-observations-list></div><div class=content__footer><p><a class="button button--inline" href="mailto:{{vm.contactEmail | deobfuscate}}">Contact Us</a> NatureNet is a platform for sharing place-based nature observations and contributing design ideas. Please do NOT contribute photos of humans or pets. NatureNet is a moderated site. Postings that are inappropriate or irrelevant will be deleted.</p><p>If you want one of your observations to be removed, please send an email to <a href="mailto:{{vm.contactEmail | deobfuscate}}"><span>{{vm.contactEmail | deobfuscate}}</span></a> with a description of the content you would like to be removed.</p></div></div><div class=home-items><ul class="items items--observations"><li class=items__group>Recent Observations</li><li class=item ng-repeat="o in vm.observations | orderBy: \'-updated_at\' | limitTo: vm.observationsDisplayLimit" ng-click=vm.showObservation(o)><nn-badge class="nn-badge item__user" title={{$root.users[o.observer].display_name}} subtitle={{vm.formatDate(o.updated_at)}} avatar-url={{$root.users[o.observer].avatar}}></nn-badge><nn-social-totals class="item__totals totals -centerv" data=o></nn-social-totals></li><li class=items__action ng-if="vm.observations.length > vm.observationsDisplayLimit"><a href=# ng-click="vm.observationsDisplayLimit = vm.observationsDisplayLimit + 5">Show More</a></li></ul><ul class="items items--ideas"><li class=items__group>Recent Design Ideas</li><li class=item ng-repeat="i in vm.ideas | orderBy: \'-updated_at\' | limitTo: vm.ideasDisplayLimit"><nn-badge class="nn-badge item__user" title={{$root.users[i.submitter].display_name}} subtitle={{vm.formatDate(i.updated_at)}} avatar-url={{$root.users[i.submitter].avatar}}></nn-badge><nn-social-totals class="item__totals totals -centerv" data=i show-dislikes=true></nn-social-totals></li><li class=items__action ng-if="vm.ideas.length > vm.ideasDisplayLimit"><a href=# ng-click="vm.ideasDisplayLimit = vm.ideasDisplayLimit + 5">Show More</a></li></ul></div><div class=home-footer><ul class=footer-items><li><a href=http://www.uncc.edu target=_blank>University of North Carolina Charlotte</a></li><li><a href=http://www.colorado.edu target=_blank>University of Colorado Boulder</a></li><li><a href=http://www.umd.edu target=_blank>University of Maryland College Park</a></li></ul></div>'),e.put("app/ideas/ideas.html",'<div class="sidebar sidebar--ideas"><header class=sidebar__header><div class="nn-dropdown nn-dropdown--ideas nn-dropdown--show-list"><div class=nn-dropdown__display><span>Design Ideas</span><div class=nn-dropdown__action></div></div><div class=nn-dropdown__options><div class=list-item ng-repeat="i in vm.ideas | filter:{ status : \'!deleted\' } | orderBy: \'-updated_at\' | limitTo: vm.ideasDisplayLimit" ng-click=vm.selectIdea(i)><div class="list-item__detail list-item__noimage"><nn-comment class="comment list-item__comment" limit=140 name={{$root.users[i.submitter].display_name}} date={{i.updated_at}} avatar-url={{$root.users[i.submitter].avatar}} comment={{i.content}}></nn-comment><nn-social-totals class=totals data=i show-dislikes=true></nn-social-totals></div></div><div class=sidebar__see-more ng-if="vm.ideas.length > vm.ideasDisplayLimit"><a href=# ng-click="vm.ideasDisplayLimit = vm.ideasDisplayLimit + vm.sidebarDisplayLimit">Show More</a></div></div></div></header></div><div class="main main--with-sidebar main--ideas"><section class="main__section masthead"><header class=masthead__header><div class=masthead__avatar style="background-size: cover; background-image: url(\'/images/design-ideas.png\')"></div><div class=masthead__title>Design Ideas</div></header><div class=masthead__text><p class=masthead__description>Crowdsourcing design is a way for anyone to contribute to the NatureNet experience. Designers change the world and the NatureNet project gives everyone a chance to be a designer. Your design idea can be a new way of using NatureNet in your community, a new way to use mobile technology for learning about sustainability or changes in the environment, or a new feature on the web site.</p><div class=masthead__storyboard style="background-image: url(\'/images/design-storyboard.jpg\')"><a href=http://www.freepik.com target=_blank>Designed by Dooder / Freepik</a></div><p class=masthead__directions>Join the discussion below with an idea of your own, comment on someone else\'s idea, or vote for your favorite idea.</p><p class=masthead__subtext>NatureNet is a moderated site. Postings that are inappropriate or irrelevant will be deleted.</p><form class="container-fluid clearfix" ng-submit=vm.addIdea()><div class="row form-group"><div class="col-xs-12 col-lg-8"><textarea class=form-control rows=8 style=width:100%;resize:vertical; placeholder="Write a design idea..." ng-model=vm.content>\r\n            </textarea></div><div class="col-xs-12 col-lg-4"><label>Tag Your idea</label><div class="nn-tags form-control"><a href=# class=nn-tag-item ng-repeat="tag in vm.allTags | orderBy: \'tag\'" ng-click=vm.tag(tag)>#{{tag}}</a></div><label>Choose Idea Type:</label><select class=form-control ng-options="item for item in vm.ideaTypes" ng-model=vm.type></select></div></div><div class=row><div class="col-xs-12 text-right"><button class="btn btn-success" value=submit>Submit</button></div></div></form></div><div ng-if="vm.selectedIdea && vm.showDetail"><nn-idea-modal editable="vm.selectedIdea.submitter === $root.currentUser || $root.userRank === \'admin\'" idea=vm.selectedIdea comments=vm.comments show=vm.showDetail></nn-idea-modal></div></section></div>'),e.put("app/layout/header.html",'<a class=head-logo href="/" ng-click=vm.toggleMap(false)></a><div class=head-menu><div class=head-menu__list><a class="head-menu__item item-explore" ng-click=vm.toggleMap() ng-class="{\'is-current\': !!vm.isMapActive}" href=#>Explore</a> <a class=head-menu__item ng-repeat="r in vm.navRoutes" ng-class=vm.getClasses(r) ng-bind-html=r.settings.content ng-click=vm.toggleMap(false) ui-sref={{r.name}}></a></div><div class=head-menu__foot style="display: none"></div></div><div class=head-user><div ng-hide=vm.isAuthenticated><a class="button head-user__item button--join" href=# ng-click=vm.showRegister()>Join</a> <a class="button head-user__item button--signin" href=# ng-click=vm.showSignin()>Sign In</a></div><div ng-show=vm.isAuthenticated><nn-badge class="nn-badge head-user__item nn-badge--header" avatar-url={{$root.users[vm.userUid].avatar}} title="Welcome, {{$root.users[vm.userUid].display_name}}" ng-click="vm.showPopup = !vm.showPopup"></nn-badge><div class=head-dropdown ng-show=vm.showPopup><div class=head-dropdown__contents><div class=head-dropdown__avatar ng-style="{ \'background-image\' : \'url(\' + $root.users[vm.userUid].avatar + \')\' }"></div><div class=head-dropdown__text>{{$root.users[vm.userUid].display_name}}</div><div class="head-dropdown__button button button--edit" ng-click=vm.showEdit()>Edit Profile</div><div class="head-dropdown__button button button--signout" ng-click=vm.signOut()>Sign Out</div></div></div></div></div>'),e.put("app/layout/shell.html",'<div class=page-logo><a href=#><i class=icon></i></a></div><header class=page-head ng-include="\'app/layout/header.html\'" ng-controller="HeaderController as vm"></header><main class=page-main ui-view></main><footer class=page-foot></footer><div class=page-map ng-include="\'app/explore/explore.html\'" ng-controller="ExploreController as vm" ng-class="{\'has-map\': !!hasMap}"></div><div class="page-over overlay" ng-hide=!vm.isAuth ng-click=vm.broadcastHideAuth()><div ng-include="\'app/auth/auth.html\'" ng-controller="AuthController as vm"></div></div>'),e.put("app/projects/projects.html",'<div class="sidebar sidebar--projects"><header class="sidebar__header sidebar__header--projects"><div class="nn-dropdown nn-dropdown--projects" ng-class="{ \'nn-dropdown--show-list\': !!vm.isProjectsListVisible }"><div class=nn-dropdown__display ng-click="vm.isProjectsListVisible = !vm.isProjectsListVisible"><span>Projects</span><div class=nn-dropdown__action></div></div><div class=nn-dropdown__options><div class=sidebar__sub-header ng-if=!!vm.localSite>Projects at {{vm.localSite}}</div><div class=nn-dropdown__option ng-if=!!vm.localProjects ng-repeat="p in vm.localProjects | orderBy: \'-latest_contribution\'" ng-click=vm.updateProjectId(p.id)><nn-badge class=nn-badge title={{p.name}} subtitle avatar-url={{p.icon_url}}></nn-badge></div><div class=sidebar__sub-header>All Projects</div><div class=nn-dropdown__option ng-repeat="p in vm.projects | orderBy: \'-latest_contribution\'" ng-click=vm.updateProjectId(p.id)><nn-badge class=nn-badge title={{p.name}} subtitle avatar-url={{p.icon_url}}></nn-badge></div></div></div></header></div><div class="main main--with-sidebar main--projects"><section class="main__section masthead"><header class=masthead__header><div class=masthead__avatar style="background-image: url(\'{{$root.projects[vm.projectId].icon_url}}\')"></div><div class=masthead__title>{{$root.projects[vm.projectId].name}}</div></header><div class=masthead__text>{{$root.projects[vm.projectId].description}}</div></section><section class="main__section recent-contributions"><div class=main__subtitle>Recent Contributions</div><nn-observations-list observations=vm.projectObservations limit={{vm.displayLimit}} expandable=true></nn-observations-list></section></div>'),e.put("app/widgets/nn-badge.html","<div class=nn-badge__avatar style=\"background-image: url('{{avatarUrl || '/images/default-avatar.png' }}')\"></div><div class=nn-badge__text><p class=nn-badge__title>{{title}}</p><p ng-if=!!subtitle class=nn-badge__subtitle>{{subtitle}}</p></div>"),e.put("app/widgets/nn-comment-form.html",'<form class="nn-badge comment" ng-submit=doComment()><div class=nn-badge__avatar style="background-image: url(\'{{(avatarUrl || \'/images/default-avatar.png\') }}\')"></div><textarea class=comment__input placeholder="Write a comment..." ng-model=comment>\r\n  </textarea><input type=submit class="button button--edit" style=float:right; value=Send></form>'),e.put("app/widgets/nn-comment.html","<nn-badge class=\"nn-badge comment__user\" title={{name}} subtitle={{formatDate(date)}} avatar-url={{avatarUrl}}></nn-badge><div class=comment__text title={{comment}}>{{comment | limitTo: limit}}{{comment.length > limit ? '...' : ''}}</div>"),e.put("app/widgets/nn-dropdown.html",'<div class=nn-dropdown ng-class="{ \'nn-dropdown--show-list\': !!listVisible }"><div class=nn-dropdown__display ng-click=toggleOptions()><span ng-if=!isPlaceholder>{{display}}</span> <span class=placeholder ng-if=isPlaceholder>{{placeholder}}</span><div class=nn-dropdown__action></div></div><div class=nn-dropdown__options><div class=nn-dropdown__option ng-repeat="o in options" ng-class=isCurrent(o) ng-click=selectOption(o)><span>{{property !== undefined ? o[property] : o}}</span></div></div></div>'),e.put("app/widgets/nn-idea-modal.html",'<div class=overlay-partial><div class="nn-modal -center" ng-click=$event.stopPropagation()><header class=nn-modal__header><nn-badge class="nn-badge detail__user" title={{$root.users[idea.submitter].display_name}} subtitle={{formatDate(idea.updated_at)}} avatar-url={{avatarUrl}}></nn-badge><a class=nn-modal__close href=# ng-click=hide()></a></header><div class=detail><nn-status class=detail__status status=idea.status></nn-status><div ng-if=!isEditMode class=detail__header ng-switch=idea.group><div ng-switch-when=challenge>Design Challenge</div><div ng-switch-default>Design Idea</div></div><select ng-if=isEditMode ng-model=cache.group ng-options="g.id as g.name for g in groups"></select><div ng-if=!isEditMode class=detail__header>{{idea.type}}</div><select ng-if=isEditMode ng-model=cache.type ng-options="t for t in types"></select><div ng-if=!isEditMode class=detail__description>{{idea.content}}</div><textarea ng-if=isEditMode class=detail__description ng-model=cache.content></textarea> <img class=detail__image src="{{idea.icon_url | img_large }}" ng-if=idea.icon_url><nn-social-totals class="totals detail__totals" data=idea context=ideas show-dislikes=true></nn-social-totals><div ng-if=!isEditMode style="margin-left:2em; display:inline;"><input ng-if=editable class=button ng-click=edit() value=edit type=submit> <input ng-if=editable class="button button--delete" ng-click=delete() value=delete type=submit></div><div ng-if=isEditMode style=display:inline;><input class="button button--cancel" ng-click=cancel() value=cancel type=submit> <input class="button button--save" ng-click=saveChanges() value=save type=submit></div><section class=detail__comments><nn-comment class="comment detail__comment" ng-repeat="c in comments | orderBy: \'updated_at\'" name={{$root.users[c.commenter].display_name}} date={{c.updated_at}} avatar-url={{$root.users[c.commenter].avatar}} comment={{c.comment}}></nn-comment><nn-comment-form class="nn-badge comment list-item__comment" data=idea context=ideas></nn-comment-form></section></div></div></div>'),e.put("app/widgets/nn-ideas-list.html",'<div class=main__ideas><div class="list-item list-item--square" ng-if="ideas.length > 0" ng-repeat="i in ideas | filter:{ status:\'!deleted\' } | orderBy: \'-updated_at\' | limitTo: limit" ng-click=showIdea(i)><div class="list-item__detail list-item__noimage"><nn-comment class="comment list-item__comment" limit=120 name={{$root.users[i.submitter].display_name}} date={{i.updated_at}} avatar-url={{$root.users[i.submitter].avatar}} comment={{i.content}}></nn-comment></div></div><div ng-if="ideas.length === 0">No Design Ideas.</div></div><div class ng-if="expandable && (ideas.length > limit)"><a href=# ng-click=incrementLimit()>Show More</a></div>'),e.put("app/widgets/nn-image.html","<div ng-if=showDefault style=\"background-image: url('/images/default-image.png')\"></div><div ng-if=!showDefault style=\"background-image: url('{{imageUrl}}')\"></div>"),e.put("app/widgets/nn-observation-modal.html",'<div class=overlay-partial><div class="nn-modal -center" ng-click=$event.stopPropagation()><header class=nn-modal__header><nn-badge class="nn-badge detail__user" title={{$root.users[observation.observer].display_name}} subtitle={{formatDate(observation.updated_at)}} avatar-url={{avatarUrl}}></nn-badge><a class=nn-modal__close href=# ng-click=hide()></a></header><div class=detail><div class=detail__description ng-if=observation.data.text>{{observation.data.text}}</div><img class=detail__image src="{{observation.data.image | img_large }}" ng-if=observation.data.image><nn-social-totals class="totals detail__totals" data=observation context=observations show-dislikes=false></nn-social-totals><a ng-if=!!observation.data.image ng-href={{observation.data.image}} target=_new>Download Image</a> <a ng-if=!!observation.data.doc ng-href={{observation.data.doc}} target=_new>Download Document</a><section class=detail__comments><nn-comment class="comment detail__comment" ng-repeat="c in comments | orderBy: \'updated_at\'" name={{$root.users[c.commenter].display_name}} date={{c.updated_at}} avatar-url={{$root.users[c.commenter].avatar}} comment={{c.comment}}></nn-comment><nn-comment-form class="nn-badge comment list-item__comment" data=observation context=observations></nn-comment-form></section></div></div></div>'),e.put("app/widgets/nn-observation.html",'<section class=sidebar__content><nn-badge ng-if=!isEditMode class="sidebar__title nn-badge" title={{allProjects.$getRecord(observation.activity).name}} subtitle avatar-url={{allProjects.$getRecord(observation.activity).icon_url}}></nn-badge><select ng-if=isEditMode ng-model=observation.activity ng-options="a.id as a.name for a in allProjects"></select><div ng-if=observation.data.image nn-image class=sidebar__image image-url="{{observation.data.image | img_sidebar}}" ng-click=view()></div><p ng-if=!isEditMode class=sidebar__description>{{observation.data.text}}</p><textarea ng-if=isEditMode ng-model=observation.data.text class=sidebar__description></textarea><nn-social-totals class=totals data=observation context=observations></nn-social-totals><div ng-if=!isEditMode style="margin-left:2em; display:inline;"><input ng-if=editable class=button ng-click=edit() value=edit type=submit> <input ng-if=editable class="button button--delete" ng-click=delete() value=delete type=submit></div><div ng-if=isEditMode style=display:inline;><input class="button button--cancel" ng-click=cancel() value=cancel type=submit> <input class="button button--save" ng-click=saveChanges() value=save type=submit></div></section>'),e.put("app/widgets/nn-observations-list.html",'<div class=main__observations><div class="list-item list-item--square" ng-if="observations.length > 0" ng-repeat="o in observations | filter:{ status:\'!deleted\' } | orderBy: \'-updated_at\' | limitTo: limit" ng-click=showObservation(o)><nn-image class=list-item__image image-url="{{o.data.image | img_thumb}}"></nn-image><div class=list-item__detail><nn-badge class="nn-badge item__user" title={{$root.users[o.observer].display_name}} subtitle={{formatDate(o.updated_at)}} avatar-url={{$root.users[o.observer].avatar}}></nn-badge></div></div><div ng-if="observations.length === 0">No Observations.</div></div><div class ng-if="expandable && (observations.length > limit)"><a href=# ng-click=incrementLimit()>Show More</a></div>'),e.put("app/widgets/nn-social-totals.html",'<div class="totals__total totals__total--likes" ng-class="{ totals__liked: liked }" ng-click=doLike()>{{likes}}</div><div class="totals__total totals__total--dislikes" ng-class="{ totals__disliked: disliked }" ng-if=showDislikes ng-click=doDislike()>{{dislikes}}</div><div class="totals__total totals__total--comments">{{comments}}</div>'),e.put("app/widgets/nn-status.html",'<div ng-switch on=status><div class="status status__discussing" ng-switch-when=doing><div class=status__text><p class=status__title>Discussing</p></div><div class=status__icon style="background-image: url(\'images/discussing.png\')"></div></div><div class="status status__completed" ng-switch-when=done><div class=status__text><p class=status__title>Completed</p></div><div class=status__icon style="background-image: url(\'images/completed.png\')"></div></div><div ng-switch-default><div></div></div></div>')}]);